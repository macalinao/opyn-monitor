{"version":3,"sources":["utils/blockNative.js","utils/infura.js","utils/storage.js","constants/contracts.js","utils/web3.js","components/NavBar/ConnectButton.js","components/NavBar/SettingsButton.js","components/NavBar/index.js","components/HomePage/index.js","constants/tokens.js","constants/options/calls.js","constants/options/puts.js","constants/options/insurances.js","constants/options/index.js","components/common/AddressBlock.js","components/common/BalanceBlock.js","components/common/RatioTag.js","components/common/SectionTitle.js","components/common/MaxButton.js","components/common/HelpText.js","components/common/PriceSection.js","components/common/Warning.js","components/common/Comment.js","components/common/VaultButton.js","components/common/Wrapper.js","components/common/CheckBox.js","utils/tracker.js","components/AllContracts/index.js","components/Trade/index.js","components/OptionTrading/styled.js","utils/number.js","utils/0x.js","components/types/index.js","components/OptionTrading/OptionBoard.js","components/OptionTrading/MyOrders.js","components/OptionTrading/OrderBook.js","components/OptionTrading/TabBoard.js","components/OptionTrading/WrapETHSidePanel.js","components/OptionTrading/BuyAndSell.js","components/OptionTrading/index.js","components/MyVaults/NoWallet.js","utils/graph.js","utils/calculation.js","components/MyVaults/OpenVaultModal.js","components/MyVaults/index.js","components/OptionPage/ExerciseModal.js","components/OptionPage/VaultModal.js","components/OptionPage/VaultsList.js","components/OptionPage/OptionInfoBox.js","components/OptionPage/index.js","components/ManageVault/HeaderDashboard.js","components/ManageVault/CollateralManagement.js","components/ManageVault/IssuedTokenManagement.js","components/ManageVault/Liquidation.js","components/ManageVault/Exercise.js","components/ManageVault/UnderlyingManagement.js","components/ManageVault/index.js","components/UniswapTrade/Header.js","components/UniswapTrade/OptionExchange.js","components/UniswapTrade/AddLiquidity.js","components/UniswapTrade/RemoveLiquidity.js","components/UniswapTrade/index.js","components/Footer/index.js","App.js","serviceWorker.js","index.js"],"names":["notify","Notify","dappId","process","networkId","optionContractABI","require","optionExchangeABI","oracleABI","KEYS","filter","k","INFURA_KEY","Math","floor","random","length","web3","Web3","ens","ENS","ETH_ADDR","resolveENS","ensName","a","resolver","addr","address","toLowerCase","getTokenBalance","erc20Token","user","oTokenContract","eth","Contract","methods","balanceOf","call","balance","getTotalSupply","erc20","token","totalSupply","getMaxLiquidatable","oToken","vaultOwner","maxOTokensLiquidatable","maxVaultLiquidatable","getUnderlyingRequiredToExercise","tokenToExercise","underlyingRequiredToExercise","underlyringRequired","getAllowance","contract","spender","allowance","getBalance","utils","fromWei","getPrice","oracleAddr","oracle","price","getPremiumToPay","exchangeAddr","tokenToBuy","buyAmt","paymentToken","exchange","premiumToPay","getPremiumReceived","tokenToSell","sellAmt","premiumReceived","getPreference","key","defaultValue","localStorage","getItem","storePreference","value","setItem","checkAddressAndAddToStorage","watch_addrs","usedAddresses","JSON","parse","includes","push","stringify","ETH_ADDRESS","WETH","KETH","ZeroX_ERC20Proxy","oTokenABI","exchangeABI","uniswapExchangeABI","invokerABI","ZX_ExchagneABI","wrapETHABI","UINT256_MAX","onboard","Onboard","darkMode","subscriptions","wallet","provider","walletSelect","description","wallets","walletName","infuraKey","apiKey","updateModalMode","theme","config","connect","walletCheck","getState","disconnect","walletReset","checkConnectedAndGetAddress","checked","liquidate","oTokenAddr","owner","liquidateAmt","account","send","from","on","hash","kollateralLiquidate","optionExchange","amountOTokens","BigNumber","lte","Error","kollateralInvoker","data","abi","encodeParameters","invoke","burnOToken","burnAmt","burnOTokens","issueOToken","issueAmt","issueOTokens","addETHCollateral","ethAmt","toWei","toString","addERC20Collateral","collateral","collateralAmt","collateralAmtBN","lt","collateralToken","approve","removeCollateral","redeem","redeemVaultBalance","removeUnderlying","tokenAddr","amt","exercise","underlying","amountToExercise","vaults","underlyingRequired","underlyingIsETH","openVault","openVaultAddCollateralAndMint","collateralAsset","tokenAmount","createETHCollateralOption","createERC20CollateralOption","buyOTokensFromExchange","buyOTokens","sellOTokensFromExchange","sellOTokens","addLiquidity","uniswapAddr","maxToken","minLiquidity","ethInWei","uniswapExchange","deadline","ceil","Date","now","removeLiquidity","pool_token_amount","min_eth_wei","min_tokens","wrapETH","amountInWei","weth","deposit","unwrapETH","withdraw","signOrder","order","MetamaskSubprovider","currentProvider","signatureUtils","ecSignOrderAsync","fillOrders","orders","amts","signatures","gasPrice","batchFillOrders","cancelOrders","batchCancelOrders","ConnectButton","setUser","useState","isConnected","setIsConnected","connectWeb3","disconnectWeb3","style","paddingTop","paddingRight","onClick","size","padding","entity","icon","label","ChangeMode","updateTheme","LinkButton","title","isSelected","paddingLeft","opacity","fontSize","NavBar","history","useHistory","isHome","updateIsHome","useEffect","home","location","pathname","primary","height","goBack","secondary","MainButton","iconUrl","tag","width","alt","src","defaultProps","HomePage","display","alignItems","marginRight","marginLeft","USDC","decimals","symbol","OPYN_ETH","cDAI","eth_calls","name","tokens","strike","strikePrice","strikePriceInUSD","minRatio","expiry","eth_puts","insurances","eth_options","concat","allOptions","AddressBlock","shorten","BalanceBlock","asset","integer","digits","gt","str","split","RatioTag","isSafe","ratio","useCollateral","background","color","mode","SectionTitle","MaxButton","HelperText","parseFloat","toFixed","PriceSection","forceDisplay","amtBN","toNumber","WarningText","text","useTheme","warning","Comment","ManageVaultButton","OpenVaultButton","goToMangePage","openAndGoToVault","styled","div","MyCheckBox","onCheck","CheckBoxWrapper","onChange","paddingBottom","props","surfaceContentSecondary","ReactGA","initialize","AllContracts","tracker","pageview","storedOptionTab","storedShowExpired","parseInt","tabSelected","setTabSelected","showExpired","setShowExpired","goToToken","CheckBox","items","selected","choice","fields","entries","option","entriesPerPage","renderEntry","header","toDateString","GoToUniswapFunction","window","open","event","category","action","TradeLanding","goToTrade","BidText","AskText","toBaseUnitBN","rawAmt","raw","base","decimalsBN","times","pow","integerValue","toTokenUnitsBN","tokenDecimals","formatDigits","num","percision","timeSince","timeStamp","secondsPast","getTime","ts","day","getDate","month","match","replace","year","getFullYear","compareVaultRatio","vaultA","vaultB","rateA","rateB","comparison","compareVaultIssued","amountA","oTokensIssued","amountB","isAddress","Promise","endpoint","getOrderBook","quote","baseAsset","assetDataUtils","encodeERC20AssetData","quoteAsset","request","getBasePairAskAndBids","options","map","asks","bids","totalBidAmt","totalAskAmt","bestAskPrice","bestBidPrice","validAsks","records","record","isValid","reduce","prev","cur","plus","getRemainingMakerAndTakerAmount","remainingMakerAssetAmount","askTokenAmt","makerAssetAmount","askQuoteAmt","takerAssetAmount","bestAsk","validBids","metaData","remainingFillableTakerAssetAmount","bidQuoteAmt","bidTokenAmt","bestBid","bestAskAndBids","path","fetch","res","json","entry","notExpired","expirationTimeSeconds","notDust","getOrderFillRatio","createOrder","maker","makerAsset","takerAsset","salt","senderAddress","makerAddress","takerAddress","makerFee","takerFee","makerAssetData","takerAssetData","exchangeAddress","feeRecipientAddress","makerFeeAssetData","chainId","takerFeeAssetData","broadcastOrders","url","method","headers","body","status","validationErrors","reason","getBidPrice","bid","makerAssetDecimals","takerAssetDecimals","getAskPrice","ask","minus","remainingTakerAssetAmount","makerAssetAmountBN","takerAssetAmountBN","multipliedBy","getGasPrice","getFillAmountsOfOrders","selectedOrders","targetTakerAstAmount","targetMakerAstAmount","sumTakerAmount","sumMakerAmount","takerAmountArray","makerAmount","takerAmount","undefined","takerAmountNeeded","makerAmountNeeded","PropTypes","shape","string","isRequired","number","optionsByDate","signature","orderHash","puts","calls","result","distinctExpirys","Set","optionsExpiresThisDay","o","strikePrices","pairs","put","find","sort","b","expiryText","groupByDate","OptionBoard","setBaseAsset","setTradeType","setSelectedOrders","isLoading","setIsLoading","selectedExpiryIdx","setExpiryIdx","entriesToDisplay","setEntriesToDisplay","isCancelled","updateBoardStats","callsOfExpiry","pair","putsOfExpiry","all","callData","putData","displayEntries","forEach","callDetail","c","putDetail","p","id","setInterval","clearInterval","item","idx","align","callAsk","callBid","callBidAmt","callAskAmt","callOnclick","callBidOnclick","callAskOnclick","putAsk","putBid","putBidAmt","putAskAmt","putOnclick","putBidOnclick","putAskOnclick","Cell","type","disabled","textAlign","MyOrders","myOrdersPage","setMyOrdersPage","userAsks","userBids","statusEmpty","page","onPageChange","onSelectEntries","slice","zeroXUtil","end","OrderBook","tradeType","askPage","setAskPage","bidPage","setBidPage","askSelectedIndexs","setAskSelectedIndexes","bidSelectedIndexs","setBidSelectedIndexes","selectedIdxs","i","indexes","selection","renderSelectionCount","x","format","showIcon","Orders","selectedTab","setSelectedTab","WrapETHModal","wethBalance","opened","setOpen","helperText","setHelperText","wrapAmount","setWrapAmount","unWrapAmount","setUnwrapAmount","ethBalance","setETHBalance","updateETHBalance","quoteBalance","idETHBalance","onClose","wide","amount","target","BuyAndSell","baseAssetBalance","quoteAssetBalance","toast","useToast","quoteAssetAmount","setQuoteAssetAmount","fillingtakerAmounts","setFillingTakerAmounts","baseAmountToFill","setBaseAmountToFill","baseAmountToCreate","setBaseAmountToCreate","rate","setRate","fastGasPrice","setFastGasPrice","totalFillableMakerAmount","totalFillableTakerAmount","selectedOrderFillables","setSelectedOrdersFillable","isFillingAndCreating","setIsFillingAndCreating","hasSelectedOrders","feeInETH","panelOpend","setPanelOpended","wethPanelHelperText","setPanelHelperText","activeButton","setActiveButton","expirySeconds","isCanceled","fetchGasPrice","fast","selectedFillables","next","fillableTakerAmounts","baseMaxFillingAmount","quoteMaxFillingAmount","aggregateRate","checkAndAllowQuoteAsset","quoteAssetAmountInBase","checkQuoteAssetBalance","checkBaseAssetBalance","baseAssetAmountInBase","checkAndAllowBaseAsset","baseAssetAmountBase","clickCreateOrder","quoteAssetInBaseUnit","baseAssetInBaseUnit","signedOrder","clickFillOrders","takerAmountBase","clickFillAndCreate","BuyAndSellBlock","Header","TopPart","TopPartText","toFormat","Flex","hint","TabWrapper","Tab","active","LowerPart","Label","Warning","e","amountBN","totalOtokenInSelectedOrders","gte","console","log","quoteAmountTotal","baseAmountTotal","fillingAmounts","quoteAmountTk","quoteAmount","onChangeBaseAmount","adornmentPosition","adornment","newrate","rateBN","onChangeRate","GroupButtonWrapper","GroupButton","index","isActive","BottomTextWrapper","BottomText","FlexWrapper","border","surface","contentSecondary","content","Wrapper","surfaceHighlight","LeftPart","RightPart","WholeScreen","OptionTrading","setAsks","setBids","setBaseAssetBalance","setQuoteAssetBalance","updateOrderBook","updateBaseBalance","baseBalance","idOrderBook","idBaseBalance","updateQuoteBalance","idQuoteAssetBalance","TabBoard","PleaseLogin","setWatchAddress","InAddress","setAddress","placeholder","reverse","scale","radius","fontFamily","getAllVaultsForOption","optionAddress","query","postQuery","response","getAllVaultsForUser","actions","getVault","vault","getLiquidationHistory","liquidationActionsQuery","liquidateActions","getExerciseHistory","exerciseActions","getRemoveUnderlyingHistory","removeUnderlyingActions","calculateStrikeValueInCollateral","collateralDecimals","strikeValueInWei","strikeValueInCollateral","collateralValueInWei","calculateRatio","tokenIssued","Infinity","colalteralBN","tokenIssuedBN","strikePriceBN","OpenVaultModal","setOpened","setCollateralAmt","mintTokenAmt","setMintTokenAmt","setStrikeValueInCollateral","setRatio","useMemo","strikeValueInColltrl","newRatio","mint","visible","amtBn","onCollateralChange","MyVaults","opendVaults","setOpenedVaults","tokensToOpen","setTokensToOpen","watchAddress","isWatchMode","hasAddressConnected","showEmpty","setShowEmpty","displayVaults","userVaults","openedVaults","notOpenedTokens","optionsContract","oTokenName","NoWallet","ExerciseModal","userUnderlyingBalance","setUserUnderlyingBalance","userOTokenBalance","setUserOTokenBalance","exerciseAmount","setExerciseAmount","setUnderlyringRequired","nonEmptyVaults","selectedIndexes","setSelectedIndexes","selectedHasEnoughCollateral","setHasEnoughCollateral","userUnderlying","userOTkns","checkHasEnoughToken","sumIssued","accumulator","current","onChangeExerciseAmt","exeAmtBN","underlyingRawAmt","heading","count","vaultowners","VaultModal","collateralIsETH","addValue","setAddValue","setLiquidateAmt","maxLiquidatable","getData","catch","error","justifyContent","VaultOwnerList","vaultUsesCollateral","vaultsWithDetail","setVaultDetail","setPage","updateInfo","vaultDetail","OptionOverview","totalCollateral","setTotalCollateral","setTotalSupply","totalCollt","rawCollateralBalance","supply","init","OptionPage","useParams","setVaults","allVaults","OptionInfoBox","VaultsList","HeaderDashboard","tokenInUnit","collateralBalance","CollateralManagement","isOwner","collateralAssetBalance","strikeValue","setNewRatio","addCollateralAmt","setAddCollateralAmt","removeCollateralAmt","setRemoveCollateralAmt","updateNewRatio","newCollateral","amtRaw","newCollateralInWei","collateralBalanceRaw","newCollateralWei","minRatioBN","minCollateral","maxToRemove","maxToRemoveInTokenUnit","IssuedTokenManagement","tokenBalance","collateralSymbol","setIssueAmt","setBurnAmt","newAmt","intputAmt","onChangeIssueAmt","maxToIssueRaw","maxToIssue","onChangeBurnAmt","issued","maxToBurn","LiquidationHistory","userTokenBalance","setMaxLiquidatable","setEntries","amountToLiquidate","setAmtToLiquidate","maxToLiquidate","updateLiquidatable","actionsForThisVault","actionA","actionB","timestamp","updateList","maximum","min","amtToLiquidate","collateralToPay","liquidator","transactionHash","transaction","ExerciseHistory","amtCollateralToPay","oTokensToExercise","exerciser","RemoveUnderlying","underlyingDecimals","underlyingAmount","ManageVault","setVault","setStrikeValue","ownerTokenBalance","setOwnerTokenBalance","setUserTokenBalance","userCollateralAssetBalance","setUserCollateralAssetBalance","noVault","setNoVault","vaultToManage","_ownerTokenBalance","_userTokenBalance","userColltBalance","ownerTokenBalanceBN","userTokenBalanceBN","strikeValInCollt","currentRatio","Liquidation","Exercise","UnderlyingManagement","TradePageHeader","poolETHBalance","poolTokenBalance","OptionExchange","setBuyAmt","setSellAmt","setPremiumToPay","setPremiumReceived","updatePremiumToPay","butAmountBN","premium","updatePremiumReceived","sellAmountBN","AddLiquidity","otoken","otokenSymbol","otokenDecimals","userETHBalance","liquidityTokenDecimals","liquidityTokenSupply","amtETHToAdd","setAmtETHToAdd","amtTokenToAdd","setAmtTokenToAdd","liquidityMinted","liquidityMintedMin","ethToTokenRatio","tokenToEthRatio","onChangeTokenAmtToSend","tokenAmt","newEthAmt","newTokenAmt","onChangeETHAmtToSend","ethWei","RemoveLiquidity","userliquidityTokenBalance","amtLiquidityTokenToSell","setAmtLiquidityTokenToSell","poolPortion","estETHRecieved","estOTokenReceived","minETHReceived","minTokenReceived","tokenAmtBN","min_eth","min_token","UniswapPool","setPoolTokenBalance","setPoolETHBalance","setUserETHBalance","setUserLiquidityTokenBalance","setLiquidityTokenSupply","updatePoolInfo","exTokenBalance","exchagneETHBalance","liqTokenTotalSupply","exchangeTokenBalance","updateUserInfo","userEthBalance","liqTokenBalance","userOTknBalanceBN","userLiqTknBalanceBN","Footer","backgroundColor","position","left","bottom","external","href","App","storedTheme","setTheme","assetsUrl","newTheme","Trade","Boolean","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","message"],"mappings":"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","file":"static/js/main.1f5dbb5f.chunk.js","sourcesContent":["import Notify from 'bnc-notify';\n\nconst BLOCKNATIVE_KEY = process.env.REACT_APP_BLOCKNATIVE_KEY;\n\n// eslint-disable-next-line import/prefer-default-export\nexport const notify = Notify({\n  dappId: BLOCKNATIVE_KEY,\n  networkId: 1,\n});\n","import Web3 from 'web3';\n\nimport ENS from 'ethereum-ens';\n\nconst optionContractABI = require('../constants/abi/OptionContract.json');\nconst optionExchangeABI = require('../constants/abi/OptionExchange.json');\nconst oracleABI = require('../constants/abi/Oracle.json');\n\nconst KEYS = [process.env.REACT_APP_INFURA_KEY, process.env.REACT_APP_INFURA_KEY2].filter((k) => k);\nconst INFURA_KEY = KEYS[Math.floor(Math.random() * KEYS.length)];\nconst web3 = new Web3(`https://mainnet.infura.io/v3/${INFURA_KEY}`);\nconst ens = new ENS(web3);\n\nconst ETH_ADDR = '0x0000000000000000000000000000000000000000';\n\n// ENS\nexport const resolveENS = async (ensName) => {\n  const address = await ens.resolver(ensName).addr();\n  return address.toLowerCase();\n};\n\n/**\n *\n * @param {string} erc20Token address\n * @param {string} user address\n * @return {Promise<string>}\n */\nexport const getTokenBalance = async (erc20Token, user) => {\n  if (user === '') return '0';\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  const balance = await oTokenContract.methods.balanceOf(user).call();\n  return balance;\n};\n\nexport const getDecimals = async (erc20Token) => {\n  if (erc20Token === ETH_ADDR) return 18;\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  const decimals = await oTokenContract.methods.decimals().call();\n  return parseInt(decimals, 10);\n};\n\nexport const getERC20Symbol = async (erc20Token) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, erc20Token);\n  return oTokenContract.methods.symbol().call();\n};\n\nexport const getTotalSupply = async (erc20) => {\n  const token = new web3.eth.Contract(optionContractABI, erc20);\n  const totalSupply = await token.methods.totalSupply().call();\n  return totalSupply;\n};\n\n// Option Contract\n\n/**\n * Max liquidatable for given vault\n * @param {string} oToken\n * @param {string} owner\n * @return {Promise<number>}\n */\nexport const getMaxLiquidatable = async (oToken, vaultOwner) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n  const maxVaultLiquidatable = await oTokenContract.methods\n    .maxOTokensLiquidatable(vaultOwner)\n    .call();\n  return maxVaultLiquidatable;\n};\n\n/**\n *\n * @param {string} oToken\n * @param {string} tokenToExercise\n * @return {Promise<string>}\n */\nexport const getUnderlyingRequiredToExercise = async (oToken, tokenToExercise) => {\n  const oTokenContract = new web3.eth.Contract(optionContractABI, oToken);\n  const underlyringRequired = await oTokenContract.methods\n    .underlyingRequiredToExercise(tokenToExercise)\n    .call();\n  // console.log(`what `, underlyringRequired)\n  return underlyringRequired;\n};\n\n/**\n *\n * @param {string} contract\n * @param {string} user\n * @param {string} spender\n * @return {Promise<string>}\n */\nexport const getAllowance = async (contract, user, spender) => {\n  const token = new web3.eth.Contract(optionContractABI, contract);\n  const allowance = await token.methods.allowance(user, spender).call();\n  return allowance;\n};\n\n/**\n * Get balance in eth for the account\n * @param {string} address\n */\nexport const getBalance = async (address) => {\n  if (address === '') return '0';\n  const balance = await web3.eth.getBalance(address);\n  return web3.utils.fromWei(balance);\n};\n\n/**\n * Get price of token in unit of wei\n * @param {string} oracleAddr\n * @param {string} token\n * @returns {Promise<string>}\n */\nexport const getPrice = async (oracleAddr, token) => {\n  const oracle = new web3.eth.Contract(oracleABI, oracleAddr);\n  const price = await oracle.methods.getPrice(token).call();\n  return price; // unit: wei/ per token\n};\n\n// Option Exchange\nexport const getPremiumToPay = async (\n  exchangeAddr,\n  tokenToBuy,\n  buyAmt,\n  paymentToken = ETH_ADDR,\n) => {\n  const exchange = new web3.eth.Contract(optionExchangeABI, exchangeAddr);\n  const premiumToPay = await exchange.methods.premiumToPay(tokenToBuy, paymentToken, buyAmt).call();\n  return premiumToPay;\n};\n\nexport const getPremiumReceived = async (exchangeAddr, tokenToSell, sellAmt) => {\n  const exchange = new web3.eth.Contract(optionExchangeABI, exchangeAddr);\n  const payoutToken = ETH_ADDR;\n  const premiumReceived = await exchange.methods\n    .premiumReceived(tokenToSell, payoutToken, sellAmt)\n    .call();\n  return web3.utils.fromWei(premiumReceived);\n};\n\n// uniswapExchange\n","/**\n * Get value by key\n * @param {string} key\n * @param {string} defaultValue\n */\nexport function getPreference(key, defaultValue) {\n  return localStorage.getItem(key) || defaultValue;\n}\n\n/**\n * store value to storage\n * @param {string} key\n * @param {string} value\n */\nexport function storePreference(key, value) {\n  localStorage.setItem(key, value);\n}\n\nexport function checkAddressAndAddToStorage(address) {\n  const watch_addrs = getPreference('watch_addresses', '[]');\n  const usedAddresses = JSON.parse(watch_addrs);\n  if (!usedAddresses.includes(address.toLowerCase()) && !usedAddresses.includes(address)) {\n    usedAddresses.push(address);\n    storePreference('watch_addresses', JSON.stringify(usedAddresses));\n  }\n}\n","/* eslint-disable camelcase */\n\nexport const ETH_ADDRESS = '0x0000000000000000000000000000000000000000';\nexport const ERC20_Liquidator = '0xF8cE4E70F52FdDBc72547Ce9616ed3E7d4525e8A';\nexport const Kollateral_Liquidator = '0xfBaB30f79bbbC92C708E7e9b01E329e003d8Ce48';\n\nexport const AAVE_LENDING = '0x398eC7346DcD622eDc5ae82352F02bE94C62d119';\nexport const Kollateral_Invoker = '0x06d1f34fd7c055ae5ca39aa8c6a8e10100a45c01';\n\nexport const WETH = '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2';\nexport const DAI = '0x6b175474e89094c44da98b954eedeac495271d0f';\nexport const USDC = '0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48';\nexport const KETH = '0x0000000000000000000000000000000000000001';\n\n// 0x contracts\nexport const ZeroX_Exchange = '0x61935cbdd02287b511119ddb11aeb42f1593b7ef';\nexport const ZeroX_ERC20Proxy = '0x95e6f48254609a6ee006f7d493c8e5fb97094cef';\nexport const ZeroX_ERC721Proxy = '0xefc70a1b18c432bdc64b596838b4d138f6bc6cad';\nexport const ZeroX_Forwarder = '0x4aa817c6f383c8e8ae77301d18ce48efb16fd2be';\nexport const ZeroX_ZRXToken = '0xe41d2489571d322189246dafa5ebde1f4699f498';\n","/* eslint-disable camelcase */\nimport Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\nimport { MetamaskSubprovider } from '@0x/subproviders';\nimport { signatureUtils } from '@0x/order-utils';\nimport Onboard from 'bnc-onboard';\n\n// import { ContractWrappers } from '@0x/contract-wrappers';\n// import { getContractAddressesForChainOrThrow } from '@0x/contract-addresses';\n\n// import {} from '@'\nimport { notify } from './blockNative';\nimport { getAllowance, getPremiumToPay } from './infura';\nimport { getPreference } from './storage';\nimport {\n  ETH_ADDRESS,\n  Kollateral_Liquidator,\n  Kollateral_Invoker,\n  KETH,\n  ZeroX_Exchange,\n  WETH,\n} from '../constants/contracts';\n\nconst oTokenABI = require('../constants/abi/OptionContract.json');\nconst exchangeABI = require('../constants/abi/OptionExchange.json');\nconst uniswapExchangeABI = require('../constants/abi/UniswapExchange.json');\nconst invokerABI = require('../constants/abi/KollateralInvoker.json');\nconst ZX_ExchagneABI = require('../constants/abi/ZeroX_Exchange.json');\nconst wrapETHABI = require('../constants/abi/WETH.json');\n\nconst DEADLINE_FROM_NOW = 60 * 15;\nconst UINT256_MAX = '0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff';\n\nconst INFURA_KEY = process.env.REACT_APP_INFURA_KEY;\nconst BLOCKNATIVE_KEY = process.env.REACT_APP_BLOCKNATIVE_KEY;\nconst FORTMATIC_KEY = process.env.REACT_APP_FORTMATIC_KEY;\n\nlet web3;\n\nconst onboard = Onboard({\n  darkMode: getPreference('theme', 'light') === 'dark',\n  dappId: BLOCKNATIVE_KEY, // [String] The API key created by step one above\n  networkId: 1, // [Integer] The Ethereum network ID your Dapp uses.\n  subscriptions: {\n    wallet: (wallet) => {\n      web3 = new Web3(wallet.provider);\n    },\n  },\n  walletSelect: {\n    description: 'Please select a wallet to connect to Opyn Monitor',\n    wallets: [\n      { walletName: 'metamask' },\n      {\n        walletName: 'walletConnect',\n        infuraKey: INFURA_KEY,\n      },\n      {\n        walletName: 'fortmatic',\n        apiKey: FORTMATIC_KEY,\n      },\n      { walletName: 'trust' },\n      { walletName: 'coinbase' },\n      { walletName: 'status' },\n    ],\n  },\n});\n\nexport const updateModalMode = async (theme) => {\n  const darkMode = theme === 'dark';\n  onboard.config({ darkMode });\n};\n\nexport const connect = async () => {\n  const selected = await onboard.walletSelect();\n  if (!selected) return false;\n  const checked = await onboard.walletCheck();\n  if (!checked) return false;\n  return onboard.getState().address;\n};\n\nexport const disconnect = async () => {\n  onboard.walletReset();\n};\n\n// eslint-disable-next-line consistent-return\nexport const checkConnectedAndGetAddress = async () => {\n  let checked = false;\n  try {\n    checked = await onboard.walletCheck();\n  } catch (error) {\n    await onboard.walletSelect();\n    checked = await onboard.walletCheck();\n  } finally {\n    // eslint-disable-next-line no-unsafe-finally\n    if (checked) return onboard.getState().address;\n  }\n};\n\nexport const liquidate = async (oTokenAddr, owner, liquidateAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n\n  await oToken.methods\n    .liquidate(owner, liquidateAmt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} oTokenAddr\n * @param {string} optionExchange\n * @param {string} owner\n * @param {string} paymentToken payment token address\n */\nexport const kollateralLiquidate = async (oTokenAddr, optionExchange, owner, paymentToken) => {\n  const account = await checkConnectedAndGetAddress();\n\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const amountOTokens = await oToken.methods.maxOTokensLiquidatable(owner).call();\n\n  if (new BigNumber(amountOTokens).lte(new BigNumber(0))) {\n    throw new Error('Nothing to liquidate');\n  }\n\n  const premiumToPay = await getPremiumToPay(\n    optionExchange, // exchange\n    oTokenAddr,\n    amountOTokens,\n    paymentToken === KETH ? ETH_ADDRESS : paymentToken,\n  );\n\n  const kollateralInvoker = new web3.eth.Contract(invokerABI, Kollateral_Invoker);\n\n  const data = web3.eth.abi.encodeParameters(['address', 'address'], [owner, oTokenAddr]);\n  await kollateralInvoker.methods\n    .invoke(\n      Kollateral_Liquidator, // invokeTo\n      data, // invokeData\n      paymentToken, // tokenAddress: Dai, ETH,\n      premiumToPay,\n    )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const burnOToken = async (oTokenAddr, burnAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .burnOTokens(burnAmt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const issueOToken = async (oTokenAddr, issueAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n\n  await oToken.methods\n    .issueOTokens(issueAmt, account)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const addETHCollateral = async (oTokenAddr, owner, ethAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .addETHCollateral(owner)\n    .send({ from: account, value: web3.utils.toWei(ethAmt.toString()) })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} collaral\n * @param {string} oTokenAddr\n * @param {string} owner\n * @param {number|string} collateralAmt in min unit\n */\nexport const addERC20Collateral = async (collateral, oTokenAddr, owner, collateralAmt) => {\n  const collateralAmtBN = new BigNumber(collateralAmt);\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const allowance = await getAllowance(collateral, account, oTokenAddr);\n  // Approve to move collateral\n  if (new BigNumber(allowance).lt(collateralAmtBN)) {\n    const collateralToken = new web3.eth.Contract(oTokenABI, collateral);\n    await collateralToken.methods\n      .approve(oTokenAddr, UINT256_MAX)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  }\n  await oToken.methods\n    .addERC20Collateral(owner, collateralAmtBN.toString())\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} collateral\n * @param {string} oTokenAddr\n * @param {string} collateralAmt in base unit\n */\nexport const removeCollateral = async (collateral, oTokenAddr, collateralAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  if (collateral === ETH_ADDRESS) {\n    await oToken.methods\n      .removeCollateral(collateralAmt)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  } else {\n    await oToken.methods\n      .removeCollateral(collateralAmt)\n      .send({ from: account })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  }\n};\n\nexport const redeem = async (token) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, token);\n  await oToken.methods\n    .redeemVaultBalance()\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n * @param {string} token\n */\nexport const removeUnderlying = async (token) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, token);\n  await oToken.methods\n    .removeUnderlying()\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const approve = async (tokenAddr, spender, amt = UINT256_MAX) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, tokenAddr);\n  await oToken.methods\n    .approve(spender, amt)\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Exercise your oTokens\n * @param {string} oTokenAddr\n * @param {string} underlying asset type\n * @param {string} amountToExercise\n * @param {string[]} vaults vault owners\n */\nexport const exercise = async (oTokenAddr, underlying, amountToExercise, vaults) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  const underlyingRequired = await oToken.methods\n    .underlyingRequiredToExercise(amountToExercise)\n    .call();\n\n  const underlyingIsETH = underlying === ETH_ADDRESS;\n\n  if (!underlyingIsETH) {\n    const allowance = await getAllowance(underlying, account, oTokenAddr);\n    if (new BigNumber(allowance).lt(new BigNumber(underlyingRequired))) {\n      await approve(underlying, oTokenAddr, UINT256_MAX);\n    }\n  }\n\n  await oToken.methods\n    .exercise(amountToExercise, vaults)\n    .send({ from: account, value: underlyingIsETH ? underlyingRequired : '0' })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const openVault = async (oTokenAddr) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  await oToken.methods\n    .openVault()\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const openVaultAddCollateralAndMint = async (\n  oTokenAddr,\n  collateralAsset,\n  collateralAmt,\n  tokenAmount,\n) => {\n  const account = await checkConnectedAndGetAddress();\n  const oToken = new web3.eth.Contract(oTokenABI, oTokenAddr);\n  if (collateralAsset === ETH_ADDRESS) {\n    await oToken.methods\n      .createETHCollateralOption(tokenAmount, account)\n      .send({\n        from: account,\n        value: collateralAmt,\n      })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  } else {\n    // check allowance\n    const allowance = await getAllowance(collateralAsset, account, oTokenAddr);\n    if (new BigNumber(allowance).lt(new BigNumber(collateralAmt))) {\n      await approve(collateralAsset, oTokenAddr, UINT256_MAX);\n    }\n    await oToken.methods\n      .createERC20CollateralOption(tokenAmount, collateralAmt, account)\n      .send({\n        from: account,\n      })\n      .on('transactionHash', (hash) => {\n        notify.hash(hash);\n      });\n  }\n};\n\n// Option Exchange\n\nexport const buyOTokensFromExchange = async (oTokenAddr, exchangeAddr, buyAmt, ethAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const exchange = new web3.eth.Contract(exchangeABI, exchangeAddr);\n  await exchange.methods\n    .buyOTokens(\n      account,\n      oTokenAddr,\n      '0x0000000000000000000000000000000000000000', // payment\n      buyAmt,\n    )\n    .send({ from: account, value: ethAmt })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const sellOTokensFromExchange = async (oTokenAddr, exchangeAddr, sellAmt) => {\n  const account = await checkConnectedAndGetAddress();\n  const allowance = await getAllowance(oTokenAddr, account, exchangeAddr);\n  if (new BigNumber(allowance).lt(new BigNumber(sellAmt))) {\n    await approve(oTokenAddr, exchangeAddr, UINT256_MAX);\n  }\n  const exchange = new web3.eth.Contract(exchangeABI, exchangeAddr);\n  await exchange.methods\n    .sellOTokens(\n      account,\n      oTokenAddr,\n      '0x0000000000000000000000000000000000000000', // payment\n      sellAmt,\n    )\n    .send({ from: account })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n// Uniswap Exchange\n\n/**\n *\n */\nexport const addLiquidity = async (oToken, uniswapAddr, maxToken, minLiquidity, ethInWei) => {\n  const account = await checkConnectedAndGetAddress();\n  const allowance = await getAllowance(oToken, account, uniswapAddr);\n  if (new BigNumber(allowance).lt(new BigNumber(maxToken))) {\n    await approve(oToken, uniswapAddr, UINT256_MAX);\n  }\n  const uniswapExchange = new web3.eth.Contract(uniswapExchangeABI, uniswapAddr);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  await uniswapExchange.methods\n    .addLiquidity(\n      minLiquidity, // min_liquidity\n      maxToken, // max_tokens\n      deadline, // deadline\n    )\n    .send({ from: account, value: ethInWei })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n *\n */\nexport const removeLiquidity = async (uniswapAddr, pool_token_amount, min_eth_wei, min_tokens) => {\n  const account = await checkConnectedAndGetAddress();\n  const uniswapExchange = new web3.eth.Contract(uniswapExchangeABI, uniswapAddr);\n  const deadline = Math.ceil(Date.now() / 1000) + DEADLINE_FROM_NOW;\n  await uniswapExchange.methods\n    .removeLiquidity(pool_token_amount, min_eth_wei, min_tokens, deadline)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/*\n * 0x Protocols\n */\nexport const wrapETH = async (amountInWei) => {\n  const account = await checkConnectedAndGetAddress();\n  const weth = new web3.eth.Contract(wrapETHABI, WETH);\n  await weth.methods\n    .deposit()\n    .send({\n      from: account,\n      value: amountInWei,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const unwrapETH = async (amountInWei) => {\n  const account = await checkConnectedAndGetAddress();\n  const weth = new web3.eth.Contract(wrapETHABI, WETH);\n  await weth.methods\n    .withdraw(amountInWei)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\n/**\n * Sign Order\n * @param {*} order\n */\nexport const signOrder = async (order) => {\n  const account = await checkConnectedAndGetAddress();\n  const provider = new MetamaskSubprovider(web3.currentProvider);\n  return signatureUtils.ecSignOrderAsync(provider, order, account);\n};\n\nexport const fillOrders = async (orders, amts, signatures, value, gasPrice) => {\n  const account = await checkConnectedAndGetAddress();\n  const exchange = new web3.eth.Contract(ZX_ExchagneABI, ZeroX_Exchange);\n  await exchange.methods\n    .batchFillOrders(orders, amts, signatures)\n    .send({\n      from: account,\n      value, // Protocol fee: gas to be gas price * 150\n      gasPrice: web3.utils.toWei(gasPrice, 'gwei'), // gwei to wei\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n\nexport const cancelOrders = async (orders) => {\n  const account = await checkConnectedAndGetAddress();\n  const exchange = new web3.eth.Contract(ZX_ExchagneABI, ZeroX_Exchange);\n  await exchange.methods\n    .batchCancelOrders(orders)\n    .send({\n      from: account,\n    })\n    .on('transactionHash', (hash) => {\n      notify.hash(hash);\n    });\n};\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button, IdentityBadge, IconConnect, Box, IconPower, LinkBase,\n} from '@aragon/ui';\n\nimport { connect, disconnect } from '../../utils/web3';\nimport { checkAddressAndAddToStorage } from '../../utils/storage';\n\nfunction ConnectButton({ user, setUser }) {\n  const [isConnected, setIsConnected] = useState(false);\n\n  const connectWeb3 = async () => {\n    const address = await connect();\n    if (address === false) return;\n    setIsConnected(true);\n    setUser(address);\n    checkAddressAndAddToStorage(address);\n  };\n\n  const disconnectWeb3 = async () => {\n    await disconnect();\n    setIsConnected(false);\n    setUser('');\n  };\n\n  return isConnected ? (\n    <>\n      <div style={{ paddingTop: 5, paddingRight: 5 }}>\n        <LinkBase onClick={disconnectWeb3} size=\"small\">\n          {' '}\n          <IconPower />\n          {' '}\n        </LinkBase>\n      </div>\n      <Box padding={6}>\n        <IdentityBadge entity={user} />\n      </Box>\n\n    </>\n  ) : (\n    <Button icon={<IconConnect />} label=\"Connect\" onClick={connectWeb3} />\n  );\n}\n\nConnectButton.propTypes = {\n  user: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n};\n\nexport default ConnectButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Button, IconStarFilled, IconStar } from '@aragon/ui';\n\nfunction ChangeMode({ theme, updateTheme }) {\n  const handleChangeTheme = () => {\n    if (theme === 'light') updateTheme('dark');\n    else updateTheme('light');\n  };\n\n  return (\n    <Button\n      icon={theme === 'dark' ? <IconStar /> : <IconStarFilled />}\n      onClick={handleChangeTheme}\n      label=\"Theme\"\n    />\n  );\n}\n\nChangeMode.propTypes = {\n  theme: PropTypes.string.isRequired,\n  updateTheme: PropTypes.func.isRequired,\n};\n\nexport default ChangeMode;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\n\nimport {\n  Bar, BackButton, LinkBase,\n  Tag,\n} from '@aragon/ui';\nimport ConnectButton from './ConnectButton';\nimport ChangeModeButton from './SettingsButton';\n\nfunction NavBar({\n  theme, updateTheme, user, setUser,\n}) {\n  const history = useHistory();\n  const [isHome, updateIsHome] = useState(true);\n\n  useEffect(() => {\n    const home = history.location.pathname === '/';\n    updateIsHome(home);\n  }, [history.location.pathname]);\n  return (\n    <Bar\n      primary={\n        isHome ? (\n          <></>\n        ) : (\n          <>\n            <div style={{ height: '100%' }}>\n              <BackButton\n                onClick={() => {\n                  history.goBack();\n                }}\n              />\n            </div>\n            <LinkButton\n              title=\"Home\"\n              onClick={() => {\n                history.push('/');\n              }}\n              isSelected={history.location.pathname === '/'}\n            />\n            <LinkButton\n              title=\"My Vaults\"\n              onClick={() => {\n                history.push('/myvaults/');\n              }}\n              isSelected={history.location.pathname === '/myvaults/'}\n            />\n            <LinkButton\n              title=\"All Contracts\"\n              onClick={() => {\n                history.push('/options/');\n              }}\n              isSelected={history.location.pathname === '/options/'}\n            />\n            <LinkButton\n              title=\"Uniswap\"\n              onClick={() => {\n                history.push('/uniswap/');\n              }}\n              isSelected={history.location.pathname.includes('/uniswap/')}\n            />\n            <LinkButton\n              title=\"Trade\"\n              onClick={() => {\n                history.push('/trade/oeth-usdc');\n              }}\n              isSelected={history.location.pathname.includes('/trade/')}\n            />\n            <Tag> beta </Tag>\n          </>\n        )\n      }\n      secondary={(\n        <>\n          <ConnectButton user={user} setUser={setUser} />\n          <ChangeModeButton theme={theme} updateTheme={updateTheme} />\n        </>\n      )}\n    />\n  );\n}\n\n\nNavBar.propTypes = {\n  theme: PropTypes.string.isRequired,\n  updateTheme: PropTypes.func.isRequired,\n  user: PropTypes.string.isRequired,\n  setUser: PropTypes.func.isRequired,\n};\n\nfunction LinkButton({ title, onClick, isSelected = false }) {\n  return (\n    <div style={{ paddingLeft: 40 }}>\n      <LinkBase onClick={onClick}>\n        <div style={{ padding: '1%', opacity: isSelected ? 1 : 0.5, fontSize: 17 }}>{title}</div>\n      </LinkBase>\n    </div>\n  );\n}\n\nLinkButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n  isSelected: PropTypes.bool.isRequired,\n};\n\nexport default NavBar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Header, Box, LinkBase, Tag,\n} from '@aragon/ui';\n\nfunction HomePage() {\n  const history = useHistory();\n\n  return (\n    <>\n      <Header primary=\"Welcome to Opyn Monitor\" />\n      <div style={{ padding: 5, opacity: 0.5 }}> Tools for DeFi Risk Management. </div>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ width: '30%', marginRight: '3%' }}>\n          <MainButton\n            title=\"My Vaults\"\n            description=\"Manage collateral, Mint/Burn oTokens\"\n            iconUrl=\"https://opyn.co/static/media/1.68813886.svg\"\n            onClick={() => {\n              history.push('/myvaults');\n            }}\n          />\n        </div>\n\n        <div style={{ width: '30%' }}>\n          <MainButton\n            title=\"All Contracts\"\n            description=\" Monitor and liquidate vaults.\"\n            iconUrl=\"https://opyn.co/static/media/2.18d22be0.svg\"\n            onClick={() => {\n              history.push('/options/');\n            }}\n          />\n        </div>\n\n        <div style={{ width: '30%', marginLeft: '3%' }}>\n          <MainButton\n            title=\"Exchange\"\n            description=\"Buy, Sell or Provided Liquidity.\"\n            iconUrl=\"https://i.imgur.com/4eX8GlY.png\"\n            // iconUrl=\"https://opyn.co/static/media/3.4da8b24d.svg\"\n            onClick={() => {\n              history.push('/uniswap/');\n            }}\n          />\n        </div>\n\n      </div>\n      <div style={{ padding: '1%', display: 'flex', alignItems: 'center' }}>\n        <div style={{ width: '30%' }}>\n          <MainButton\n            title=\"Trade\"\n            tag=\"new\"\n            description=\"Trade ETH Options on 0x\"\n            iconUrl=\"https://cdn.worldvectorlogo.com/logos/0x-virtual-money-.svg\"\n            onClick={() => {\n              history.push('/trade/oeth-usdc');\n            }}\n          />\n        </div>\n      </div>\n\n    </>\n  );\n}\n\nfunction MainButton({\n  title, description, iconUrl, onClick, tag,\n}) {\n  return (\n    <LinkBase onClick={onClick} style={{ width: '100%' }}>\n      <Box>\n        <div style={{ padding: 10, fontSize: 18 }}>\n          {title}\n          {tag ? <Tag>{tag}</Tag> : <></>}\n        </div>\n        <img alt=\"icon\" style={{ padding: 10, height: 64 }} src={iconUrl} />\n        <div style={{ paddingTop: 5, opacity: 0.5 }}>\n          {' '}\n          {description}\n          {' '}\n        </div>\n\n      </Box>\n    </LinkBase>\n  );\n}\n\nMainButton.propTypes = {\n  title: PropTypes.string.isRequired,\n  tag: PropTypes.string,\n  description: PropTypes.string.isRequired,\n  iconUrl: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nMainButton.defaultProps = {\n  tag: '',\n};\n\nexport default HomePage;\n","export const USDC = {\n  addr: '0xA0b86991c6218b36c1d19D4a2e9Eb0cE3606eB48',\n  decimals: 6,\n  symbol: 'USDC',\n};\n\nexport const OPYN_ETH = {\n  addr: '0x0000000000000000000000000000000000000000',\n  decimals: 18,\n  symbol: 'ETH',\n};\n\nexport const cDAI = {\n  addr: '0x5d3a536E4D6DbD6114cc1Ead35777bAB948E3643',\n  decimals: 8,\n  symbol: 'cDai',\n};\n\nexport const cUSDC = {\n  addr: '0x39AA39c021dfbaE8faC545936693aC917d5E7563',\n  decimals: 8,\n  symbol: 'cUSDC',\n};\n\nexport const CurveFi = {\n  addr: '0xdF5e0e81Dff6FAF3A7e52BA697820c5e32D806A8',\n  decimals: 18,\n  symbol: 'yDAI+yUSDC+yUSDT+yTUSD',\n};\n\nexport const WETH = {\n  addr: '0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2',\n  decimals: 18,\n  symbol: 'WETH',\n};\n","/* eslint-disable import/prefer-default-export */\nimport * as tokens from '../tokens';\n\nexport const eth_calls = [\n  {\n    addr: '0xbcae1db14f1b366cd4611c75aab2031492b136e9',\n    title: 'ETH Call $250 05/29/20',\n\n    // constants in contract\n    symbol: 'oETH $250 Call',\n    name: 'Opyn ETH Call $250 05/29/20',\n    decimals: 6,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.OPYN_ETH,\n    underlying: tokens.USDC,\n    strike: tokens.OPYN_ETH,\n    strikePrice: 4e-9,\n    strikePriceInUSD: 250,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0xb1C9e4d652259467e4556BA627B00b284481744E', // wrong\n    expiry: 1590739200,\n  },\n];\n","/* eslint-disable import/prefer-default-export */\nimport * as tokens from '../tokens';\n\nexport const eth_puts = [\n  {\n    addr: '0x48ab8a7d3bf2eb942e153e4275ae1a8988238dc7',\n    title: 'ETH Put $100 04/03/20',\n\n    // constants in contract\n    symbol: 'oETH $100 Put',\n    name: 'Opyn ETH Put $100 04/03/20',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1e-6,\n    strikePriceInUSD: 100,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0x30651Fc7F912f5E40AB22F3D34C2159431Fb1c4F',\n    expiry: 1585958340,\n  },\n  {\n    addr: '0x6c79f10543c7886c6946b8a996f824e474bac8f2',\n    title: 'ETH Put $100 04/24/20',\n\n    // constants in contract\n    symbol: 'oETH $100 Put',\n    name: 'Opyn ETH Put $100 04/24/20',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1e-6,\n    strikePriceInUSD: 100,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0x5734a78b1985B47dF3fbf1736c278F57c2C30983',\n    expiry: 1587715200,\n  },\n  {\n    addr: '0xaefc7b368f7b536c9e5e3f342bf534931ce58584',\n    title: 'ETH Put $150 04/24/20',\n    // constants in contract\n    symbol: 'oETH $150 Put',\n    name: 'Opyn ETH Put $150 04/24/20',\n    decimals: 7,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1.5e-5,\n    strikePriceInUSD: 150,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0xD2840757B0DeF8fBC2A7DC990CEF75975C2d3F0e',\n    expiry: 1587715200,\n  },\n  {\n    addr: '0x461cd647add2159e85ad57141cb5371566fceed3',\n    title: 'ETH Put $160 05/01/20',\n\n    // constants in contract\n    symbol: 'oETH $160 Put',\n    name: 'Opyn ETH Put $160 05/01/20',\n    decimals: 7,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1.6e-5,\n    strikePriceInUSD: 160,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0xd03f7298aE74a8618711Ec43F45Ad2225F141aa4',\n    expiry: 1588320000,\n  },\n  {\n    addr: '0xc8f95e13eff0165e5e381ea1878c56d93562d7d7',\n    title: 'ETH Put $160 05/08/20',\n\n    // constants in contract\n    symbol: 'oETH $160 Put',\n    name: 'Opyn ETH Put $160 05/08/20',\n    decimals: 7,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1.6e-5,\n    strikePriceInUSD: 160,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0x572040e32c69b29a262392Ba7967B9f25724da39',\n    expiry: 1588924800,\n  },\n  {\n    addr: '0xecf6f2fd8d2a8e17397066348d449566d5407174',\n    title: 'ETH Put $150 05/29/20',\n\n    // constants in contract\n    symbol: 'oETH $150 Put',\n    name: 'Opyn ETH Put $150 05/29/20',\n    decimals: 7,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.USDC,\n    underlying: tokens.OPYN_ETH,\n    strike: tokens.USDC,\n    strikePrice: 1.5e-5,\n    strikePriceInUSD: 150,\n    minRatio: 1,\n    exchange: '0x39246c4f3f6592c974ebc44f80ba6dc69b817c71',\n    uniswapExchange: '0x75B865EA22a2b6633038E15647357268C7F9Ac54',\n    expiry: 1590739200,\n  },\n];\n","import * as tokens from '../tokens';\n\n/* eslint-disable import/prefer-default-export */\nexport const insurances = [\n  {\n    title: 'cDai Insurance',\n    addr: '0x98cc3bd6af1880fcfda17ac477b2f612980e5e33',\n    symbol: 'ocDai',\n    name: 'Opyn cDai Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.OPYN_ETH,\n    underlying: tokens.cDAI,\n    strike: tokens.USDC,\n    strikePrice: 1.859e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0xA6923533A6362008e9b536271C2Bdc0FF1467D3c',\n    expiry: 1612915200,\n  },\n  {\n    addr: '0x8ed9f862363ffdfd3a07546e618214b6d59f03d4',\n    title: 'cUSDC Insurance',\n\n    // constants in contract\n    symbol: 'ocUSDC',\n    name: 'Opyn cUSDC Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.OPYN_ETH,\n    underlying: tokens.cUSDC,\n    strike: tokens.USDC,\n    strikePrice: 2.08e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0xE3A0a2431a093fed99037987eD0A88550e5E79AA',\n    expiry: 1612915200,\n  },\n  {\n    addr: '0x4ba8c6ce0e855c051e65dfc37883360efaf7c82b',\n    title: 'y.curve.fi Insurance',\n    // constants in contract\n    symbol: 'oCRV',\n    name: 'Opyn y.curve.fi Insurance',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.OPYN_ETH,\n    underlying: tokens.CurveFi,\n    strike: tokens.USDC,\n    strikePrice: 9.2e-16,\n    minRatio: 1.6,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0x21f5E9D4Ec20571402A5396084B1634314A68c97',\n    expiry: 1585440000,\n  },\n  {\n    addr: '0xddac4aed7c8f73032b388efe2c778fc194bc81ed',\n    title: 'cDai Insurance (Old)',\n    // constants in contract\n    symbol: 'ocDai',\n    name: 'Opyn cDai Insurance ',\n    decimals: 8,\n    oracle: '0x7054e08461e3eCb7718B63540adDB3c3A1746415',\n    collateral: tokens.OPYN_ETH,\n    underlying: tokens.cDAI,\n    strike: tokens.USDC,\n    strikePrice: 2e-10,\n    minRatio: 1.4,\n    exchange: '0x5778f2824a114f6115dc74d432685d3336216017',\n    uniswapExchange: '0x8a0976500EED661202810bAB030a057DF15c4CC9',\n    expiry: 1612915200,\n  },\n];\n","import { eth_calls } from './calls';\nimport { eth_puts } from './puts';\nimport { insurances } from './insurances';\n\n\nexport const eth_options = eth_puts.concat(eth_calls);\nexport const allOptions = insurances.concat(eth_options);\nexport {\n  eth_calls, eth_puts, insurances,\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { IdentityBadge } from '@aragon/ui';\n\nfunction AddressBlock({ label, address }) {\n  return (\n    <>\n      <div style={{ fontSize: 16, padding: 3 }}>{label}</div>\n      <div style={{ padding: 5 }}>\n        <IdentityBadge entity={address} shorten />\n      </div>\n    </>\n  );\n}\n\nAddressBlock.propTypes = {\n  label: PropTypes.string.isRequired,\n  address: PropTypes.string.isRequired,\n};\n\nexport default AddressBlock;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport BigNumber from 'bignumber.js';\n\nfunction BalanceBlock({ asset, balance }) {\n  let integer = '0';\n  let digits = '0';\n  if (new BigNumber(balance).gt(new BigNumber(0))) {\n    const str = new BigNumber(balance).toString();\n    const split = str.split('.');\n    integer = split[0];\n    digits = split.length > 1 ? str.split('.')[1] : '0';\n  }\n\n  return (\n    <>\n      <div style={{ fontSize: 14, padding: 3 }}>{asset}</div>\n      <div style={{ padding: 3 }}>\n        <span style={{ fontSize: 24 }}>{integer}</span>\n        .\n        <span style={{ fontSize: 18 }}>\n          {' '}\n          {digits}\n          {' '}\n        </span>\n      </div>\n    </>\n  );\n}\n\nBalanceBlock.propTypes = {\n  asset: PropTypes.string.isRequired,\n  balance: PropTypes.oneOfType([\n    PropTypes.instanceOf(BigNumber),\n    PropTypes.string,\n    PropTypes.number,\n  ]).isRequired,\n};\n\nexport default BalanceBlock;\n","import React from 'react';\nimport { Tag } from '@aragon/ui';\nimport Proptypes from 'prop-types';\n\nfunction RatioTag({ isSafe, ratio, useCollateral = true }) {\n  return !useCollateral ? (\n    <Tag color=\"#78827a\" background=\"#c0c2c0\">\n      Cool\n    </Tag>\n  ) : isSafe ? (\n    ratio < 1.6 ? (\n      <Tag background=\"#FFEBAD\" color=\"#FEC100\">\n        {' '}\n        Danger\n        {' '}\n      </Tag>\n    ) : (\n      <Tag mode=\"new\"> safe </Tag>\n    )\n  ) : (\n    <Tag color=\"#E34343\" background=\"#FFC6C6\">\n      Unsafe!\n    </Tag>\n  );\n}\n\nRatioTag.propTypes = {\n  isSafe: Proptypes.bool.isRequired,\n  ratio: Proptypes.number.isRequired,\n  useCollateral: Proptypes.bool,\n};\n\nRatioTag.defaultProps = {\n  useCollateral: true,\n};\n\nexport default RatioTag;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction SectionTitle({ title }) {\n  return <div style={{ padding: 10, fontSize: 20 }}>{title}</div>;\n}\n\nSectionTitle.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n\nexport default SectionTitle;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  ButtonBase,\n} from '@aragon/ui';\n\nfunction MaxButton({ onClick }) {\n  return (\n    <div style={{ padding: 3 }}>\n      <ButtonBase onClick={onClick}>\n        <span style={{ opacity: 0.5 }}> Max </span>\n      </ButtonBase>\n    </div>\n  );\n}\n\nMaxButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default MaxButton;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction HelperText({ label, amt }) {\n  if (parseFloat(amt) > 0) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>\n          {label}\n        </span>\n        <span style={{ fontSize: 13 }}>\n          {parseFloat(amt).toFixed(5)}\n        </span>\n      </div>\n    );\n  } return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\nHelperText.propTypes = {\n  label: PropTypes.string.isRequired,\n  amt: PropTypes.string.isRequired,\n};\n\nexport default HelperText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\n\nfunction PriceSection({\n  label, amt, symbol = '', forceDisplay = false,\n}) {\n  const amtBN = new BigNumber(amt);\n  if (amtBN.gt(new BigNumber(0)) || forceDisplay) {\n    return (\n      <div style={{ padding: 3, opacity: 0.5 }}>\n        <span style={{ fontSize: 13 }}>{label}</span>\n        <span style={{ fontSize: 13 }}>{amtBN.toNumber().toFixed(5)}</span>\n        <span style={{ fontSize: 13 }}>{symbol}</span>\n      </div>\n    );\n  }\n  return <div style={{ padding: 3, opacity: 0.5 }} />;\n}\n\nPriceSection.propTypes = {\n  label: PropTypes.string.isRequired,\n  symbol: PropTypes.string,\n  amt: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.number,\n    PropTypes.instanceOf(BigNumber),\n  ]).isRequired,\n  forceDisplay: PropTypes.bool,\n};\n\nPriceSection.defaultProps = {\n  symbol: '',\n  forceDisplay: false,\n};\n\nexport default PriceSection;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useTheme } from '@aragon/ui';\n\nfunction WarningText({ text }) {\n  const theme = useTheme();\n  return (\n    <div style={{ color: theme.warning, fontSize: 12, padding: '3px' }}>\n      {text}\n    </div>\n  );\n}\n\nWarningText.propTypes = {\n  text: PropTypes.string.isRequired,\n};\n\nexport default WarningText;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nfunction Comment({ text }) {\n  return (\n    <div style={{ padding: 5, opacity: 0.5 }}>\n      {text}\n    </div>\n  );\n}\n\nComment.propTypes = {\n  text: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.object,\n  ]).isRequired,\n};\n\nexport default Comment;\n","import React from 'react';\nimport { Button } from '@aragon/ui';\nimport { useHistory } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport { openVault } from '../../utils/web3';\n\n\nfunction ManageVaultButton({ oToken, owner }) {\n  const history = useHistory();\n\n  const goToManagePage = () => {\n    history.push(`/manage/${oToken}/${owner}`);\n  };\n\n  return <Button onClick={() => goToManagePage(oToken, owner)} label=\"Manage\" />;\n}\n\nManageVaultButton.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  owner: PropTypes.string.isRequired,\n};\n\n\nfunction OpenVaultButton({ oToken, user, goToMangePage = true }) {\n  const history = useHistory();\n\n  const openAndGoToVault = async () => {\n    await openVault(oToken);\n    if (goToMangePage) history.push(`/manage/${oToken}/${user}`);\n  };\n\n  return (\n    <Button\n      onClick={() => openAndGoToVault(oToken)}\n      label=\"Open\"\n    />\n  );\n}\n\nOpenVaultButton.propTypes = {\n  oToken: PropTypes.string.isRequired,\n  user: PropTypes.string.isRequired,\n  goToMangePage: PropTypes.bool,\n};\n\nOpenVaultButton.defaultProps = {\n  goToMangePage: true,\n};\n\nexport { ManageVaultButton, OpenVaultButton };\n","import styled from 'styled-components';\n\nconst FlexWrapper = styled.div`\n  // display: flex;\n  padding-left: 20%;\n  padding-right: 20%;\n`;\n\nexport default FlexWrapper;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Checkbox, useTheme } from '@aragon/ui';\nimport styled from 'styled-components';\n\nfunction MyCheckBox({ text, checked, onCheck }) {\n  const theme = useTheme();\n  return (\n    <CheckBoxWrapper theme={theme}>\n      <Checkbox\n        checked={checked}\n        onChange={onCheck}\n      />\n      <span style={{ paddingBottom: '5px' }}>\n        {text}\n      </span>\n      <br />\n    </CheckBoxWrapper>\n  );\n}\n\nMyCheckBox.propTypes = {\n  text: PropTypes.string.isRequired,\n  checked: PropTypes.bool.isRequired,\n  onCheck: PropTypes.func.isRequired,\n};\n\nexport default MyCheckBox;\n\nconst CheckBoxWrapper = styled.div`{\n  padding: 5px;\n  font-size: 14px;\n  color: ${(props) => props.theme.surfaceContentSecondary}\n}`;\n","import ReactGA from 'react-ga';\n\nReactGA.initialize(process.env.REACT_APP_GA_PROJECT_ID);\n\nexport default ReactGA;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Header, DataView, IdentityBadge, Button, Tabs,\n} from '@aragon/ui';\n\nimport { insurances, eth_options } from '../../constants/options';\nimport { Comment, CheckBox } from '../common';\nimport { getPreference, storePreference } from '../../utils/storage';\n\nimport tracker from '../../utils/tracker';\n\nfunction AllContracts() {\n  useEffect(() => {\n    tracker.pageview('/options/');\n  }, []);\n\n  const storedOptionTab = getPreference('optionTab', '0');\n  const storedShowExpired = getPreference('showExpired', '0');\n\n  const [tabSelected, setTabSelected] = useState(parseInt(storedOptionTab, 10));\n  const [showExpired, setShowExpired] = useState(storedShowExpired === '1'); // whether to show expired options\n\n  const history = useHistory();\n  const goToToken = (addr) => {\n    history.push(`/option/${addr}`);\n  };\n  return (\n    <>\n      <Header primary=\"All Contracts\" />\n      <div style={{ display: 'flex' }}>\n        <Comment text=\"Choose an option contract to proceed.\" />\n        <div style={{ marginLeft: 'auto' }}>\n          <CheckBox\n            text=\"Expired\"\n            onCheck={(checked) => {\n              storePreference('showExpired', checked ? '1' : '0');\n              setShowExpired(checked);\n            }}\n            checked={showExpired}\n          />\n        </div>\n      </div>\n      <Tabs\n        items={['DeFi Insurance', 'ETH Options']}\n        selected={tabSelected}\n        onChange={(choice) => {\n          setTabSelected(choice);\n          storePreference('optionTab', choice.toString());\n        }}\n      />\n\n      {tabSelected === 0 ? (\n        <DataView\n          fields={['Name', 'Contract', '']}\n          entries={insurances.filter((option) => showExpired || option.expiry * 1000 > Date.now())}\n          entriesPerPage={6}\n          renderEntry={({ addr, title }) => [\n            <>{title}</>,\n            <IdentityBadge entity={addr} shorten={false} />,\n            <Button onClick={() => goToToken(addr)}> View Vaults </Button>,\n          ]}\n        />\n      ) : (\n        <DataView\n          header=\"Options\"\n          fields={['Name', 'Contract', 'Expiry', '']}\n          entries={eth_options.filter((option) => showExpired || option.expiry * 1000 > Date.now())}\n          entriesPerPage={6}\n          renderEntry={({ addr, title, expiry }) => [\n            <>{title}</>,\n            <IdentityBadge entity={addr} shorten={false} />,\n            new Date(parseInt(expiry * 1000, 10)).toDateString(),\n            <Button onClick={() => goToToken(addr)}> View Vaults </Button>,\n          ]}\n        />\n      )}\n    </>\n  );\n}\n\nexport default AllContracts;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\nimport {\n  Header, DataView, IdentityBadge, Button,\n} from '@aragon/ui';\nimport { insurances, eth_options } from '../../constants/options';\n\nimport { Comment, CheckBox } from '../common';\nimport { storePreference, getPreference } from '../../utils/storage';\nimport tracker from '../../utils/tracker';\n\nfunction TradeLanding() {\n  const history = useHistory();\n\n  useEffect(() => {\n    tracker.pageview('/uniswap/');\n  }, []);\n\n  const goToTrade = (addr) => {\n    history.push(`/uniswap/${addr}`);\n  };\n\n  const [showExpired, setShowExpired] = useState(getPreference('showExpired', '0') === '1');\n\n  return (\n    <>\n      <Header primary=\"Trade on Uniswap\" />\n      <div style={{ display: 'flex' }}>\n        <Comment text=\"Buy or Sell DeFi Insurance\" />\n        <div style={{ marginLeft: 'auto' }}>\n          <CheckBox\n            text=\"Expired\"\n            checked={showExpired}\n            onCheck={(checked) => {\n              storePreference('showExpired', checked ? '1' : '0');\n              setShowExpired(checked);\n            }}\n          />\n        </div>\n      </div>\n      <DataView\n        fields={['Name', 'Contract', '']}\n        entries={insurances.filter((option) => showExpired || option.expiry * 1000 > Date.now())}\n        entriesPerPage={6}\n        renderEntry={({ addr, title }) => [\n          <>{title}</>,\n          <IdentityBadge entity={addr} shorten={false} />,\n          <div style={{ display: 'flex' }}>\n            <Button onClick={() => goToTrade(addr)}> Start Trading </Button>\n            <GoToUniswapFunction token={addr} />\n          </div>,\n        ]}\n      />\n      <br />\n      <Comment text=\"Trade Options\" />\n      <DataView\n        fields={['Name', 'Contract', '']}\n        entries={eth_options.filter((option) => showExpired || option.expiry * 1000 > Date.now())}\n        entriesPerPage={6}\n        renderEntry={({ addr, title }) => [\n          <>{title}</>,\n          <IdentityBadge entity={addr} shorten={false} />,\n          <div style={{ display: 'flex' }}>\n            <Button onClick={() => goToTrade(addr)}> Start Trading </Button>\n            <GoToUniswapFunction token={addr} />\n          </div>,\n\n        ]}\n      />\n    </>\n  );\n}\n\nfunction GoToUniswapFunction({ token }) {\n  return (\n    <Button onClick={() => window.open(\n      tracker.event({\n        category: 'link',\n        action: 'uniswap',\n      })`https://uniswap.exchange/swap?inputCurrency=${token}`,\n      '_blank',\n    )}\n    >\n      <img alt=\"uniswap\" src=\"https://i.imgur.com/4eX8GlY.png\" style={{ padding: 2, height: 25, width: 23 }} />\n    </Button>\n  );\n}\n\nGoToUniswapFunction.propTypes = {\n  token: PropTypes.string.isRequired,\n};\n\nexport default TradeLanding;\n","import styled from 'styled-components';\n\nexport const BidText = styled.div`{\n  color: #7aae1a;\n  font-size: 17px;\n}`;\n\nexport const AskText = styled.div`{\n  color: #da5750;\n  font-size: 17px;\n}`;\n","import Web3 from 'web3';\nimport BigNumber from 'bignumber.js';\n\nconst web3 = new Web3();\n\n/**\n * Convert 10.999 to 10999000\n * @param {number|string|BigNumber} rawAmt\n * @param {number} decimals\n * @returns {BigNumber}\n */\nexport function toBaseUnitBN(rawAmt, decimals) {\n  const raw = new BigNumber(rawAmt);\n  const base = new BigNumber(10);\n  const decimalsBN = new BigNumber(decimals);\n  return raw.times(base.pow(decimalsBN)).integerValue();\n}\n\n/**\n * Convert 10999000 to 10.999\n * @param {string | number | BigNumber} tokenAmount in base unit\n * @param {number} tokenDecimals\n * @return {BigNumber}\n */\nexport const toTokenUnitsBN = (tokenAmount, tokenDecimals) => {\n  const amt = new BigNumber(tokenAmount);\n  const digits = new BigNumber(10).pow(new BigNumber(tokenDecimals));\n  return amt.div(digits);\n};\n\nexport function formatDigits(num, percision) {\n  return parseFloat(num).toFixed(percision);\n}\n\nexport const fromWei = web3.utils.fromWei;\nexport const toWei = web3.utils.toWei;\n\nexport function timeSince(timeStamp) {\n  const now = new Date();\n  const secondsPast = (now.getTime() - timeStamp) / 1000;\n  if (secondsPast < 60) {\n    return `${parseInt(secondsPast, 10)}s ago`;\n  }\n  if (secondsPast < 3600) {\n    return `${parseInt(secondsPast / 60, 10)}m ago`;\n  }\n  if (secondsPast <= 86400) {\n    return `${parseInt(secondsPast / 3600, 10)}h ago`;\n  }\n  if (secondsPast > 86400) {\n    const ts = new Date(timeStamp);\n    const day = ts.getDate();\n    const month = ts\n      .toDateString()\n      .match(/ [a-zA-Z]*/)[0]\n      .replace(' ', '');\n    const year = ts.getFullYear() === now.getFullYear() ? '' : ` ${ts.getFullYear()}`;\n    return `${day} ${month}${year}`;\n  }\n\n  return timeStamp;\n}\n\nexport function compareVaultRatio(vaultA, vaultB) {\n  const rateA = vaultA.ratio;\n  const rateB = vaultB.ratio;\n\n  let comparison = 0;\n  if (parseFloat(rateA) > parseFloat(rateB)) {\n    comparison = 1;\n  } else if (parseFloat(rateA) < parseFloat(rateB)) {\n    comparison = -1;\n  }\n  return comparison;\n}\n\nexport function compareVaultIssued(vaultA, vaultB) {\n  const amountA = vaultA.oTokensIssued;\n  const amountB = vaultB.oTokensIssued;\n\n  let comparison = 0;\n  if (parseInt(amountA, 10) > parseInt(amountB, 10)) {\n    comparison = -1;\n  } else if (parseInt(amountA, 10) < parseInt(amountB, 10)) {\n    comparison = 1;\n  }\n  return comparison;\n}\n\nexport const isAddress = web3.utils.isAddress;\n","/* eslint-disable no-restricted-syntax */\nimport { assetDataUtils } from '@0x/order-utils';\nimport BigNumber from 'bignumber.js';\nimport { USDC } from '../constants/tokens';\n\nimport { toTokenUnitsBN } from './number';\n\nconst Promise = require('bluebird');\n\nconst endpoint = 'https://api.0x.org/';\n\n/**\n * get orderbook: BASE:QUOTE\n * @param {string} base\n * @param {string} quote\n * @return {Promise<{\n  bids: {total: number, page: number, perPage: number, records: {\n    order: {\n      signature: string,\n      senderAddress: string,\n      makerAddress: string,\n      takerAddress: string,\n      makerFee: string,\n      takerFee: string,\n      makerAssetAmount: string,\n      takerAssetAmount: string,\n      makerAssetData: string,\n      takerAssetData: string,\n      salt: string,\n      exchangeAddress: string,\n      feeRecipientAddress: string,\n      expirationTimeSeconds: string,\n      makerFeeAssetData: string,\n      chainId: number,\n      takerFeeAssetData: string\n    },\n    metaData: {\n      orderHash: string,\n      remainingFillableTakerAssetAmount: string\n    }\n  }[]},\n  asks: {total: number, page: number, perPage: number, records: {\n    order: {\n      signature: string,\n      senderAddress: string,\n      makerAddress: string,\n      takerAddress: string,\n      makerFee: string,\n      takerFee: string,\n      makerAssetAmount: string,\n      takerAssetAmount: string,\n      makerAssetData: string,\n      takerAssetData: string,\n      salt: string,\n      exchangeAddress: string,\n      feeRecipientAddress: string,\n      expirationTimeSeconds: string,\n      makerFeeAssetData: string,\n      chainId: number,\n      takerFeeAssetData: string\n    },\n    metaData: {\n      orderHash: string,\n      remainingFillableTakerAssetAmount: string\n    }\n  }[]}\n}>}\n */\nexport async function getOrderBook(base, quote) {\n  const baseAsset = assetDataUtils.encodeERC20AssetData(base);\n  const quoteAsset = assetDataUtils.encodeERC20AssetData(quote);\n  return request(`sra/v3/orderbook?baseAssetData=${baseAsset}&quoteAssetData=${quoteAsset}&perPage=${100}`);\n}\n\n/**\n * get oToken:WETH stats (v1) for all options\n * @param {Array<{addr:string, decimals:number}>} options\n * @param {{addr:string, decimals:number}} quoteAsset\n * @return {Promise<Array<\n * {option: string, bestAskPrice: BigNumber, bestAskPrice:BigNumber,\n * totalBidAmt:BigNumber, totalAskAmt:BigNumber,\n * bestAsk:{}, bestBid:{}\n * }>>}\n */\nexport async function getBasePairAskAndBids(options, quoteAsset) {\n  const bestAskAndBids = await Promise.map(options, async ({ addr: option, decimals }) => {\n    const { asks, bids } = await getOrderBook(option, USDC.addr);\n    let totalBidAmt = new BigNumber(0);\n    let totalAskAmt = new BigNumber(0);\n    let bestAskPrice = 0;\n    let bestBidPrice = 0;\n    let bestAsk; let bestBid;\n    const validAsks = asks.records.filter((record) => isValid(record, decimals));\n    if (validAsks.length > 0) {\n      totalAskAmt = validAsks\n        .reduce((prev, cur) => prev.plus(toTokenUnitsBN(\n          getRemainingMakerAndTakerAmount(cur).remainingMakerAssetAmount, decimals,\n        )), new BigNumber(0));\n\n      const { makerAssetAmount: askTokenAmt, takerAssetAmount: askQuoteAmt } = validAsks[0].order;\n      bestAskPrice = toTokenUnitsBN(askQuoteAmt, quoteAsset.decimals).div(toTokenUnitsBN(askTokenAmt, decimals));\n      bestAsk = validAsks[0];\n    }\n\n    const validBids = bids.records.filter((record) => isValid(record, decimals));\n    if (validBids.length > 0) {\n      totalBidAmt = validBids\n        .reduce((prev, cur) => prev.plus(toTokenUnitsBN(\n          cur.metaData.remainingFillableTakerAssetAmount, decimals,\n        )), new BigNumber(0));\n\n      const { makerAssetAmount: bidQuoteAmt, takerAssetAmount: bidTokenAmt } = validBids[0].order;\n      bestBidPrice = toTokenUnitsBN(bidQuoteAmt, quoteAsset.decimals).div(toTokenUnitsBN(bidTokenAmt, decimals));\n      bestBid = validBids[0];\n    }\n\n    return {\n      option, bestAskPrice, bestBidPrice, bestAsk, bestBid, totalBidAmt, totalAskAmt,\n    };\n  });\n  return bestAskAndBids;\n}\n\n/**\n *\n * @param {string} path\n */\nasync function request(path) {\n  const res = await fetch(`${endpoint}${path}`);\n  return res.json();\n}\n\n/**\n *\n * @param {*} entry\n * @param {*} decimals\n */\nexport const isValid = (entry) => {\n  const notExpired = parseInt(entry.order.expirationTimeSeconds, 10) > Date.now() / 1000;\n  // notDust: not very good\n  const notDust = getOrderFillRatio(entry) < 100;\n  //   .gt(new BigNumber(0.0001).times(new BigNumber(10).pow(takerAssetDecimals)));\n  return notExpired && notDust;\n};\n\n/**\n * Create Order Object\n * @param {string} maker\n * @param {string} makerAsset Bid: quoteAsset, Ask: baseAsset\n * @param {string} takerAsset Bid: baseAsset, Ask: quoteAsset\n * @param {BigNumber} makerAssetAmount\n * @param {BigNumber} takerAssetAmount\n * @param {number} expiry\n */\nexport const createOrder = (maker, makerAsset, takerAsset, makerAssetAmount, takerAssetAmount, expiry) => {\n  const salt = BigNumber.random(20).times(new BigNumber(10).pow(new BigNumber(20))).integerValue().toString(10);\n  const order = {\n    senderAddress: '0x0000000000000000000000000000000000000000',\n    makerAddress: maker,\n    takerAddress: '0x0000000000000000000000000000000000000000',\n    makerFee: '0',\n    takerFee: '0',\n    makerAssetAmount: makerAssetAmount.toString(),\n    takerAssetAmount: takerAssetAmount.toString(),\n    makerAssetData: assetDataUtils.encodeERC20AssetData(makerAsset),\n    takerAssetData: assetDataUtils.encodeERC20AssetData(takerAsset),\n    salt,\n    exchangeAddress: '0x61935cbdd02287b511119ddb11aeb42f1593b7ef',\n    feeRecipientAddress: '0x1000000000000000000000000000000000000011',\n    expirationTimeSeconds: expiry.toString(),\n    makerFeeAssetData: '0x',\n    chainId: 1,\n    takerFeeAssetData: '0x',\n  };\n  return order;\n};\n\n/**\n * Send orders to the mesh node\n * @param {*} orders\n */\nexport const broadcastOrders = async (orders) => {\n  const url = `${endpoint}sra/v3/orders`;\n  const res = await fetch(url, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(orders),\n  });\n  if (res.status === 200) return;\n  const jsonRes = await res.json();\n  throw jsonRes.validationErrors[0].reason;\n};\n\n/**\n *\n * @param {{}} bid\n * @param {number} makerAssetDecimals WETH decimals\n * @param {number} takerAssetDecimals oTokenDecimals\n */\nexport const getBidPrice = (bid, makerAssetDecimals, takerAssetDecimals) => {\n  const makerAssetAmount = toTokenUnitsBN(bid.order.makerAssetAmount, makerAssetDecimals);\n  const takerAssetAmount = toTokenUnitsBN(bid.order.takerAssetAmount, takerAssetDecimals);\n  return makerAssetAmount.div(takerAssetAmount);\n};\n\n/**\n * Calculate price of an ask order\n * @param {{}} ask\n * @param {number} makerAssetDecimals oToken Decimal\n * @param {number} takerAssetDecimals WETH decimals\n * @description maker want to sell oToken\n * takerAssetAmount 100 weth\n * makerAssetAmount 1 oToken\n */\nexport const getAskPrice = (ask, makerAssetDecimals, takerAssetDecimals) => {\n  const makerAssetAmount = toTokenUnitsBN(ask.order.makerAssetAmount, makerAssetDecimals);\n  const takerAssetAmount = toTokenUnitsBN(ask.order.takerAssetAmount, takerAssetDecimals);\n  return takerAssetAmount.div(makerAssetAmount);\n};\nnew BigNumber()\n  .div(new BigNumber());\n\nexport const getOrderFillRatio = (order) => new BigNumber(100)\n  .minus(new BigNumber(order.metaData.remainingFillableTakerAssetAmount)\n    .div(new BigNumber(order.order.takerAssetAmount))\n    .times(100)).toFixed(2);\n\n/**\n *\n * @param {*} order\n * @return { {remainingTakerAssetAmount: BigNumber, remainingMakerAssetAmount: BigNumber} }\n */\nexport const getRemainingMakerAndTakerAmount = (order) => {\n  const remainingTakerAssetAmount = new BigNumber(order.metaData.remainingFillableTakerAssetAmount);\n  const makerAssetAmountBN = new BigNumber(order.order.makerAssetAmount);\n  const takerAssetAmountBN = new BigNumber(order.order.takerAssetAmount);\n  const remainingMakerAssetAmount = remainingTakerAssetAmount.multipliedBy(makerAssetAmountBN).div(takerAssetAmountBN);\n  return { remainingTakerAssetAmount, remainingMakerAssetAmount };\n};\n\n/**\n *\n * @param {{}[]} orders\n * @return {{totalFillableTakerAmount: BigNumber,totalFillableMakerAmount:BigNumber, fillableTakerAmounts: string[]}}\n */\nexport const getOrdersTotalFillables = (orders) => {\n  const totalFillableTakerAmount = orders\n    .map((order) => new BigNumber(order.metaData.remainingFillableTakerAssetAmount))\n    .reduce((prev, next) => prev.plus(new BigNumber(next)), new BigNumber(0));\n\n  const totalFillableMakerAmount = orders\n    .map((order) => getRemainingMakerAndTakerAmount(order).remainingMakerAssetAmount)\n    .reduce((prev, next) => prev.plus(new BigNumber(next)), new BigNumber(0));\n\n  const fillableTakerAmounts = orders.map((o) => o.metaData.remainingFillableTakerAssetAmount);\n\n  return { totalFillableTakerAmount, totalFillableMakerAmount, fillableTakerAmounts };\n};\n\n/**\n * @return {Promise<{\n * fast:number, fastest:number, safeLow:number, average:number,\n * block_time:number, blockNum:number speed:number,\n * safeLowWait:number, avgWait:number, fastWait:number, fastestWait:number}>}\n */\nexport const getGasPrice = async () => {\n  const url = 'https://ethgasstation.info/json/ethgasAPI.json';\n  const res = await fetch(url);\n  return res.json();\n};\n\n\n/**\n * Return Minimal orders needed for target amount\n * @param {{order: {\n      makerAssetAmount: string,\n      takerAssetAmount: string,\n    }}[]} selectedOrders\n * @param {BigNumber} targetAmount\n * @param {string} targetAsset maker or taker\n */\nexport const findMinOrdersForAmount = (selectedOrders, targetAmount, targetAsset) => {\n  let sum = new BigNumber(0);\n  const requiredOrders = [];\n  // eslint-disable-next-line no-restricted-syntax\n  for (const order of selectedOrders) {\n    const amount = targetAsset === 'maker'\n      ? new BigNumber(order.order.makerAssetAmount)\n      : new BigNumber(order.order.takerAssetAmount);\n    sum = sum.plus(amount);\n    requiredOrders.push(order);\n\n    if (sum.gt(targetAmount)) {\n      break;\n    }\n  }\n  return requiredOrders;\n};\n\n/**\n * @description Loop through selected orders and see what's the exact taker amount\n * and maker amount fulfilling the requirement\n * @param {Array} selectedOrders\n * @param {BigNumber | undefined} targetTakerAstAmount\n * @param {BigNumber | undefined} targetMakerAstAmount\n * @return {{\n *  sumTakerAmount: BigNumber,\n *  sumMakerAmount:BigNumber\n *  takerAmountArray: string[]}}\n */\nexport const getFillAmountsOfOrders = (selectedOrders, targetTakerAstAmount, targetMakerAstAmount) => {\n  // const fillables = getRemainingMakerAndTakerAmount(selectedOrders);\n  let sumTakerAmount = new BigNumber(0);\n  let sumMakerAmount = new BigNumber(0);\n  const takerAmountArray = [];\n  for (const order of selectedOrders) {\n    const {\n      remainingMakerAssetAmount: makerAmount,\n      remainingTakerAssetAmount: takerAmount,\n    } = getRemainingMakerAndTakerAmount(order);\n    if (targetTakerAstAmount !== undefined) {\n      if (sumTakerAmount.plus(takerAmount).lte(targetTakerAstAmount)) {\n        sumTakerAmount = sumTakerAmount.plus(takerAmount);\n        sumMakerAmount = sumMakerAmount.plus(makerAmount);\n        takerAmountArray.push(takerAmount.toString());\n      } else {\n        const takerAmountNeeded = targetTakerAstAmount.minus(sumTakerAmount);\n        const makerAmountNeeded = takerAmountNeeded.div(takerAmount).times(makerAmount);\n        sumTakerAmount = sumTakerAmount.plus(takerAmountNeeded);\n        sumMakerAmount = sumMakerAmount.plus(makerAmountNeeded);\n        takerAmountArray.push(takerAmountNeeded.toString());\n        break;\n      }\n    } else if (targetMakerAstAmount !== undefined) {\n      // user enter mekr ast amount\n      if (sumMakerAmount.plus(makerAmount).lte(targetMakerAstAmount)) {\n        sumTakerAmount = sumTakerAmount.plus(takerAmount);\n        sumMakerAmount = sumMakerAmount.plus(makerAmount);\n        takerAmountArray.push(takerAmount.toString());\n      } else {\n        const makerAmountNeeded = targetMakerAstAmount.minus(sumMakerAmount);\n        const takerAmountNeeded = makerAmountNeeded.div(makerAmount).multipliedBy(takerAmount);\n        sumTakerAmount = sumTakerAmount.plus(takerAmountNeeded);\n        sumMakerAmount = sumMakerAmount.plus(makerAmountNeeded);\n        takerAmountArray.push(takerAmountNeeded.toString());\n        break;\n      }\n    } else {\n      throw new Error('wrong input to CalculateMixRate');\n    }\n  }\n  return { sumTakerAmount, sumMakerAmount, takerAmountArray };\n};\n","import PropTypes from 'prop-types';\n\nexport const vault = PropTypes.shape({\n  owner: PropTypes.string,\n  oTokensIssued: PropTypes.string,\n  collateral: PropTypes.string,\n  underlying: PropTypes.string,\n});\n\n// export const detailVault = PropTypes.shape({\n//   oTokensIssued: PropTypes.string,\n//   collateral: PropTypes.string,\n// });\n\nexport const token = PropTypes.shape({\n  addr: PropTypes.string.isRequired,\n  decimals: PropTypes.number.isRequired,\n  symbol: PropTypes.string.isRequired,\n});\n\nexport const option = PropTypes.shape({\n  addr: PropTypes.string.isRequired,\n  title: PropTypes.string.isRequired,\n  symbol: PropTypes.string.isRequired,\n  name: PropTypes.string.isRequired,\n  decimals: PropTypes.number.isRequired,\n  oracle: PropTypes.string.isRequired,\n  collateral: token.isRequired,\n  underlying: token.isRequired,\n  strike: token.isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  exchange: PropTypes.string.isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  expiry: PropTypes.number.isRequired,\n});\n\nexport const order = PropTypes.shape({\n  order: PropTypes.shape({\n    signature: PropTypes.string.isRequired,\n    senderAddress: PropTypes.string.isRequired,\n    makerAddress: PropTypes.string.isRequired,\n    takerAddress: PropTypes.string.isRequired,\n    makerFee: PropTypes.string.isRequired,\n    takerFee: PropTypes.string.isRequired,\n    makerAssetAmount: PropTypes.string.isRequired,\n    takerAssetAmount: PropTypes.string.isRequired,\n    makerAssetData: PropTypes.string.isRequired,\n    takerAssetData: PropTypes.string.isRequired,\n    salt: PropTypes.string.isRequired,\n    exchangeAddress: PropTypes.string.isRequired,\n    feeRecipientAddress: PropTypes.string.isRequired,\n    expirationTimeSeconds: PropTypes.string.isRequired,\n    makerFeeAssetData: PropTypes.string.isRequired,\n    chainId: PropTypes.number.isRequired,\n    takerFeeAssetData: PropTypes.string.isRequired,\n  }),\n  metaData: PropTypes.shape({\n    orderHash: PropTypes.string.isRequired,\n    remainingFillableTakerAssetAmount: PropTypes.string.isRequired,\n  }),\n});\n","/* eslint-disable no-restricted-syntax */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  DataView, DropDown, LinkBase, Radio, Header, Tag,\n} from '@aragon/ui';\nimport { AskText, BidText } from './styled';\n\nimport { SectionTitle } from '../common';\n\nimport { getBasePairAskAndBids } from '../../utils/0x';\nimport { token as TokenType } from '../types';\n\nimport { eth_puts, eth_calls } from '../../constants/options';\n\nconst optionsByDate = groupByDate(eth_puts, eth_calls);\n\nfunction OptionBoard({\n  baseAsset, quoteAsset, setBaseAsset, setTradeType, setSelectedOrders,\n}) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [selectedExpiryIdx, setExpiryIdx] = useState(0);\n  const [entriesToDisplay, setEntriesToDisplay] = useState([]);\n\n  // on expiry change: start the call and put update function on the options of that day\n  useEffect(() => {\n    setIsLoading(true);\n    let isCancelled = false;\n\n    const updateBoardStats = async () => {\n      const callsOfExpiry = optionsByDate[selectedExpiryIdx].pairs\n        .filter((pair) => pair.call !== undefined)\n        .map((pair) => pair.call);\n\n      const putsOfExpiry = optionsByDate[selectedExpiryIdx].pairs\n        .filter((pair) => pair.put !== undefined)\n        .map((pair) => pair.put);\n\n      const [callData, putData] = await Promise.all([\n        getBasePairAskAndBids(callsOfExpiry, quoteAsset),\n        getBasePairAskAndBids(putsOfExpiry, quoteAsset),\n      ]);\n\n      const displayEntries = [];\n      optionsByDate[selectedExpiryIdx].pairs.forEach((pair) => {\n        const { call, put, strikePrice } = pair;\n        const entry = { strikePrice };\n        if (call !== undefined) {\n          // has call option on this strikePrice\n          entry.call = call;\n          entry.callDetail = callData.find((c) => c.option === call.addr);\n        }\n        if (put !== undefined) {\n          entry.put = put;\n          entry.putDetail = putData.find((p) => p.option === put.addr);\n        }\n        displayEntries.push(entry);\n      });\n\n      if (!isCancelled) {\n        setIsLoading(false);\n        setEntriesToDisplay(displayEntries);\n      }\n    };\n    updateBoardStats();\n    const id = setInterval(updateBoardStats, 3000);\n\n    return () => {\n      clearInterval(id);\n      isCancelled = true;\n    };\n  }, [selectedExpiryIdx, quoteAsset]);\n\n  // when selection change: update selected order to the first option of the expiry\n  const onExpiryChange = (idx) => {\n    setExpiryIdx(idx);\n    for (const { call, put } of optionsByDate[idx].pairs) {\n      if (call !== undefined) {\n        setBaseAsset(call);\n        return;\n      } if (put !== undefined) {\n        setBaseAsset(put);\n        return;\n      }\n    }\n  };\n\n  return (\n    <div>\n      <div style={{ display: 'flex' }}>\n        {' '}\n        <Header primary=\"Option Trading\" />\n        {' '}\n        <div style={{ paddingTop: '24px' }}>\n          <Tag> beta </Tag>\n        </div>\n        <div style={{ paddingTop: '28px', paddingLeft: '36px' }}>\n          <DropDown\n            items={optionsByDate.map((item) => item.expiryText)}\n            selected={selectedExpiryIdx}\n            onChange={onExpiryChange}\n          />\n        </div>\n      </div>\n\n      {/* <div style={{ display: 'flex' }}> */}\n\n      {/* </div> */}\n      <div style={{ display: 'flex', padding: '0px' }}>\n        <SectionTitle title=\"Calls\" />\n        <div\n          style={{\n            marginLeft: 'auto',\n            marginRight: 0,\n          }}\n        >\n          <SectionTitle title=\"Puts\" />\n        </div>\n      </div>\n      {/* Calls */}\n      <DataView\n        mode=\"table\"\n        status={isLoading ? 'loading' : 'default'}\n        fields={[\n          { label: 'last', align: 'start' },\n          { label: 'bid', align: 'start' },\n          { label: 'amt', align: 'start' },\n          { label: 'ask', align: 'start' },\n          { label: 'amt', align: 'start' },\n          { label: ' ', align: 'start' },\n          { label: 'strike', align: 'start' },\n          { label: ' ', align: 'start' },\n          { label: 'last', align: 'start' },\n          { label: 'bid', align: 'start' },\n          { label: 'amt', align: 'start' },\n          { label: 'ask', align: 'start' },\n          { label: 'amt', align: 'last' },\n\n        ]}\n        entries={entriesToDisplay}\n        renderEntry={({\n          call,\n          put,\n          putDetail,\n          callDetail,\n          strikePrice,\n        }) => {\n          const lastCallPrice = '-';\n          let callAsk = '-';\n          let callBid = '-';\n          let callBidAmt = '-';\n          let callAskAmt = '-';\n          let callOnclick = () => {};\n          let callBidOnclick = () => {};\n          let callAskOnclick = () => {};\n\n          const lastPutPrice = '-';\n          let putAsk = '-';\n          let putBid = '-';\n          let putBidAmt = '-';\n          let putAskAmt = '-';\n          let putOnclick = () => {};\n          let putBidOnclick = () => {};\n          let putAskOnclick = () => {};\n\n          if (callDetail !== undefined) {\n            // have call option has this strike price\n            callAsk = callDetail.bestAskPrice.toFixed(4);\n            callBid = callDetail.bestBidPrice.toFixed(4);\n            callAskAmt = callDetail.totalAskAmt.toFixed(2);\n            callBidAmt = callDetail.totalBidAmt.toFixed(2);\n            callOnclick = () => { setBaseAsset(call); };\n\n            callBidOnclick = () => {\n              setTradeType('sell');\n              setBaseAsset(call);\n              setSelectedOrders(callDetail.bestBid ? [callDetail.bestBid] : []);\n            };\n            callAskOnclick = () => {\n              setTradeType('buy');\n              setBaseAsset(call);\n              setSelectedOrders(callDetail.bestAsk ? [callDetail.bestAsk] : []);\n            };\n          }\n          if (putDetail !== undefined) {\n            // has put option has this strike price\n            putAsk = putDetail.bestAskPrice.toFixed(4);\n            putBid = putDetail.bestBidPrice.toFixed(4);\n            putAskAmt = putDetail.totalAskAmt.toFixed(2);\n            putBidAmt = putDetail.totalBidAmt.toFixed(2);\n\n            putOnclick = () => { setBaseAsset(put); };\n\n            putBidOnclick = () => {\n              setBaseAsset(put);\n              setTradeType('sell');\n              setSelectedOrders(putDetail.bestBid ? [putDetail.bestBid] : []);\n            };\n            putAskOnclick = () => {\n              setBaseAsset(put);\n              setTradeType('buy');\n              setSelectedOrders(putDetail.bestAsk ? [putDetail.bestAsk] : []);\n            };\n          }\n\n          return [\n            <Cell onClick={callOnclick} text={lastCallPrice} type=\"normal\" />,\n            <Cell onClick={callBidOnclick} text={callBid} type=\"bid\" />,\n            <Cell onClick={callBidOnclick} text={callBidAmt} type=\"normal\" />,\n\n            <Cell onClick={callAskOnclick} text={callAsk} type=\"ask\" />,\n            <Cell onClick={callAskOnclick} text={callAskAmt} type=\"normal\" />,\n            <div style={{ width: '30px' }}>\n              <Radio\n                disabled={!call}\n                onChange={() => setBaseAsset(call)}\n                checked={call && call.addr === baseAsset.addr}\n              />\n            </div>,\n            <div style={{ fontSize: 20, width: '50px', padding: '10px' }}>{strikePrice}</div>,\n            <div style={{ width: '30px' }}>\n              <Radio\n                disabled={!put}\n                onChange={() => (setBaseAsset(put))}\n                checked={put && put.addr === baseAsset.addr}\n              />\n            </div>,\n            <Cell onClick={putOnclick} text={lastPutPrice} type=\"normal\" />,\n            <Cell onClick={putBidOnclick} text={putBid} type=\"bid\" />,\n            <Cell onClick={putBidOnclick} text={putBidAmt} type=\"normal\" />,\n            <Cell onClick={putAskOnclick} text={putAsk} type=\"ask\" />,\n            <Cell onClick={putBidOnclick} text={putAskAmt} type=\"normal\" />,\n\n          ];\n        }}\n      />\n    </div>\n  );\n}\n\nOptionBoard.propTypes = {\n  baseAsset: TokenType.isRequired,\n  quoteAsset: TokenType.isRequired,\n  setBaseAsset: PropTypes.func.isRequired,\n  setTradeType: PropTypes.func.isRequired,\n  setSelectedOrders: PropTypes.func.isRequired,\n};\n\nexport default OptionBoard;\n\n/**\n *\n * @param {Array<{strikePriceInUSD:number, addr:string, expiry:number}>} puts\n * @param {Array<{strikePriceInUSD:number, addr:string, expiry:number}>} calls\n * @returns {{ expiry:number, expiryText:string, pairs: {call: {}, put: {}, strikePrice: number }[] }[]}\n * key: expiry in string, value: array of { call, put, callDetail, putDetail, strikePrice}\n */\nfunction groupByDate(puts, calls) {\n  const result = [];\n  const allOptions = puts.concat(calls).filter((option) => option.expiry > Date.now() / 1000);\n  const distinctExpirys = [...new Set(allOptions.map((option) => option.expiry))];\n\n  for (const expiry of distinctExpirys) {\n    const optionsExpiresThisDay = allOptions.filter((o) => o.expiry === expiry);\n    const strikePrices = [\n      ...new Set(optionsExpiresThisDay.map((option) => option.strikePriceInUSD)),\n    ];\n\n    // const allStrikesForThisDay = {};\n    const pairs = [];\n    for (const strikePrice of strikePrices) {\n      const put = puts.find((o) => o.strikePriceInUSD === strikePrice && o.expiry === expiry);\n      const call = calls.find((o) => o.strikePriceInUSD === strikePrice && o.expiry === expiry);\n      pairs.push({\n        strikePrice,\n        call,\n        put,\n      });\n    }\n    pairs.sort((a, b) => (a.strikePrice > b.strikePrice ? 1 : -1));\n    const expiryText = new Date(expiry * 1000).toDateString();\n    result.push({\n      expiry,\n      expiryText,\n      pairs,\n    });\n  }\n  return result;\n}\n\nfunction Cell({\n  onClick, text, type,\n}) {\n  return (\n    <LinkBase onClick={onClick}>\n      <div style={{ width: '60px', textAlign: 'center' }}>\n        { type === 'bid' ? (\n          <BidText>\n            {' '}\n            {text}\n            {' '}\n          </BidText>\n        ) : type === 'ask' ? (\n          <AskText>\n            {' '}\n            {text}\n            {' '}\n          </AskText>\n        ) : (\n          <div>\n            {' '}\n            {text}\n            {' '}\n          </div>\n        ) }\n      </div>\n    </LinkBase>\n  );\n}\n\nCell.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  text: PropTypes.string.isRequired,\n  type: PropTypes.string.isRequired,\n};\n","/* eslint-disable no-restricted-syntax */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  DataView, Timer, Button,\n} from '@aragon/ui';\n\nimport { cancelOrders } from '../../utils/web3';\n\n// import BigNumber from 'bignumber.js';\n\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { order as OrderType, option as OptionType } from '../types';\nimport { AskText, BidText } from './styled';\n// import { SectionTitle } from '../common';\nimport * as zeroXUtil from '../../utils/0x';\n\nfunction MyOrders({\n  asks, bids, option, user, quoteAsset,\n}) {\n  const [myOrdersPage, setMyOrdersPage] = useState(0);\n  const [selectedOrders, setSelectedOrders] = useState([]);\n  const userAsks = asks\n    .filter((o) => o.order.makerAddress === user.toLowerCase())\n    .map((o) => {\n      // eslint-disable-next-line no-param-reassign\n      o.type = 'Ask';\n      return o;\n    });\n  const userBids = bids\n    .filter((o) => o.order.makerAddress === user.toLowerCase())\n    .map((o) => {\n      // eslint-disable-next-line no-param-reassign\n      o.type = 'Bid';\n      return o;\n    });\n\n  return (\n    <>\n      <DataView\n        entriesPerPage={4}\n        statusEmpty={(\n          <div>\n            No Open Orders for\n            {' '}\n            {option.title}\n          </div>\n)}\n        page={myOrdersPage}\n        onPageChange={setMyOrdersPage}\n        onSelectEntries={setSelectedOrders}\n        fields={['digest', 'type', 'price', 'amount', 'filled', 'expiration', '']}\n        entries={userAsks.concat(userBids)\n          .sort((a, b) => (a.order.expirationTimeSeconds > b.order.expirationTimeSeconds ? 1 : -1))}\n        renderEntry={(order) => [// call, put, callDetail, putDetail, strikePrice\n          order.metaData.orderHash.slice(2, 8),\n          order.type === 'Ask' ? <AskText>{order.type}</AskText> : <BidText>{order.type}</BidText>,\n          order.type === 'Ask'\n            ? zeroXUtil.getAskPrice(order, option.decimals, quoteAsset.decimals).toFixed(6)\n            : zeroXUtil.getBidPrice(order, quoteAsset.decimals, option.decimals).toFixed(6),\n          order.type === 'Ask'\n            ? toTokenUnitsBN(order.order.makerAssetAmount, option.decimals).toFixed(3)\n            : toTokenUnitsBN(order.order.takerAssetAmount, option.decimals).toFixed(3),\n          `${zeroXUtil.getOrderFillRatio(order)}%`,\n          <Timer end={new Date(order.order.expirationTimeSeconds * 1000)} />,\n\n          selectedOrders.length > 0\n            ? (\n              <Button onClick={() => {\n                cancelOrders(selectedOrders.map((o) => o.order));\n              }}\n              >\n                Cancel Selected\n              </Button>\n            )\n            : (\n              <Button onClick={() => {\n                cancelOrders([order.order]);\n              }}\n              >\n                Cancel Order\n              </Button>\n            ),\n        ]}\n      />\n    </>\n  );\n}\n\nMyOrders.propTypes = {\n  asks: PropTypes.arrayOf(OrderType).isRequired,\n  bids: PropTypes.arrayOf(OrderType).isRequired,\n  user: PropTypes.string.isRequired,\n  option: OptionType.isRequired,\n  quoteAsset: PropTypes.shape({\n    decimals: PropTypes.number.isRequired,\n    addr: PropTypes.string.isRequired,\n    symbol: PropTypes.string.isRequired,\n  }).isRequired,\n};\n\nexport default MyOrders;\n","/* eslint-disable no-restricted-syntax */\nimport React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { DataView, Timer } from '@aragon/ui';\n\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { order as OrderType, option as OptionType, token as TokenType } from '../types';\nimport { AskText, BidText } from './styled';\nimport * as zeroXUtil from '../../utils/0x';\n\nfunction OrderBook({\n  asks, bids, option, quoteAsset, setTradeType, setSelectedOrders, selectedOrders, tradeType,\n}) {\n  const [askPage, setAskPage] = useState(0);\n  const [bidPage, setBidPage] = useState(0);\n\n  const [askSelectedIndexs, setAskSelectedIndexes] = useState([]);\n  const [bidSelectedIndexs, setBidSelectedIndexes] = useState([]);\n\n  const onSelectAskEntry = (entries, indexes) => {\n    setTradeType('buy'); // Filling ask orders is a bid\n    setSelectedOrders(entries);\n    setAskSelectedIndexes(indexes);\n  };\n\n  const onSelectBidEntry = (entries, indexes) => {\n    setTradeType('sell'); // Filling bid orders is a ask\n    setSelectedOrders(entries);\n    setBidSelectedIndexes(indexes);\n  };\n\n  // everytime tradeType or selectedOrders changed, the selection is updated\n  useEffect(() => {\n    if (tradeType === 'buy') { // user select and ask order\n      setBidSelectedIndexes([]); // reset bid selections\n      const selectedIdxs = [];\n      for (let i = 0; i < asks.length; i += 1) {\n        if (selectedOrders.map((o) => o.metaData.orderHash).includes(asks[i].metaData.orderHash)) {\n          selectedIdxs.push(i);\n        }\n      }\n      setAskSelectedIndexes(selectedIdxs);\n    } else {\n      setAskSelectedIndexes([]);\n      const selectedIdxs = [];\n      for (let i = 0; i < bids.length; i += 1) {\n        if (selectedOrders.map((o) => o.metaData.orderHash).includes(bids[i].metaData.orderHash)) {\n          selectedIdxs.push(i);\n        }\n      }\n      setBidSelectedIndexes(selectedIdxs);\n    }\n  }, [selectedOrders, tradeType, asks, bids]);\n\n  return (\n    <>\n      <div style={{ display: 'flex' }}>\n        <div style={{ width: '50%' }}>\n          <DataView\n            statusEmpty={<div>No Sell Orders</div>}\n            entriesPerPage={4}\n            page={askPage}\n            onPageChange={setAskPage}\n            entries={asks}\n            onSelectEntries={onSelectAskEntry}\n            // If other operation reset selected orders, should change selected accordingly\n            selection={askSelectedIndexs}\n            renderSelectionCount={(x) => `${x} Orders Selected`}\n            fields={['price', 'amount', 'filled', 'expiration']}\n            renderEntry={(order) => [\n              <AskText>{zeroXUtil.getAskPrice(order, option.decimals, quoteAsset.decimals).toFixed(4)}</AskText>,\n              toTokenUnitsBN(order.order.makerAssetAmount, option.decimals).toFixed(4),\n              `${zeroXUtil.getOrderFillRatio(order)}%`,\n              <Timer format=\"hms\" showIcon end={new Date(order.order.expirationTimeSeconds * 1000)} />,\n            ]}\n          />\n        </div>\n        <div style={{ width: '50%' }}>\n          <DataView\n            statusEmpty={<div>No Buy Orders</div>}\n            entriesPerPage={4}\n            page={bidPage}\n            onPageChange={setBidPage}\n            entries={bids}\n            onSelectEntries={onSelectBidEntry}\n            selection={bidSelectedIndexs}\n            renderSelectionCount={(x) => `${x} Orders Selected`}\n            fields={['price', 'amount', 'filled', 'expiration']}\n            renderEntry={(order) => [\n              <BidText>{zeroXUtil.getBidPrice(order, quoteAsset.decimals, option.decimals).toFixed(4)}</BidText>,\n              toTokenUnitsBN(order.order.takerAssetAmount, option.decimals).toFixed(4),\n              `${zeroXUtil.getOrderFillRatio(order)}%`,\n              <Timer format=\"hms\" showIcon end={new Date(order.order.expirationTimeSeconds * 1000)} />,\n            ]}\n          />\n        </div>\n      </div>\n\n\n    </>\n  );\n}\n\nOrderBook.propTypes = {\n  asks: PropTypes.arrayOf(OrderType).isRequired,\n  bids: PropTypes.arrayOf(OrderType).isRequired,\n  option: OptionType.isRequired,\n  quoteAsset: TokenType.isRequired,\n  tradeType: PropTypes.string.isRequired,\n  selectedOrders: PropTypes.arrayOf(OrderType).isRequired,\n  setTradeType: PropTypes.func.isRequired,\n  setSelectedOrders: PropTypes.func.isRequired,\n};\n\nexport default OrderBook;\n","/* eslint-disable no-restricted-syntax */\nimport React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport { Tabs } from '@aragon/ui';\n\nimport MyOrders from './MyOrders';\nimport OrderBook from './OrderBook';\n\nimport { order as OrderType, option as OptionType } from '../types';\n\nfunction Orders({\n  asks, bids, option, user, quoteAsset,\n  tradeType,\n  selectedOrders,\n  setTradeType,\n  setSelectedOrders,\n}) {\n  const [selectedTab, setSelectedTab] = useState(0);\n\n  return (\n    <>\n      <Tabs\n        items={['OrderBook', 'My Orders']}\n        selected={selectedTab}\n        onChange={setSelectedTab}\n      />\n      { selectedTab === 0\n        ? (\n          <OrderBook\n            asks={asks}\n            bids={bids}\n            option={option}\n            quoteAsset={quoteAsset}\n            tradeType={tradeType}\n            setTradeType={setTradeType}\n            selectedOrders={selectedOrders}\n            setSelectedOrders={setSelectedOrders}\n          />\n        )\n        : (\n          <MyOrders asks={asks} bids={bids} option={option} user={user} quoteAsset={quoteAsset} />\n        )}\n\n    </>\n  );\n}\n\nOrders.propTypes = {\n  asks: PropTypes.arrayOf(OrderType).isRequired,\n  bids: PropTypes.arrayOf(OrderType).isRequired,\n  user: PropTypes.string.isRequired,\n  option: OptionType.isRequired,\n  quoteAsset: PropTypes.shape({\n    decimals: PropTypes.number.isRequired,\n    addr: PropTypes.string.isRequired,\n    symbol: PropTypes.string.isRequired,\n  }).isRequired,\n  tradeType: PropTypes.string.isRequired,\n  selectedOrders: PropTypes.arrayOf(OrderType).isRequired,\n  setTradeType: PropTypes.func.isRequired,\n  setSelectedOrders: PropTypes.func.isRequired,\n};\n\nexport default Orders;\n","/* eslint-disable consistent-return */\nimport React, { useState, useEffect } from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\n\nimport {\n  SidePanel, Button, TextInput, useTheme,\n} from '@aragon/ui';\nimport { BalanceBlock, SectionTitle, Comment } from '../common';\n\nimport { wrapETH, unwrapETH } from '../../utils/web3';\nimport { toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\nimport { getBalance } from '../../utils/infura';\n\nfunction WrapETHModal({\n  user, wethBalance, opened, setOpen, helperText, setHelperText,\n}) {\n  const theme = useTheme();\n  const [wrapAmount, setWrapAmount] = useState(BigNumber(0));\n  const [unWrapAmount, setUnwrapAmount] = useState(BigNumber(0));\n\n  const [ethBalance, setETHBalance] = useState(BigNumber(0));\n\n  const onChangeWrapAmount = (event) => {\n    const amount = event.target.value;\n    if (!amount) {\n      setWrapAmount(new BigNumber(0));\n      return;\n    }\n    setWrapAmount(new BigNumber(amount));\n  };\n\n  const onChangeUnWrapAmount = (event) => {\n    const amount = event.target.value;\n    if (!amount) {\n      setUnwrapAmount(new BigNumber(0));\n      return;\n    }\n    setUnwrapAmount(new BigNumber(amount));\n  };\n\n  useEffect(() => {\n    if (!opened || !user) return;\n    let isCancelled = false;\n\n    const updateETHBalance = async () => {\n      if (user === '') return;\n      const quoteBalance = await getBalance(user);\n      if (!isCancelled) {\n        setETHBalance(new BigNumber(quoteBalance));\n      }\n    };\n    updateETHBalance();\n    const idETHBalance = setInterval(updateETHBalance, 20000);\n    return () => {\n      isCancelled = true;\n      clearInterval(idETHBalance);\n    };\n  }, [opened, user]);\n\n  return (\n    <SidePanel\n      title=\"\"\n      opened={opened}\n      onClose={() => {\n        setOpen(false);\n        setHelperText('');\n      }}\n    >\n      <br />\n\n      <div style={{ color: theme.warning }}>\n        {helperText}\n      </div>\n\n      <SectionTitle title=\"Wrap WETH\" />\n      <div style={{ padding: '2%' }}>\n        <BalanceBlock asset=\"Your ETH Balance\" balance={ethBalance.toNumber()} />\n      </div>\n\n      {/* </div> */}\n      <div style={{ display: 'flex' }}>\n        <div style={{ width: '60%' }}>\n          <TextInput wide type=\"number\" value={wrapAmount.toNumber()} onChange={onChangeWrapAmount} />\n        </div>\n        <div style={{ width: '30%' }}>\n          <Button\n            onClick={() => {\n              wrapETH(toBaseUnitBN(wrapAmount, 18).toString());\n            }}\n            label=\"Wrap\"\n          />\n        </div>\n      </div>\n\n      <Comment text=\"After you wrap your ETH to WETH, you can unwrap them back to ETH anytime.\" />\n      <br />\n      <SectionTitle title=\"Unwrap WETH\" />\n      <div style={{ padding: '2%' }}>\n        <BalanceBlock asset=\"Your WETH Balance\" balance={toTokenUnitsBN(wethBalance, 18).toNumber()} />\n      </div>\n      <div style={{ display: 'flex' }}>\n        <div style={{ width: '60%' }}>\n          <TextInput wide type=\"number\" value={unWrapAmount.toNumber()} onChange={onChangeUnWrapAmount} />\n        </div>\n        <div style={{ width: '30%' }}>\n          <Button\n            onClick={() => {\n              unwrapETH(toBaseUnitBN(unWrapAmount, 18).toString());\n            }}\n            label=\"Unwrap\"\n          />\n        </div>\n      </div>\n    </SidePanel>\n  );\n}\n\n\nWrapETHModal.propTypes = {\n  user: PropTypes.string.isRequired,\n  helperText: PropTypes.string.isRequired,\n  setHelperText: PropTypes.func.isRequired,\n  wethBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  opened: PropTypes.bool.isRequired,\n  setOpen: PropTypes.func.isRequired,\n};\n\nexport default WrapETHModal;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Button, useTheme, TextInput, Help, useToast, LinkBase,\n} from '@aragon/ui';\nimport styled from 'styled-components';\nimport BigNumber from 'bignumber.js';\nimport { WarningText } from '../common';\nimport {\n  createOrder, broadcastOrders, getOrdersTotalFillables, getGasPrice, getFillAmountsOfOrders,\n} from '../../utils/0x';\nimport { signOrder, fillOrders, approve } from '../../utils/web3';\nimport { toTokenUnitsBN, toBaseUnitBN } from '../../utils/number';\nimport WrapETHPanel from './WrapETHSidePanel';\n\nimport {\n  // vault as VaultType,\n  order as OrderType,\n  token as TokenType,\n} from '../types';\nimport { getAllowance } from '../../utils/infura';\nimport { ZeroX_ERC20Proxy } from '../../constants/contracts';\n\nimport { WETH } from '../../constants/tokens';\n\n/**\n *\n * @param {{\n * baseAsset: {addr:string, decimals: number, symbol:string}\n * quoteAsset: {addr:string, decimals: number, symbol:string}\n * collateral: {addr:string, decimals: number, symbol:string}\n * }} param0\n */\nfunction BuyAndSell({\n  user,\n  tradeType, // ask || bid\n  selectedOrders, //\n  setTradeType,\n  setSelectedOrders,\n\n  // vault,\n  baseAsset,\n  quoteAsset,\n  // collateral,\n\n  // ethBalance, // in ETH (0.5)\n  baseAssetBalance, // in base uinit\n  quoteAssetBalance, // in base Unit\n}) {\n  const theme = useTheme();\n  const toast = useToast();\n\n  const [quoteAssetAmount, setQuoteAssetAmount] = useState(new BigNumber(0));\n  const [fillingtakerAmounts, setFillingTakerAmounts] = useState([]);\n\n  // these two add up to total oToken displayed on the Amount section\n  const [baseAmountToFill, setBaseAmountToFill] = useState(new BigNumber(0));\n  const [baseAmountToCreate, setBaseAmountToCreate] = useState(new BigNumber(0));\n\n  const [rate, setRate] = useState(new BigNumber(0));\n\n  // gasPrice is needed to calculate 0x fee\n  const [fastGasPrice, setFastGasPrice] = useState(new BigNumber(5)); //  in GWei\n\n  // const quoteAssetAmount = price.times(baseAssetAmount);\n\n  const [selectedOrderFillables, setSelectedOrdersFillable] = useState({\n    totalFillableMakerAmount: new BigNumber(0),\n    totalFillableTakerAmount: new BigNumber(0),\n  });\n\n  const [isFillingAndCreating, setIsFillingAndCreating] = useState(false);\n\n  const hasSelectedOrders = selectedOrders.length > 0;\n  const feeInETH = hasSelectedOrders\n    ? fastGasPrice.times(new BigNumber(selectedOrders.length)).times(new BigNumber(0.00015))\n    : new BigNumber(0);\n\n  // for weth side panel\n  const [panelOpend, setPanelOpended] = useState(false);\n  const [wethPanelHelperText, setPanelHelperText] = useState('');\n\n  // expiry button\n  const [activeButton, setActiveButton] = useState(0);\n  const expirySeconds = activeButton === 0\n    ? 3600 : (activeButton === 1 ? 86400 : 604800);\n  const expiry = parseInt(Date.now() / 1000 + expirySeconds, 10);\n\n\n  // update gasPrice\n  useEffect(() => {\n    let isCanceled = false;\n    async function fetchGasPrice() {\n      const { fast } = await getGasPrice();\n      if (!isCanceled) setFastGasPrice(new BigNumber(fast).div(new BigNumber(10)));\n    }\n    fetchGasPrice();\n    const id = setInterval(fetchGasPrice, 10000);\n\n    return () => {\n      isCanceled = true;\n      clearInterval(id);\n    };\n  }, []);\n\n  // when selected orders changed\n  useEffect(() => {\n    // This update only take effect when user has selected orders\n    if (selectedOrders.length === 0) {\n      setBaseAmountToFill(new BigNumber(0));\n      return;\n    }\n    setIsFillingAndCreating(false);\n\n    const selectedFillables = getOrdersTotalFillables(selectedOrders);\n    setFillingTakerAmounts(selectedFillables.fillableTakerAmounts);\n\n    let baseMaxFillingAmount = new BigNumber(0);\n    let quoteMaxFillingAmount = new BigNumber(0);\n    // Step 1. set oToken and WETH amount to order total\n    if (tradeType === 'buy') {\n      // ask: takerAsset: weth, makerAsset: oToken\n      baseMaxFillingAmount = toTokenUnitsBN(selectedFillables.totalFillableMakerAmount, baseAsset.decimals);\n      quoteMaxFillingAmount = toTokenUnitsBN(selectedFillables.totalFillableTakerAmount, quoteAsset.decimals);\n    } else {\n      // comming bids: takerAsset: oToken, makerAsset: weth\n      baseMaxFillingAmount = toTokenUnitsBN(selectedFillables.totalFillableTakerAmount, baseAsset.decimals);\n      quoteMaxFillingAmount = toTokenUnitsBN(selectedFillables.totalFillableMakerAmount, quoteAsset.decimals);\n    }\n    setBaseAmountToFill(baseMaxFillingAmount);\n    setBaseAmountToCreate(new BigNumber(0));\n    // setBaseAssetAmount(baseMaxFillingAmount);\n    setQuoteAssetAmount(quoteMaxFillingAmount);\n    setSelectedOrdersFillable(selectedFillables);\n\n    // Change Price according to total base / quote\n    const aggregateRate = quoteMaxFillingAmount.div(baseMaxFillingAmount);\n    setRate(aggregateRate);\n  }, [selectedOrders, baseAsset, tradeType, quoteAsset]);\n\n\n  const onChangeBaseAmount = (amount) => {\n    // 1. Update amount field\n    if (!amount) {\n      setBaseAmountToFill(new BigNumber(0));\n      setBaseAmountToCreate(new BigNumber(0));\n      return;\n    }\n    const amountBN = new BigNumber(amount);\n    if (amountBN.lte(0)) {\n      setBaseAmountToFill(new BigNumber(0));\n      setBaseAmountToCreate(new BigNumber(0));\n      return;\n    }\n\n    // If is filling Mode\n    if (hasSelectedOrders) {\n      const totalOtokenInSelectedOrders = tradeType === 'buy'\n        ? toTokenUnitsBN(selectedOrderFillables.totalFillableMakerAmount, baseAsset.decimals) // oToken is the maker asset of ask orders\n        : toTokenUnitsBN(selectedOrderFillables.totalFillableTakerAmount, baseAsset.decimals);\n\n      // user is filling lower than all orders combined\n      if (totalOtokenInSelectedOrders.gte(amountBN)) {\n        // [FILLING MODE]\n        console.log('FILLING MODE');\n        setIsFillingAndCreating(false);\n        setBaseAmountToFill(amountBN);\n        setBaseAmountToCreate(new BigNumber(0));\n\n        // Update Rates\n        const baseAmountTotal = toBaseUnitBN(amountBN, baseAsset.decimals);\n\n        let quoteAmountTotal;\n        if (tradeType === 'buy') {\n          const fillingAmounts = getFillAmountsOfOrders(selectedOrders, undefined, baseAmountTotal);\n          quoteAmountTotal = fillingAmounts.sumTakerAmount;\n          setFillingTakerAmounts(fillingAmounts.takerAmountArray);\n        } else {\n          const fillingAmounts = getFillAmountsOfOrders(selectedOrders, baseAmountTotal, undefined);\n          quoteAmountTotal = fillingAmounts.sumMakerAmount;\n          setFillingTakerAmounts(fillingAmounts.takerAmountArray); // only need to record taker amount array\n        }\n\n        const quoteAmountTk = toTokenUnitsBN(quoteAmountTotal, quoteAsset.decimals);\n        setRate(quoteAmountTk.div(amountBN));\n        setQuoteAssetAmount(quoteAmountTk);\n      } else {\n        // [CREATING AND FILLING MODE]\n        console.log('CREATING + FILLING');\n        setIsFillingAndCreating(true);\n\n        setBaseAmountToFill(totalOtokenInSelectedOrders);\n        setBaseAmountToCreate(amountBN.minus(totalOtokenInSelectedOrders));\n\n        // Fix rate at current, dont have to change.\n        const quoteAmount = rate.times(amountBN);\n        setQuoteAssetAmount(quoteAmount);\n      }\n    } else {\n      // [CREATING MODE]\n      console.log('CREATING');\n      setBaseAmountToFill(new BigNumber(0));\n      setBaseAmountToCreate(amountBN);\n\n      // create mode wont change rate when put in amount\n      const quoteAmount = rate.times(amountBN);\n      setQuoteAssetAmount(quoteAmount);\n    }\n  };\n\n  const onChangeRate = (newrate) => {\n    if (!newrate) {\n      setRate(new BigNumber(0));\n      return;\n    }\n    const rateBN = new BigNumber(new BigNumber(newrate).toFixed(4));\n    setRate(rateBN);\n\n    // adjusting rate will not be filling orders anymore\n    if (hasSelectedOrders) {\n      setSelectedOrders([]);\n    }\n\n    // enter create mode.\n    const quoteAmount = rateBN.times((baseAmountToCreate));\n    setQuoteAssetAmount(quoteAmount);\n  };\n\n  const checkAndAllowQuoteAsset = async (quoteAssetAmountInBase) => {\n    const quoteAllowance = new BigNumber(await getAllowance(quoteAsset.addr, user, ZeroX_ERC20Proxy));\n    if (quoteAllowance.lt(quoteAssetAmountInBase)) {\n      toast(`Please approve 0x to spend your oToken ${quoteAsset.symbol}`);\n      await approve(quoteAsset.addr, ZeroX_ERC20Proxy);\n    }\n  };\n\n  const checkQuoteAssetBalance = (quoteAssetAmountInBase) => {\n    if (quoteAssetAmountInBase.gt(quoteAssetBalance)) {\n      if (quoteAsset.addr === WETH.addr) {\n        setPanelHelperText('You dont have enough WETH to make this order, you may need to wrap some ETH into WETH.');\n        setPanelOpended(true);\n        return false;\n      }\n      toast(`Insufficient ${quoteAsset.symbol}`);\n      return false;\n    }\n    return true;\n  };\n\n  const checkBaseAssetBalance = (baseAssetAmountInBase) => {\n    if (baseAssetAmountInBase.gt(baseAssetBalance)) {\n      toast(`Insufficient ${baseAsset.symbol}`);\n      return false;\n    }\n    return true;\n  };\n\n  const checkAndAllowBaseAsset = async (baseAssetAmountBase) => {\n    const tokenAllowance = new BigNumber(await getAllowance(baseAsset.addr, user, ZeroX_ERC20Proxy));\n    if (tokenAllowance.lt(baseAssetAmountBase)) {\n      toast(`Please approve 0x to spend your oToken ${baseAsset.symbol}`);\n      await approve(baseAsset.addr, ZeroX_ERC20Proxy);\n    }\n  };\n\n  const clickCreateOrder = async () => {\n    if (user === '') {\n      toast('Please connect wallet first');\n      return;\n    }\n    let order;\n    if (tradeType === 'buy') {\n      const quoteAssetInBaseUnit = toBaseUnitBN(baseAmountToCreate.times(rate), quoteAsset.decimals);\n\n      // check quote asset balance\n      if (!checkQuoteAssetBalance(quoteAssetInBaseUnit)) return;\n\n      // check quote asset allowance\n      await checkAndAllowQuoteAsset(quoteAssetInBaseUnit);\n\n      // create order\n      order = createOrder(\n        user,\n        quoteAsset.addr,\n        baseAsset.addr,\n        quoteAssetInBaseUnit,\n        toBaseUnitBN(baseAmountToCreate, baseAsset.decimals),\n        expiry,\n      );\n    } else {\n      const baseAssetInBaseUnit = toBaseUnitBN(baseAmountToCreate, baseAsset.decimals);\n\n      if (!checkBaseAssetBalance(baseAssetInBaseUnit)) return;\n\n      await checkAndAllowBaseAsset(baseAssetInBaseUnit);\n\n      order = createOrder(\n        user,\n        baseAsset.addr,\n        quoteAsset.addr,\n        baseAssetInBaseUnit,\n        toBaseUnitBN(baseAmountToCreate.times(rate), quoteAsset.decimals),\n        expiry,\n      );\n    }\n    const signedOrder = await signOrder(order);\n    try {\n      await broadcastOrders([signedOrder]);\n    } catch (error) {\n      toast(error);\n    }\n  };\n\n  const clickFillOrders = async () => {\n    const takerAmountBase = fillingtakerAmounts.reduce((prev, cur) => prev.plus(new BigNumber(cur)), new BigNumber(0));\n    if (tradeType === 'buy') {\n      if (!checkQuoteAssetBalance(takerAmountBase)) return;\n      await checkAndAllowQuoteAsset(takerAmountBase);\n    } else {\n      if (!checkBaseAssetBalance(takerAmountBase)) return;\n      await checkAndAllowBaseAsset(takerAmountBase);\n    }\n    await fillOrders(\n      selectedOrders.map((o) => o.order),\n      fillingtakerAmounts,\n      selectedOrders.map((o) => o.order.signature),\n      toBaseUnitBN(feeInETH, 18).toString(),\n      fastGasPrice.toString(),\n    );\n  };\n\n  const clickFillAndCreate = async () => {\n    await clickCreateOrder();\n    await clickFillOrders();\n  };\n\n  return (\n    <>\n      <BuyAndSellBlock theme={theme}>\n        <Header theme={theme}>\n          <Wrapper>Balance</Wrapper>\n        </Header>\n        <Wrapper>\n          <TopPart theme={theme}>\n            <FlexWrapper>\n              <div>{baseAsset.symbol}</div>\n              <TopPartText>{toTokenUnitsBN(baseAssetBalance, baseAsset.decimals).toFormat(4)}</TopPartText>\n            </FlexWrapper>\n            <FlexWrapper>\n              <div>\n                <Flex>\n                  <p style={{ paddingRight: '5px' }}>\n                    <LinkBase onClick={() => setPanelOpended(true)}>\n                      {quoteAsset.symbol}\n                    </LinkBase>\n                  </p>\n                  { quoteAsset.symbol === WETH.addr ? (\n                    <Help hint=\"What is WETH?\">\n                      WETH is Wraped ETH, the erc20 version of ETH. You must have WETH to create and fill orders on 0x.\n                      {' '}\n                      <LinkBase onClick={() => setPanelOpended(true)}>Click here to wrap your ETH now!</LinkBase>\n                    </Help>\n                  ) : <></> }\n                </Flex>\n              </div>\n              <TopPartText>{toTokenUnitsBN(quoteAssetBalance, quoteAsset.decimals).toFormat(4)}</TopPartText>\n            </FlexWrapper>\n          </TopPart>\n          {/* <FlexWrapper>\n            <div>\n              Collateral (\n              {collateral.symbol}\n              )\n            </div>\n            <TopPartText>\n              { vault\n                ? toTokenUnitsBN(vault.collateral, collateral.decimals).toFormat(4)\n                : Number(0).toFixed(4)}\n            </TopPartText>\n          </FlexWrapper> */}\n        </Wrapper>\n        <Wrapper>\n          <TabWrapper theme={theme}>\n            <Tab\n              active={tradeType === 'buy'}\n              onClick={() => {\n                setSelectedOrders([]);\n                setTradeType('buy');\n              }}\n              theme={theme}\n            >\n              Buy\n            </Tab>\n            <Tab\n              active={tradeType === 'sell'}\n              onClick={() => {\n                setSelectedOrders([]);\n                setTradeType('sell');\n              }}\n              theme={theme}\n            >\n              Sell\n            </Tab>\n          </TabWrapper>\n          <LowerPart>\n            <Label>Amount</Label>\n            { baseAsset.symbol.toLowerCase().includes('call')\n              ? <WarningText text={`Buy ${baseAsset.strikePriceInUSD} ${baseAsset.symbol} to hedge 1 ETH.`} />\n              : <></> }\n            <TextInput\n              wide\n              type=\"number\"\n              onChange={(e) => onChangeBaseAmount(e.target.value)}\n              value={baseAmountToCreate.plus(baseAmountToFill).toNumber()}\n              adornmentPosition=\"end\"\n              adornment={baseAsset.symbol}\n            />\n\n            <Label>Price Per Token</Label>\n            <TextInput\n              wide\n              type=\"number\"\n              onChange={(e) => onChangeRate(e.target.value)}\n              value={rate.toNumber()}\n              adornmentPosition=\"end\"\n              adornment={quoteAsset.symbol}\n            />\n\n            <Label>Expires After</Label>\n            <GroupButtonWrapper>\n              {['1 Hour', '1 Day', '1 Week'].map((x, i) => (\n                <GroupButton\n                  disabled={hasSelectedOrders && !isFillingAndCreating}\n                  theme={theme}\n                  onClick={() => setActiveButton(i)}\n                  key={x}\n                  index={i}\n                  isActive={activeButton === i}\n                >\n                  {x}\n                </GroupButton>\n              ))}\n            </GroupButtonWrapper>\n\n            <BottomTextWrapper>\n              <BottomText>{tradeType === 'buy' ? 'Cost' : 'Premium'}</BottomText>\n              <BottomText>{`${quoteAssetAmount.toFixed(4)} ${quoteAsset.symbol}`}</BottomText>\n            </BottomTextWrapper>\n            <BottomTextWrapper>\n              <BottomText>\n                <Flex>\n                  <p style={{ paddingRight: '5px' }}>Fee</p>\n                  <Help hint=\"Why am I paying?\">\n                    This is the protocol fee charged by 0x.\n                    In addition to this, you still need to pay for gas if you are taking orders.\n                  </Help>\n                </Flex>\n              </BottomText>\n              <BottomText>{`${feeInETH} ETH` }</BottomText>\n            </BottomTextWrapper>\n          </LowerPart>\n        </Wrapper>\n        <Flex>\n          { hasSelectedOrders // is filling orders\n            ? isFillingAndCreating\n              ? (\n                <Button\n                  onClick={clickFillAndCreate}\n                  label=\"Create And Fill\"\n                  wide\n                />\n              )\n              : (\n                <Button\n                  onClick={clickFillOrders}\n                  label=\"Fill Orders\"\n                  wide\n                />\n              )\n            : (\n              <Button\n                onClick={clickCreateOrder}\n                label={tradeType === 'buy' ? 'Create Buy Order' : 'Create Sell Order'}\n                wide\n              />\n            )}\n\n        </Flex>\n      </BuyAndSellBlock>\n      <WrapETHPanel\n        user={user}\n        opened={panelOpend}\n        setOpen={setPanelOpended}\n        wethBalance={quoteAssetBalance}\n        helperText={wethPanelHelperText}\n        setHelperText={setPanelHelperText}\n      />\n    </>\n  );\n}\n\nBuyAndSell.propTypes = {\n  user: PropTypes.string.isRequired,\n\n  // three types of tokens\n  quoteAsset: TokenType.isRequired,\n  baseAsset: TokenType.isRequired,\n  // collateral: TokenType.isRequired,\n\n\n  // ethBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  baseAssetBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  quoteAssetBalance: PropTypes.instanceOf(BigNumber).isRequired,\n\n  // vault: VaultType,\n\n  tradeType: PropTypes.string.isRequired,\n  setTradeType: PropTypes.func.isRequired,\n\n  selectedOrders: PropTypes.arrayOf(OrderType).isRequired,\n  setSelectedOrders: PropTypes.func.isRequired,\n};\n\n// BuyAndSell.defaultProps = {\n//   vault: {\n//     owner: '',\n//     oTokensIssued: '0',\n//     collateral: '0',\n//     underlying: '0',\n//   },\n// };\n\nexport default BuyAndSell;\n\nconst FlexWrapper = styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin: 18px 0;\n`;\nconst BuyAndSellBlock = styled.div`  \n  width: 100%;\n  min-height: 509px;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  border: 1px solid ${(props) => props.theme.border};\n  padding-bottom: 10px;\n  border-radius: 5px;\n  background-color: ${(props) => props.theme.surface};\n`;\nconst Header = styled.div`\n  width: 100%;\n  height: 35px;\n  font-size: 13px;\n  font-family: aragon-ui;\n  border-bottom: 1px solid ${(props) => props.theme.border};\n  background-color: ${(props) => props.theme.surface};\n  color: ${(props) => props.theme.contentSecondary};\n  display: flex;\n  align-items: center;\n  padding: 10px 0;\n  justify-content: center;\n  // font-weight: bold;\n`;\nconst TopPart = styled.div`\n  margin: 10px 0;\n  background-color: ${(props) => props.theme.surface};\n  min-height: 50px;\n`;\nconst TopPartText = styled.div``;\nconst LowerPart = styled.div`\n  background-color: ${(props) => props.theme.background};\n`;\nconst Tab = styled.div`\n  width: 50%;\n  height: 50px;\n  color: ${(props) => (props.active ? props.theme.content : props.theme.surfaceContentSecondary)};\n  justify-content: center;\n  display: flex;\n  align-items: center;\n  border-bottom: ${(props) => (props.active ? `2px solid ${props.theme.selected}` : `1px solid ${props.theme.border}`)};\n  cursor: pointer;\n`;\nconst Label = styled.div`\n  height: 14px;\n  font-size: 14px;\n  color: ${(props) => props.theme.content};\n  margin: 20px 0 15px 0;\n`;\n\nconst BottomText = styled.div`\n  height: 20px;\n`;\nconst Wrapper = styled.div`\n  width: 90%;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n`;\nconst Flex = styled.div`\n  display:flex;\n  width: 90%;\n`;\nconst TabWrapper = styled.div`\n  width: 100%;\n  display: flex;\n  background-color: ${(props) => props.theme.surface};\n  padding-top: 10px;\n  border: ${(props) => props.theme.border}\n`;\nconst BottomTextWrapper = styled(FlexWrapper)`\n  height: 27px;\n  border-bottom: solid 1px #979797;\n  border-bottom-style: dotted;\n`;\nconst GroupButtonWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  color: ${(props) => props.theme.content};\n  white-space: nowrap;\n  box-shadow: 0 1px 3px rgba(0,0,0,0.1);\n  align-items: center;\n  border-radius: 5px;\n`;\nconst GroupButton = styled.div`\n  height: 40px;\n  width: 33%;\n  border: 1px solid ${(props) => props.theme.border};\n  border-width: ${(props) => (props.index === 1 ? '1px 0px' : '1px')};\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  cursor: pointer;\n  border-top-left-radius: ${(props) => (props.index === 0 ? '5px' : '0px')};\n  border-bottom-left-radius: ${(props) => (props.index === 0 ? '5px' : '0px')};\n  border-top-right-radius: ${(props) => (props.index === 2 ? '5px' : '0px')};\n  border-bottom-right-radius: ${(props) => (props.index === 2 ? '5px' : '0px')};\n  background: ${(props) => (props.disabled ? props.theme.surface\n    : props.isActive ? props.theme.surfaceHighlight : props.theme.surface)} ;\n  :active {\n    transform: translateY(1px)\n  }\n`;\n","import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\nimport styled from 'styled-components';\n\nimport { Header } from '@aragon/ui';\nimport OptionBoard from './OptionBoard';\nimport TabBoard from './TabBoard';\nimport BuyAndSell from './BuyAndSell';\n\nimport { getTokenBalance } from '../../utils/infura';\nimport { getOrderBook, isValid } from '../../utils/0x';\n// import { getVault } from '../../utils/graph';\nimport { eth_puts, eth_calls } from '../../constants/options';\n\nimport * as tokens from '../../constants/tokens';\n\nimport tracker from '../../utils/tracker';\n\nconst quoteAsset = tokens.USDC;\n\nfunction OptionTrading({ user }) {\n  const [baseAsset, setBaseAsset] = useState(\n    eth_puts.concat(eth_calls).find((o) => o.expiry > Date.now() / 1000),\n  );\n\n  useEffect(() => {\n    tracker.pageview('/trade/');\n  }, []);\n\n  const [asks, setAsks] = useState([]);\n  const [bids, setBids] = useState([]);\n\n  const [tradeType, setTradeType] = useState('buy');\n  const [selectedOrders, setSelectedOrders] = useState([]);\n\n  // user balance\n  // const [userETHBalance, setUserETHBalance] = useState(BigNumber(0)); // in eth\n  const [baseAssetBalance, setBaseAssetBalance] = useState(BigNumber(0));\n  const [quoteAssetBalance, setQuoteAssetBalance] = useState(BigNumber(0));\n\n  // const [vault, setVault] = useState({});\n\n\n  // BaseAsset changeed: Update orderbook and base asset\n  useEffect(() => {\n    let isCancelled = false;\n\n    // update orderbook\n    const updateOrderBook = async () => {\n      const res = await getOrderBook(baseAsset.addr, quoteAsset.addr);\n      if (!isCancelled) {\n        setAsks(res.asks.records.filter((record) => isValid(record)));\n        setBids(res.bids.records.filter((record) => isValid(record)));\n      }\n    };\n\n    // update baseAsset Balance\n    const updateBaseBalance = async () => {\n      const baseBalance = await getTokenBalance(baseAsset.addr, user);\n      if (!isCancelled) {\n        setBaseAssetBalance(new BigNumber(baseBalance));\n      }\n    };\n\n    // const updateVaultData = async () => {\n    //   if (user === '') return;\n    //   const userVault = await getVault(user, baseAsset.addr);\n    //   if (!isCancelled) setVault(userVault);\n    // };\n    updateOrderBook();\n    updateBaseBalance();\n    // updateVaultData();\n    const idOrderBook = setInterval(updateOrderBook, 2000);\n    const idBaseBalance = setInterval(updateBaseBalance, 30000);\n    // const idUpdateVault = setInterval(updateVaultData, 10000);\n    return () => {\n      isCancelled = true;\n      clearInterval(idOrderBook);\n      clearInterval(idBaseBalance);\n      // clearInterval(idUpdateVault);\n    };\n  }, [baseAsset, user]);\n\n  // update quote asset\n  useEffect(() => {\n    let isCancelled = false;\n    const updateQuoteBalance = async () => {\n      if (user === '') return;\n      const quoteBalance = await getTokenBalance(quoteAsset.addr, user);\n      if (!isCancelled) {\n        setQuoteAssetBalance(new BigNumber(quoteBalance));\n      }\n    };\n    updateQuoteBalance();\n    const idQuoteAssetBalance = setInterval(updateQuoteBalance, 20000);\n    return () => {\n      isCancelled = true;\n      clearInterval(idQuoteAssetBalance);\n    };\n  }, [user]);\n\n  return (\n    <WholeScreen>\n      <FlexWrapper>\n        <LeftPart>\n          <Header />\n          <br />\n          <br />\n          <BuyAndSell\n            user={user}\n            baseAsset={baseAsset}\n            quoteAsset={quoteAsset}\n            collateral={baseAsset.collateral}\n\n            baseAssetBalance={baseAssetBalance}\n            quoteAssetBalance={quoteAssetBalance}\n\n            // vault={vault}\n\n            tradeType={tradeType}\n            setTradeType={setTradeType}\n\n            selectedOrders={selectedOrders}\n            setSelectedOrders={setSelectedOrders}\n          />\n        </LeftPart>\n        <RightPart>\n          {/* <Header primary=\"Trade ETH Options\" /> */}\n          <OptionBoard\n            quoteAsset={quoteAsset}\n            baseAsset={baseAsset}\n            setBaseAsset={setBaseAsset}\n            setTradeType={setTradeType}\n            setSelectedOrders={setSelectedOrders}\n          />\n          <br />\n          {/* <FixBottom> */}\n          <TabBoard\n            asks={asks}\n            bids={bids}\n            user={user}\n            option={baseAsset}\n            quoteAsset={quoteAsset}\n            tradeType={tradeType}\n            selectedOrders={selectedOrders}\n            setTradeType={setTradeType}\n            setSelectedOrders={setSelectedOrders}\n          />\n          {/* </FixBottom> */}\n        </RightPart>\n      </FlexWrapper>\n    </WholeScreen>\n  );\n}\n\nOptionTrading.propTypes = {\n  user: PropTypes.string.isRequired,\n  // theme: PropTypes.string.isRequired,\n};\n\n\nconst LeftPart = styled.div`\n  width: 20%;\n  padding-right: 1.5%;\n`;\n\nconst RightPart = styled.div`\n  width: 80%;\n`;\n\nconst WholeScreen = styled.div`\n  textAlign: center;\n  padding-left: 5%;\n  padding-right: 5%;\n  position:fixed;\n  overflow-y:scroll;\n  overflow-x:hidden;\n  left: 0;\n  bottom: 0;\n  top: 6%;\n  width: 100%;\n  overflow: auto\n`;\n\nconst FlexWrapper = styled.div`\n  display: flex;\n  height:87%\n`;\n\nexport default OptionTrading;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  TextInput, DataView, Button, LinkBase, EthIdenticon, useToast,\n} from '@aragon/ui';\nimport { getPreference, checkAddressAndAddToStorage } from '../../utils/storage';\n\nimport { Comment } from '../common';\nimport { isAddress } from '../../utils/number';\nimport { resolveENS } from '../../utils/infura';\n\nfunction PleaseLogin({ setWatchAddress }) {\n  const toast = useToast();\n  const [InAddress, setAddress] = useState('');\n  const watch_addrs = getPreference('watch_addresses', '[]');\n  const usedAddresses = JSON.parse(watch_addrs);\n\n  return (\n    <>\n      {/* <Header></Header> */}\n      <Comment text=\"Please connect wallet to proceed or enter an address to use Watch Mode.\" />\n      <br />\n      <br />\n      <p style={{ fontSize: 20 }}> Watch Mode </p>\n      <Comment text=\"You won't be able to interact with any smart contract under Watch Mode.\" />\n      <div style={{ display: 'flex' }}>\n        <div style={{ width: '50%' }}>\n          <TextInput\n            placeholder=\"Ethereum address or ENS\"\n            value={InAddress}\n            onChange={(e) => { setAddress(e.target.value.toLowerCase()); }}\n            wide\n          />\n\n          {usedAddresses.length > 0 ? (\n            <div style={{ paddingTop: '3%' }}>\n              <DataView\n                entries={usedAddresses.reverse()}\n                fields={['used']}\n                entriesPerPage={5}\n                renderEntry={(address) => [\n                  <LinkBase onClick={() => {\n                    setWatchAddress(address);\n                    checkAddressAndAddToStorage(address);\n                  }}\n                  >\n                    {/* <IdentityBadge entity={address} /> */}\n                    <EthIdenticon\n                      address={address}\n                      scale={1.3}\n                      radius={5}\n                    />\n                    <span style={{ paddingLeft: 8, fontSize: 15, fontFamily: 'aragon-ui-monospace' }}>{address}</span>\n                  </LinkBase>,\n                ]}\n              />\n            </div>\n          ) : <></>}\n        </div>\n        <div style={{ width: '8%', paddingLeft: '1%', paddingRight: '1%' }}>\n          <Button\n            label=\"Watch Address\"\n            onClick={async () => {\n              if (isAddress(InAddress)) {\n                setWatchAddress(InAddress);\n                checkAddressAndAddToStorage(InAddress);\n              } else {\n                try {\n                  const address = await resolveENS(InAddress);\n                  setWatchAddress(address);\n                  checkAddressAndAddToStorage(address);\n                } catch (error) {\n                  toast('Invalid Address');\n                }\n              }\n            }}\n          />\n        </div>\n      </div>\n    </>\n  );\n}\n\nPleaseLogin.propTypes = {\n  // watchAddres: PropTypes.string.isRequired,\n  setWatchAddress: PropTypes.func.isRequired,\n};\n\nexport default PleaseLogin;\n","// const prefix = 'https://cors-anywhere-anton.herokuapp.com/';\nconst opynGraphEndpoint = 'https://api.thegraph.com/subgraphs/name/aparnakr/opyn';\n\n/**\n * @return {Promise<Array<{colalteral: string, oTokensIssued: string, owner: string}>>}\n */\nexport async function getAllVaultsForOption(optionAddress) {\n  const query = `\n  {\n    vaults(where: {\n      optionsContract: \"${optionAddress}\"\n    }) {\n      owner\n      oTokensIssued,\n      collateral,\n    }\n  }`;\n  const response = await postQuery(query);\n  const vaults = response.data.vaults;\n  return vaults;\n}\n\nexport async function getAllVaultsForUser(owner) {\n  const query = `{\n    vaults (where: {owner: \"${owner}\"}) {\n      optionsContract {\n        address\n      }\n      oTokensIssued,\n      collateral,\n      underlying\n    }\n  }`;\n  const response = await postQuery(query);\n  const actions = response.data.vaults;\n  return actions;\n}\n\n/**\n * Return target vault or null\n * @param {string} owner\n * @param {string} option\n * @return {Promise<{underlying:string, colalteral:string, oTokensIssued:string}>}\n */\nexport async function getVault(owner, option) {\n  const query = `{\n    vault(\n     id: \"${option.toLowerCase()}-${owner.toLowerCase()}\"\n    ) {\n      underlying\n      collateral\n      oTokensIssued\n    }\n  }`;\n  const response = await postQuery(query);\n  return response.data.vault;\n}\n\nexport async function getLiquidationHistory(owner) {\n  const query = liquidationActionsQuery(owner);\n  const response = await postQuery(query);\n  return response.data.liquidateActions;\n}\n\nconst liquidationActionsQuery = (owner) => `{\n  liquidateActions(where: {\n    vault_contains: \"${owner}\"\n  }) {\n    vault {\n      owner,\n      optionsContract {\n        address\n      }\n    },\n    liquidator,\n    collateralToPay,\n    timestamp\n    transactionHash\n  }\n}\n\n`;\n\n/**\n * Get all exercise history for one user\n * @param {string} owner vault owner\n * @param {string} option contract address\n * @return {Promise<{\n * amtCollateralToPay: string,\n * exerciser:string,\n * oTokensToExercise:string,\n * timestamp:string,\n * transactionHash: string}[]>}\n */\nexport async function getExerciseHistory(owner, option) {\n  const query = `{\n    exerciseActions (where: {\n      vault_contains: \"${owner}\"\n      optionsContract_contains: \"${option}\"\n    }) {\n      exerciser\n      oTokensToExercise\n      amtCollateralToPay\n      transactionHash\n      timestamp\n    }\n  }`;\n\n  const response = await postQuery(query);\n  return response.data.exerciseActions;\n}\n\n/**\n * get RemoveUnderlying Event history\n * @param {string} owner\n * @param {string} option\n * @return {Promise<{\n * amount:string, timestamp:string, transactionHash:string\n * }[]>}\n */\nexport async function getRemoveUnderlyingHistory(owner, option) {\n  const query = `{\n    removeUnderlyingActions(\n      where: {\n        vault_contains: \"${option}\"\n        owner: \"${owner}\"   \n      }\n    ) {\n      timestamp\n      transactionHash\n      amount\n    }\n  }`;\n  const response = await postQuery(query);\n  return response.data.removeUnderlyingActions;\n}\n\nconst postQuery = async (query) => {\n  const options = {\n    method: 'POST',\n    headers: { 'Content-Type': 'application/json' },\n    body: JSON.stringify({ query }),\n  };\n  const res = await fetch(opynGraphEndpoint, options);\n  return res.json();\n};\n","import BigNumber from 'bignumber.js';\nimport { getPrice } from './infura';\nimport { toBaseUnitBN } from './number';\n\n/**\n * Get strike value in collateral for ratio calculation.\n * @param {string} collateral address\n * @param {string} strike address\n * @param {string} oracle address\n * @param {number} collateralDecimals\n * @return {Promise<BigNumber>}\n */\nexport const calculateStrikeValueInCollateral = async (\n  collateral,\n  strike,\n  oracle,\n  collateralDecimals,\n) => {\n  const ETH_Address = '0x0000000000000000000000000000000000000000';\n  let strikeValueInCollateral;\n  if (collateral === ETH_Address) {\n    const strikeValueInWei = await getPrice(oracle, strike);\n    strikeValueInCollateral = new BigNumber(strikeValueInWei);\n  } else if (collateral === strike) {\n    // No collateral, like ETH option\n    strikeValueInCollateral = new BigNumber(10).pow(new BigNumber(collateralDecimals));\n  } else {\n    const strikeValueInWei = await getPrice(oracle, strike);\n    const collateralValueInWei = await getPrice(oracle, collateral);\n    strikeValueInCollateral = toBaseUnitBN(\n      parseInt(strikeValueInWei, 10) / parseInt(collateralValueInWei, 10),\n      collateralDecimals,\n    );\n  }\n  return strikeValueInCollateral;\n};\n\n/**\n *\n * @param {string|number|BigNumber} collateral number of collateral in base unit\n * @param {string|number|BigNumber} tokenIssued number of token in base unit\n * @param {string|number|BigNumber} strikePrice\n * @param {BigNumber} strikeValueInCollateral\n * @return {number}\n */\nexport const calculateRatio = (collateral, tokenIssued, strikePrice, strikeValueInCollateral) => {\n  if (tokenIssued === '0') return Infinity;\n  const colalteralBN = new BigNumber(collateral);\n  const tokenIssuedBN = new BigNumber(tokenIssued);\n  const strikePriceBN = new BigNumber(strikePrice);\n  // const strikeValueInCollateralBN = new BigNumber(strikeValueInCollateral.toString())\n  const result = colalteralBN.div(tokenIssuedBN).div(strikePriceBN).div(strikeValueInCollateral);\n  return result.toNumber();\n};\n","import React, { useState, useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory } from 'react-router-dom';\n\nimport {\n  Header,\n  Button,\n  Modal,\n  Card,\n  TextInput,\n  useToast,\n} from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  SectionTitle, OpenVaultButton, Comment, HelperText, WarningText,\n} from '../common';\nimport * as myType from '../types';\n\nimport { openVaultAddCollateralAndMint } from '../../utils/web3';\nimport { toBaseUnitBN } from '../../utils/number';\nimport { calculateStrikeValueInCollateral, calculateRatio } from '../../utils/calculation';\n\nfunction OpenVaultModal({ user, option }) {\n  const toast = useToast();\n  const history = useHistory();\n\n  const [opened, setOpened] = useState(false);\n\n  // for Open vault, add collateral and mint tokens\n  const [collateralAmt, setCollateralAmt] = useState(new BigNumber(0));\n  const [mintTokenAmt, setMintTokenAmt] = useState(new BigNumber(0));\n\n  const [strikeValueInCollateral, setStrikeValueInCollateral] = useState(new BigNumber(0));\n  const [ratio, setRatio] = useState(1);\n\n  useMemo(async () => {\n    if (!opened) return;\n    const strikeValueInColltrl = await calculateStrikeValueInCollateral(\n      option.collateral.addr,\n      option.strike.addr,\n      option.oracle,\n      option.collateral.decimals,\n    );\n    setStrikeValueInCollateral(strikeValueInColltrl);\n  },\n  [option, opened]);\n\n  //  when input changed\n  useEffect(() => {\n    // calculate new ratio\n    const newRatio = calculateRatio(\n      toBaseUnitBN(collateralAmt, option.collateral.decimals),\n      toBaseUnitBN(mintTokenAmt, option.decimals),\n      option.strikePrice,\n      strikeValueInCollateral,\n    );\n    setRatio(newRatio);\n  },\n  [collateralAmt, mintTokenAmt, strikeValueInCollateral, option]);\n\n  const onCollateralChange = (value) => {\n    if (!value) {\n      setCollateralAmt(new BigNumber(0));\n      return;\n    }\n    const amtBn = new BigNumber(value);\n    setCollateralAmt(amtBn);\n  };\n\n  const onMintTokenAmtChange = (value) => {\n    if (!value) {\n      setMintTokenAmt(new BigNumber(0));\n      return;\n    }\n    setMintTokenAmt(new BigNumber(value));\n  };\n\n  const mint = async () => {\n    if (ratio < option.minRatio) {\n      toast(`Collateral ratio must > ${option.minRatio}`);\n      return;\n    }\n    await openVaultAddCollateralAndMint(\n      option.addr,\n      option.collateral.addr,\n      toBaseUnitBN(collateralAmt, option.collateral.decimals).toString(),\n      toBaseUnitBN(mintTokenAmt, option.decimals).toString(),\n    );\n    history.push(`/manage/${option.addr}/${user}`);\n  };\n\n  const open = () => setOpened(true);\n  const close = () => setOpened(false);\n\n  return (\n    <>\n      {/* Button */}\n      <Button onClick={open} label=\"Open Vault\" />\n\n      {/* Modal */}\n      <Modal width={800} padding={50} visible={opened} onClose={close}>\n        <Header primary=\"Open Vault\" />\n        <Comment text=\"Select how you want to open a vault.\" />\n        {/* <div style={{ display: 'flex' }}> */}\n        {/* <div style={{ width: '30%' }}> */}\n        <Card height=\"300\" width=\"729\">\n          <SectionTitle title=\"Open Empty Vault\" />\n          <Comment text=\"You can add collateral and mint tokens later.\" />\n          <br />\n          <OpenVaultButton oToken={option.addr} user={user} goToMangePage />\n          <br />\n        </Card>\n        <br />\n\n        {/* Option C, Create, add and mint */}\n        <Card height=\"300\" width=\"729\">\n          <SectionTitle title=\"Add Collateral and Mint Tokens\" />\n          <Comment text=\"Open vault, add collateral and mint some options in one transaction.\" />\n          <div style={{ display: 'flex', paddingBottom: 15 }}>\n            <TextInput\n              type=\"number\"\n              value={collateralAmt.toNumber()}\n              onChange={(event) => onCollateralChange(event.target.value)}\n              adornmentPosition=\"end\"\n              adornment={option.collateral.symbol}\n            />\n            <div style={{ paddingLeft: 15 }}>\n              <TextInput\n                type=\"number\"\n                value={mintTokenAmt.toNumber()}\n                onChange={(event) => onMintTokenAmtChange(event.target.value)}\n                adornmentPosition=\"end\"\n                adornment={option.symbol}\n              />\n            </div>\n          </div>\n          { option.symbol.toLowerCase().includes('call')\n            ? <WarningText text={`1 ${option.collateral.symbol} can create ${option.strikePriceInUSD} ${option.symbol}`} />\n            : <></>}\n          <Button label=\"Mint\" onClick={mint} />\n          { ratio === Infinity\n            ? <> </>\n            : <HelperText label=\"Collateral Ratio \" amt={ratio.toString()} />}\n\n          <br />\n        </Card>\n      </Modal>\n    </>\n  );\n}\n\nOpenVaultModal.propTypes = {\n  user: PropTypes.string.isRequired,\n  option: myType.option.isRequired,\n};\n\nexport default OpenVaultModal;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\nimport {\n  Header, DataView, IdentityBadge,\n} from '@aragon/ui';\nimport NoWalletView from './NoWallet';\n\nimport { allOptions } from '../../constants/options';\nimport {\n  SectionTitle, ManageVaultButton, Comment, CheckBox,\n} from '../common';\nimport {\n  formatDigits, compareVaultRatio, toTokenUnitsBN,\n} from '../../utils/number';\nimport { getAllVaultsForUser } from '../../utils/graph';\nimport { getPreference, storePreference } from '../../utils/storage';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\nimport tracker from '../../utils/tracker';\nimport OpenVaultModal from './OpenVaultModal';\n\nconst Promise = require('bluebird');\n\nfunction MyVaults({ user }) {\n  useEffect(() => {\n    tracker.pageview('/myvaults/');\n  }, []);\n  const [opendVaults, setOpenedVaults] = useState([]);\n  const [tokensToOpen, setTokensToOpen] = useState([]);\n\n  const [isLoading, setIsLoading] = useState(true);\n  // enable not logged in user to use this feature\n  const [watchAddress, setWatchAddress] = useState('');\n  const isWatchMode = user === '' && watchAddress !== '';\n  const hasAddressConnected = user !== '' || watchAddress !== '';\n\n  // checkbox\n  const [showExpired, setShowExpired] = useState(getPreference('showExpired', '0') === '1');\n  const [showEmpty, setShowEmpty] = useState(getPreference('showEmpty', '1') === '1');\n\n  const displayVaults = opendVaults\n    .filter((vault) => showExpired || vault.expiry * 1000 > Date.now())\n    .filter((vault) => showEmpty || new BigNumber(vault.collateral).gt(new BigNumber(0)));\n\n  // Only request all vaults once\n  useMemo(async () => {\n    if (!hasAddressConnected) return;\n    const userVaults = await getAllVaultsForUser(isWatchMode ? watchAddress : user);\n    const openedVaults = [];\n    const notOpenedTokens = [];\n    await Promise.map(allOptions, async (option) => {\n      const entry = userVaults.find((vault) => vault.optionsContract.address === option.addr);\n      const isOpened = entry !== undefined;\n      if (isOpened) {\n        const strikeValueInCollateral = await calculateStrikeValueInCollateral(\n          option.collateral.addr,\n          option.strike.addr,\n          option.oracle,\n          option.collateral.decimals,\n        );\n        const ratio = calculateRatio(\n          entry.collateral,\n          entry.oTokensIssued,\n          option.strikePrice,\n          strikeValueInCollateral,\n        );\n        openedVaults.push({\n          oToken: option.addr,\n          oTokenName: option.title,\n          collateral: entry.collateral,\n          collateralDecimals: option.collateral.decimals,\n          expiry: option.expiry,\n          ratio,\n        });\n      } else if (option.expiry > (Date.now() / 1000)) {\n        // only put non-expired token to \"can open\" list\n        notOpenedTokens.push({\n          oToken: option.addr,\n          oTokenName: option.title,\n        });\n      }\n    });\n    setIsLoading(false);\n    setOpenedVaults(openedVaults.sort(compareVaultRatio));\n    setTokensToOpen(notOpenedTokens);\n  }, [user, watchAddress, hasAddressConnected, isWatchMode]);\n\n  return (\n    <>\n      <Header primary=\"My Vaults\" />\n      {hasAddressConnected ? (\n        <>\n          {opendVaults.length > 0 ? (\n            <div style={{ paddingBottom: '3%' }}>\n\n              <div style={{ display: 'flex' }}>\n                <SectionTitle title=\"Existing Vaults\" />\n                <div style={{ marginLeft: 'auto' }}>\n                  <div style={{ display: 'flex' }}>\n                    <CheckBox\n                      text=\"Expired\"\n                      checked={showExpired}\n                      onCheck={(checked) => {\n                        storePreference('showExpired', checked ? '1' : '0');\n                        setShowExpired(checked);\n                      }}\n                    />\n                    <CheckBox\n                      text=\"Empty\"\n                      checked={showEmpty}\n                      onCheck={(checked) => {\n                        storePreference('showEmpty', checked ? '1' : '0');\n                        setShowEmpty(checked);\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n\n              <DataView\n                fields={['Token', 'contract', 'collateral', 'Ratio', '']}\n                entries={displayVaults}\n                entriesPerPage={6}\n                renderEntry={({\n                  oToken, oTokenName, collateral, collateralDecimals, ratio,\n                }) => [\n                  oTokenName,\n                  <IdentityBadge entity={oToken} />,\n                  formatDigits(toTokenUnitsBN(collateral, collateralDecimals).toNumber(), 5),\n                  formatDigits(ratio, 4),\n                  <ManageVaultButton oToken={oToken} owner={isWatchMode ? watchAddress : user} />,\n                ]}\n              />\n            </div>\n          ) : isLoading ? (\n            <Comment text=\"Loading\" />\n          ) : (\n            <Comment text=\"No Opened Vaults\" />\n          )}\n          {tokensToOpen.length > 0 && !isWatchMode ? (\n            <div>\n              <SectionTitle title=\"Open new vaults\" />\n              <DataView\n                fields={['Token', 'contract', 'manage']}\n                entries={tokensToOpen}\n                renderEntry={({ oToken, oTokenName }) => {\n                  const option = allOptions.find((o) => o.addr === oToken);\n                  return [\n                    oTokenName,\n                    <IdentityBadge entity={oToken} shorten={false} />,\n                    <OpenVaultModal user={user} option={option} />,\n                  ];\n                }}\n              />\n            </div>\n          ) : (\n            <></>\n          )}\n        </>\n      ) : (\n        // Not connected to wallet\n        <NoWalletView\n          watchAddress={watchAddress}\n          setWatchAddress={setWatchAddress}\n        />\n      )}\n    </>\n  );\n}\n\nMyVaults.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default MyVaults;\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\n\nimport {\n  Header,\n  Button,\n  Modal,\n  Box,\n  Split,\n  TextInput,\n  IdentityBadge,\n  DataView,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\n\nimport * as myType from '../types';\nimport { exercise } from '../../utils/web3';\nimport { PriceSection } from '../common';\nimport { getUnderlyingRequiredToExercise, getBalance, getTokenBalance } from '../../utils/infura';\nimport {\n  toTokenUnitsBN, toBaseUnitBN, formatDigits, compareVaultIssued,\n} from '../../utils/number';\n\nimport { ETH_ADDRESS } from '../../constants/contracts';\nimport { allOptions } from '../../constants/options';\n\nfunction ExerciseModal({\n  user,\n  token,\n  vaults,\n}) {\n  const option = allOptions.find((o) => o.addr === token);\n  const underlyingIsETH = option.underlying.addr === ETH_ADDRESS;\n  const [userUnderlyingBalance, setUserUnderlyingBalance] = useState(new BigNumber(0));\n  const [userOTokenBalance, setUserOTokenBalance] = useState(new BigNumber(0));\n\n  const [opened, setOpened] = useState(false);\n\n  const [exerciseAmount, setExerciseAmount] = useState(new BigNumber(0));\n  const [underlyringRequired, setUnderlyringRequired] = useState(new BigNumber(0));\n\n  const nonEmptyVaults = vaults\n    .filter((vault) => parseInt(vault.collateral, 10) > 0)\n    .sort(compareVaultIssued);\n\n  const [selectedIndexes, setSelectedIndexes] = useState([]);\n  const [selectedHasEnoughCollateral, setHasEnoughCollateral] = useState(false);\n\n  const open = () => setOpened(true);\n  const close = () => setOpened(false);\n\n  // Update user balance\n  useMemo(async () => {\n    if (!user) return;\n    if (!opened) return;\n    let userUnderlying;\n    if (underlyingIsETH) {\n      userUnderlying = new BigNumber(await getBalance(user));\n    } else {\n      userUnderlying = toTokenUnitsBN(\n        await getTokenBalance(option.underlying.addr, user),\n        option.underlying.decimals,\n      );\n    }\n    const userOTkns = toTokenUnitsBN(await getTokenBalance(option.addr, user), option.decimals);\n\n    setUserUnderlyingBalance(userUnderlying);\n    setUserOTokenBalance(userOTkns);\n  }, [option, underlyingIsETH, user, opened]);\n\n  const onSelectEntries = (entries, indexes) => {\n    setSelectedIndexes(indexes);\n    checkHasEnoughToken(entries);\n  };\n\n  /**\n   * Set selectedHasEnoughCollateral according to selected entries\n   * @param {{oTokenIssued: string}[]} entries\n   */\n  const checkHasEnoughToken = (entries) => {\n    const sumIssued = entries.reduce(\n      (accumulator, current) => accumulator.plus(new BigNumber(current.oTokensIssued)), new BigNumber(0),\n    );\n    if (sumIssued.gt(new BigNumber(0)) && sumIssued.gte(toBaseUnitBN(exerciseAmount, option.decimals))) {\n      setHasEnoughCollateral(true);\n    } else {\n      setHasEnoughCollateral(false);\n    }\n  };\n\n  const onChangeExerciseAmt = async (amount) => {\n    if (!amount) {\n      setExerciseAmount(new BigNumber(0));\n      setUnderlyringRequired(new BigNumber(0));\n      return;\n    }\n    const exeAmtBN = new BigNumber(amount);\n    setExerciseAmount(exeAmtBN);\n    const underlyingRawAmt = await getUnderlyingRequiredToExercise(\n      option.addr,\n      toBaseUnitBN(exeAmtBN, option.decimals).toString(),\n    );\n    const underlyingRequired = toTokenUnitsBN(underlyingRawAmt, option.underlying.decimals);\n    setUnderlyringRequired(underlyingRequired);\n\n    // check current selection has enought tokens\n    const entries = selectedIndexes.map((index) => nonEmptyVaults[index]);\n    checkHasEnoughToken(entries);\n  };\n\n  return (\n    <>\n      {/* Button */}\n      <Button onClick={open} label=\"Claim\" />\n\n      {/* Modal */}\n      <Modal width={800} padding={50} visible={opened} onClose={close}>\n        <Header\n          primary=\"Exercise Option\"\n          secondary={(\n            <div style={{ display: 'flex' }}>\n              <PriceSection\n                label=\"Balance:\"\n                amt={userOTokenBalance.toNumber()}\n                symbol={option.symbol}\n                forceDisplay\n              />\n              <PriceSection label=\" +\" amt={userUnderlyingBalance.toNumber()} symbol={option.underlying.symbol} />\n            </div>\n          )}\n        />\n        <Box heading=\"Amount to Exercise\">\n          <Split\n            primary={(\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  adornment={option.symbol}\n                  adornmentPosition=\"end\"\n                  value={exerciseAmount.toNumber()}\n                  onChange={(event) => onChangeExerciseAmt(event.target.value)}\n                />\n              </>\n            )}\n            secondary={(\n              <div style={{ paddingTop: 5 }}>\n                <PriceSection\n                  label=\"+ Underlyring\"\n                  amt={underlyringRequired.toNumber()}\n                  symbol={option.underlying.symbol}\n                />\n              </div>\n            )}\n          />\n        </Box>\n        <DataView\n          mode=\"table\"\n          renderSelectionCount={(count) => `${count} vaults selected`}\n          fields={['Owner', 'Issued', 'collateral']}\n          entries={nonEmptyVaults}\n          entriesPerPage={5}\n          selection={selectedIndexes}\n          onSelectEntries={onSelectEntries}\n          renderEntry={({ owner, collateral, oTokensIssued }) => [\n            <IdentityBadge entity={owner} />,\n            formatDigits(toTokenUnitsBN(oTokensIssued, option.decimals).toNumber(), 5),\n            formatDigits(toTokenUnitsBN(collateral, option.collateral.decimals).toNumber(), 5),\n          ]}\n        />\n        <br />\n        <Button\n          label=\"Exercise\"\n          disabled={!selectedHasEnoughCollateral}\n          wide\n          onClick={async () => {\n            const vaultowners = selectedIndexes.map((index) => vaults[index].owner);\n            exercise(\n              option.addr,\n              option.underlying.addr,\n              toBaseUnitBN(exerciseAmount, option.decimals).toString(),\n              vaultowners,\n            );\n          }}\n        />\n      </Modal>\n    </>\n  );\n}\n\nExerciseModal.propTypes = {\n  user: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  vaults: PropTypes.arrayOf(myType.vault).isRequired,\n};\n\nexport default ExerciseModal;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Header,\n  Button,\n  Modal,\n  Box,\n  Split,\n  TextInput,\n  IdentityBadge,\n  IconEthereum,\n  IconConnect,\n  DataView,\n  useToast,\n  Tag,\n} from '@aragon/ui';\n\nimport * as MyPTypes from '../types';\nimport { RatioTag, Comment } from '../common';\n\nimport {\n  liquidate,\n  addERC20Collateral,\n  addETHCollateral,\n  kollateralLiquidate,\n} from '../../utils/web3';\nimport { getMaxLiquidatable } from '../../utils/infura';\nimport { toTokenUnitsBN, toBaseUnitBN, formatDigits } from '../../utils/number';\nimport { KETH, DAI, USDC } from '../../constants/contracts';\n\n/**\n *\n * @param {{\n * option:{\n * decimals:number,\n * exchange:string, collateral:{ addr:string, decimals: number, symbol:string}, symbol:string }\n * oTokensIssued: string,\n * collateralAmount: string,\n * exchange:string}} param0\n */\nfunction VaultModal({\n  option,\n  useCollateral,\n  owner,\n  collateral, // amount of collateral of this vault\n  oTokensIssued,\n  isSafe,\n  ratio,\n  collateralIsETH,\n}) {\n  const toast = useToast();\n  const [opened, setOpened] = useState(false);\n  const [addValue, setAddValue] = useState(0);\n  const [liquidateAmt, setLiquidateAmt] = useState(0);\n  const open = () => setOpened(true);\n  const close = () => setOpened(false);\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function getData() {\n      if (!opened) return;\n      if (!useCollateral) return;\n      const maxLiquidatable = await getMaxLiquidatable(option.addr, owner);\n      if (!isCancelled) {\n        setLiquidateAmt(toTokenUnitsBN(maxLiquidatable, option.decimals).toNumber());\n      }\n    }\n    getData();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [option, opened, owner, useCollateral]);\n\n  return (\n    <>\n      <Button onClick={open} label=\"More\" />\n      <Modal width={900} padding={50} visible={opened} onClose={close}>\n        <Header primary=\"Access Position\" />\n\n        <DataView\n          fields={['Owner', 'Collateral', 'Issued', 'ratio', 'Status']}\n          entries={[{\n            collateral, isSafe, oTokensIssued, ratio, owner,\n          }]}\n          entriesPerPage={1}\n          renderEntry={(vault) => [\n            <IdentityBadge entity={vault.owner} shorten />,\n            formatDigits(toTokenUnitsBN(vault.collateral, option.collateral.decimals), 5),\n            formatDigits(toTokenUnitsBN(vault.oTokensIssued, option.decimals), 5),\n            formatDigits(vault.ratio, 4),\n            RatioTag({ isSafe: vault.isSafe, ratio, useCollateral }),\n          ]}\n        />\n\n        <br />\n        <Box heading=\"Add Collateral\">\n          <Split\n            primary={(\n              <TextInput\n                type=\"number\"\n                wide\n                adornment={<IconEthereum />}\n                adornmentPosition=\"end\"\n                value={addValue}\n                onChange={(event) => {\n                  setAddValue(event.target.value);\n                }}\n              />\n            )}\n            secondary={(\n              <Button\n                label=\"Add Collateral\"\n                wide\n                onClick={() => {\n                  if (collateralIsETH) {\n                    addETHCollateral(option.addr, owner, addValue);\n                  } else {\n                    addERC20Collateral(\n                      option.collateral.addr,\n                      option.addr,\n                      owner,\n                      toBaseUnitBN(addValue, option.collateral.decimals).toString(),\n                    );\n                  }\n                }}\n              />\n            )}\n          />\n        </Box>\n\n        {useCollateral ? (\n          <Box heading=\"Liquidate\">\n            <Comment text={`Liquidate with your ${option.symbol}`} />\n            <Split\n              primary={(\n                <>\n                  <TextInput\n                    wide\n                    type=\"number\"\n                    value={liquidateAmt}\n                    onChange={(event) => {\n                      setLiquidateAmt(event.target.value);\n                    }}\n                  />\n                </>\n              )}\n              secondary={(\n                <>\n                  <Button\n                    wide\n                    disabled={isSafe}\n                    label=\"Liquidate\"\n                    onClick={() => {\n                      liquidate(option.addr, owner, toBaseUnitBN(liquidateAmt, option.decimals)).catch(\n                        (error) => {\n                          toast(error.toString());\n                        },\n                      );\n                    }}\n                  />\n                </>\n              )}\n            />\n            <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center' }}>\n              <Comment text=\" Or \" />\n            </div>\n            <Comment text={(\n              <>\n                <Tag> beta </Tag>\n                Liquidate with Kollateral Flashloan\n              </>\n              )}\n            />\n\n            <div style={{ display: 'flex' }}>\n              <Button\n                icon={<IconConnect />}\n                label=\"DAI\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(option.addr, option.exchange, owner, DAI).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n                selected\n              />\n              <Button\n                icon={<IconConnect />}\n                label=\"USDC\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(option.addr, option.exchange, owner, USDC).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n              />\n              <Button\n                icon={<IconConnect />}\n                label=\"ETH\"\n                disabled={isSafe}\n                onClick={() => {\n                  kollateralLiquidate(option.addr, option.exchange, owner, KETH).catch((error) => {\n                    toast(error.toString());\n                  });\n                }}\n                wide\n              />\n            </div>\n          </Box>\n        ) : (\n          <></>\n        )}\n      </Modal>\n    </>\n  );\n}\n\nVaultModal.propTypes = {\n  option: MyPTypes.option.isRequired,\n  useCollateral: PropTypes.bool.isRequired,\n  owner: PropTypes.string.isRequired,\n  collateral: PropTypes.string.isRequired,\n  isSafe: PropTypes.bool.isRequired,\n  oTokensIssued: PropTypes.string.isRequired,\n  ratio: PropTypes.number.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n};\n\nexport default VaultModal;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { DataView, IdentityBadge } from '@aragon/ui';\nimport VaultModal from './VaultModal';\nimport { SectionTitle, RatioTag } from '../common';\nimport * as MyPTypes from '../types';\nimport {\n  formatDigits, compareVaultRatio, compareVaultIssued, toTokenUnitsBN,\n} from '../../utils/number';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\nimport { allOptions } from '../../constants/options';\n\nfunction VaultOwnerList({\n  user, token, vaults, collateralIsETH,\n}) {\n  const option = allOptions.find((o) => o.addr === token);\n  const vaultUsesCollateral = option.collateral.addr !== option.strike.addr;\n\n  const [isLoading, setIsLoading] = useState(true);\n  const [vaultsWithDetail, setVaultDetail] = useState([]);\n\n  const [page, setPage] = useState(0);\n\n  useEffect(() => {\n    let isCancelled = false;\n    const updateInfo = async () => {\n      if (vaults.length === 0) return;\n      const {\n        strike, minRatio, strikePrice, oracle, collateral,\n      } = option;\n\n      const strikeValueInCollateral = await calculateStrikeValueInCollateral(\n        collateral.addr,\n        strike.addr,\n        oracle,\n        collateral.decimals,\n      );\n      const vaultDetail = vaults\n        .map((vault) => {\n          if (vault.oTokensIssued === '0') {\n            return {\n              owner: vault.owner,\n              oTokensIssued: vault.oTokensIssued,\n              collateral: vault.collateral,\n              ratio: Infinity,\n              useCollateral: vaultUsesCollateral,\n              isSafe: true,\n            };\n          }\n          const ratio = calculateRatio(\n            vault.collateral,\n            vault.oTokensIssued,\n            strikePrice,\n            strikeValueInCollateral,\n          );\n          return {\n            owner: vault.owner,\n            oTokensIssued: vault.oTokensIssued,\n            collateral: vault.collateral,\n            ratio,\n            useCollateral: vaultUsesCollateral,\n            isSafe: ratio > minRatio,\n          };\n        })\n        .sort(vaultUsesCollateral ? compareVaultRatio : compareVaultIssued);\n\n      if (!isCancelled) {\n        setVaultDetail(vaultDetail);\n        setIsLoading(false);\n      }\n    };\n\n    updateInfo();\n    const id = setInterval(updateInfo, 60000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [collateralIsETH, option, user, vaultUsesCollateral, vaults]);\n\n  return (\n    <>\n      <SectionTitle title=\"All Vaults\" />\n      <DataView\n        page={page}\n        onPageChange={setPage}\n        status={isLoading ? 'loading' : 'default'}\n        fields={['Owner', 'collateral', 'Issued', 'RATIO', 'Status', '']}\n        entries={vaultsWithDetail}\n        entriesPerPage={5}\n        renderEntry={({\n          owner, collateral, oTokensIssued, ratio, isSafe, useCollateral,\n        }) => [\n          <IdentityBadge entity={owner} shorten />,\n          formatDigits(\n            toTokenUnitsBN(collateral, option.collateral.decimals).toNumber(),\n            6,\n          ),\n          formatDigits(\n            toTokenUnitsBN(oTokensIssued, option.decimals).toNumber(),\n            6,\n          ),\n          formatDigits(ratio, 5),\n          RatioTag({ isSafe, ratio, useCollateral }),\n          <VaultModal\n            option={option}\n            owner={owner}\n            collateral={collateral}\n            isSafe={isSafe}\n            useCollateral={useCollateral}\n            collateralIsETH={collateralIsETH}\n            oTokensIssued={oTokensIssued}\n            ratio={ratio}\n          />,\n        ]}\n      />\n    </>\n  );\n}\n\nVaultOwnerList.propTypes = {\n  user: PropTypes.string.isRequired,\n  vaults: PropTypes.arrayOf(MyPTypes.vault).isRequired,\n  token: PropTypes.string.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n};\n\nexport default VaultOwnerList;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { Box, Split, IdentityBadge } from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\n\nimport { getTotalSupply, getBalance, getTokenBalance } from '../../utils/infura';\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { allOptions } from '../../constants/options';\n\nfunction OptionOverview({\n  token,\n  collateralIsETH,\n}) {\n  const option = allOptions.find((o) => o.addr === token);\n  const [totalCollateral, setTotalCollateral] = useState(new BigNumber(0));\n  const [totalSupply, setTotalSupply] = useState(new BigNumber(0));\n\n  useEffect(() => {\n    let isCancelled = false;\n    async function init() {\n      let totalCollt;\n      if (collateralIsETH) {\n        totalCollt = new BigNumber(await getBalance(option.addr));\n      } else {\n        const rawCollateralBalance = await getTokenBalance(option.collateral.addr, option.addr);\n        totalCollt = toTokenUnitsBN(rawCollateralBalance, option.collateral.decimals);\n      }\n      const supply = await getTotalSupply(option.addr);\n      if (!isCancelled) {\n        setTotalCollateral(totalCollt);\n        setTotalSupply(toTokenUnitsBN(supply, option.decimals));\n      }\n    }\n    init();\n\n    return () => {\n      isCancelled = true;\n    };\n  }, [collateralIsETH, option]);\n\n  return (\n    <>\n      <Split\n        primary={(\n          <Split\n            primary={(\n              <Box heading=\"contract\" padding={15}>\n                <IdentityBadge entity={option.addr} shorten={false} />\n              </Box>\n            )}\n            secondary={(\n              <Box heading=\"Total Collateral\" padding={15}>\n                {totalCollateral.toFormat(4)}\n                {' '}\n                {option.collateral.symbol}\n              </Box>\n            )}\n          />\n        )}\n        secondary={(\n          <Box heading=\"total supply\" padding={15}>\n            {totalSupply.toFormat(4)}\n            {' '}\n            {option.symbol}\n          </Box>\n        )}\n      />\n    </>\n  );\n}\n\nOptionOverview.propTypes = {\n  token: PropTypes.string.isRequired,\n  collateralIsETH: PropTypes.bool.isRequired,\n};\n\nexport default OptionOverview;\n","import React, { useMemo, useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom';\nimport { Header } from '@aragon/ui';\n\nimport ExerciseModal from './ExerciseModal';\nimport VaultsList from './VaultsList';\nimport OptionInfoBox from './OptionInfoBox';\n\nimport { getAllVaultsForOption } from '../../utils/graph';\nimport tracker from '../../utils/tracker';\n\nimport { ETH_ADDRESS } from '../../constants/contracts';\nimport { allOptions } from '../../constants/options';\n\nfunction OptionPage({ user }) {\n  const { token } = useParams();\n  useEffect(() => {\n    tracker.pageview(`/option/${token}`);\n  }, [token]);\n\n  const option = allOptions.find((o) => o.addr === token);\n\n  const [vaults, setVaults] = useState([]);\n\n  const collateralIsETH = option.collateral.addr === ETH_ADDRESS;\n\n  useMemo(async () => {\n    // Get All vaults once\n    const allVaults = await getAllVaultsForOption(token);\n    setVaults(allVaults);\n  }, [token]);\n\n  return (\n    <>\n      <Header\n        primary={option.name}\n        secondary={(\n          <ExerciseModal\n            user={user}\n            token={token}\n            vaults={vaults}\n          />\n        )}\n      />\n      {/* Basic Info Header */}\n      <OptionInfoBox\n        token={token}\n        collateralIsETH={collateralIsETH}\n      />\n      {/* List of Vaults */}\n      <VaultsList\n        token={token}\n        user={user}\n        vaults={vaults}\n        collateralIsETH={collateralIsETH}\n      />\n    </>\n  );\n}\n\nOptionPage.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default OptionPage;\n","import React from 'react';\n\nimport PropTypes from 'prop-types';\nimport { BalanceBlock, RatioTag, HelperText } from '../common';\nimport { formatDigits, toTokenUnitsBN } from '../../utils/number';\nimport * as MyPTypes from '../types';\n\nconst HeaderDashboard = ({\n  ratio,\n  minRatio,\n  symbol,\n  vault,\n  decimals,\n  newRatio,\n  collateralDecimals,\n  useCollateral,\n}) => {\n  const tokenInUnit = vault.oTokensIssued\n    ? toTokenUnitsBN(vault.oTokensIssued, decimals).toNumber()\n    : '0';\n  const collateralBalance = vault.collateral\n    ? toTokenUnitsBN(vault.collateral, collateralDecimals).toString()\n    : '0';\n\n  return (\n    <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n      <div style={{ width: '30%' }}>\n        <BalanceBlock asset=\"Total Collateral\" balance={formatDigits(collateralBalance, 6)} />\n      </div>\n      <div style={{ width: '50%' }}>\n        <BalanceBlock asset={`${symbol} Issued`} balance={tokenInUnit.toString()} />\n      </div>\n      <div style={{ width: '20%' }}>\n        <>\n          <div style={{ fontSize: 14, padding: 3 }}>\n            Current Ratio\n            {' '}\n            {ratio > 0 ? (\n              <RatioTag isSafe={ratio >= minRatio} ratio={ratio} useCollateral={useCollateral} />\n            ) : (\n              <></>\n            )}\n          </div>\n          <div style={{ fontSize: 24, padding: 3 }}>\n            <span style={{ fontSize: 24 }}>{formatDigits(ratio, 5).split('.')[0]}</span>\n            .\n            <span style={{ fontSize: 18 }}>\n              {formatDigits(ratio, 5).split('.')[1]}\n              {' '}\n            </span>\n            {minRatio > 0 ? (\n              <span style={{ fontSize: 16 }}>\n                {' '}\n                /\n                {' '}\n                {minRatio}\n                {' '}\n              </span>\n            ) : ''}\n          </div>\n          <>\n            {' '}\n            {newRatio === ratio ? (\n              ''\n            ) : (\n              <HelperText label=\"New Ratio\" amt={newRatio.toString()} />\n            )}\n            {' '}\n          </>\n        </>\n      </div>\n    </div>\n  );\n};\n\nHeaderDashboard.propTypes = {\n  ratio: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  symbol: PropTypes.string.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  decimals: PropTypes.number.isRequired,\n  newRatio: PropTypes.number.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n  useCollateral: PropTypes.bool.isRequired,\n};\n\nexport default HeaderDashboard;\n","import React, { useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport { addETHCollateral, addERC20Collateral, removeCollateral } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton } from '../common';\n\nimport { formatDigits, toTokenUnitsBN, toBaseUnitBN } from '../../utils/number';\nimport { calculateRatio } from '../../utils/calculation';\nimport { ETH_ADDRESS } from '../../constants/contracts';\nimport * as MyPTypes from '../types';\n\n/**\n *\n * @param {{\n * isOwner: boolean,\n * strikePrice:number,\n * strikeValue:BigNumber,\n * collateralAssetBalance: BigNumber\n * collateral: {addr:string, symbol:string, decimals:number}\n * }} param0\n */\nfunction CollateralManagement({\n  isOwner,\n  vault,\n  collateral,\n  collateralAssetBalance, // Bignumber, / token unit\n  token,\n  owner,\n  strikeValue,\n  strikePrice,\n  minRatio,\n  setNewRatio,\n}) {\n  const [addCollateralAmt, setAddCollateralAmt] = useState(0); // in token unit\n  const [removeCollateralAmt, setRemoveCollateralAmt] = useState(0); // in token unit\n\n  const collateralIsETH = collateral.addr === ETH_ADDRESS;\n\n  /**\n   * @param {number} newCollateral in wei\n   */\n  // eslint-disable-next-line consistent-return\n  const updateNewRatio = (newCollateral) => {\n    if (!newCollateral || newCollateral <= 0) return 0;\n    const str = newCollateral.toString();\n    const newRatio = calculateRatio(str, vault.oTokensIssued, strikePrice, strikeValue);\n    setNewRatio(formatDigits(newRatio, 5));\n  };\n\n  return (\n    <Box heading=\"Collateral\">\n      <div style={{ display: 'flex' }}>\n        {/* balance */}\n        <div style={{ width: '30%' }}>\n          {BalanceBlock({\n            asset: `Your ${collateral.symbol} Balance`,\n            balance: formatDigits(collateralAssetBalance.toString(), 6),\n          })}\n        </div>\n        {/* Add collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={addCollateralAmt}\n                  onChange={(event) => {\n                    const amt = event.target.value;\n                    if (amt === '') {\n                      setAddCollateralAmt(0);\n                      return;\n                    }\n                    setAddCollateralAmt(amt);\n                    const amtRaw = toBaseUnitBN(amt, collateral.decimals);\n                    const newCollateralInWei = new BigNumber(vault.collateral).plus(amtRaw).toNumber();\n                    updateNewRatio(newCollateralInWei);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setAddCollateralAmt(collateralAssetBalance.toNumber());\n                    const collateralBalanceRaw = toBaseUnitBN(collateralAssetBalance, collateral.decimals);\n                    const newCollateral = new BigNumber(vault.collateral).plus(collateralBalanceRaw).toNumber();\n                    updateNewRatio(newCollateral);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Add\"\n                onClick={() => {\n                  if (collateralIsETH) {\n                    addETHCollateral(token, owner, addCollateralAmt);\n                  } else {\n                    addERC20Collateral(\n                      collateral.addr,\n                      token,\n                      owner,\n                      toBaseUnitBN(addCollateralAmt, collateral.decimals),\n                    );\n                  }\n                }}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={removeCollateralAmt}\n                  onChange={(event) => {\n                    const amt = event.target.value;\n                    if (amt === '') {\n                      setRemoveCollateralAmt(0);\n                      return;\n                    }\n                    setRemoveCollateralAmt(amt);\n                    const amtRaw = toBaseUnitBN(amt, collateral.decimals);\n                    const newCollateralWei = new BigNumber(vault.collateral).minus(amtRaw).toNumber();\n                    updateNewRatio(newCollateralWei);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    if (strikeValue.toNumber() <= 0) return;\n                    const strikePriceBN = new BigNumber(strikePrice);\n                    const tokenIssuedBN = new BigNumber(vault.oTokensIssued);\n                    const minRatioBN = new BigNumber(minRatio);\n                    const minCollateral = strikePriceBN.times(tokenIssuedBN).times(minRatioBN).times(strikeValue);\n                    // const minValueInStrike = strikePrice * vault.oTokensIssued * minRatio;\n                    // const minCollateral = minValueInStrike * strikeValue;\n                    const maxToRemove = new BigNumber(vault.collateral).minus(minCollateral).toString();\n                    const maxToRemoveInTokenUnit = toTokenUnitsBN(maxToRemove, collateral.decimals).toNumber();\n                    setRemoveCollateralAmt(maxToRemoveInTokenUnit);\n                    setNewRatio(minRatio);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Remove\"\n                onClick={() => {\n                  removeCollateral(\n                    collateral.addr,\n                    token,\n                    toBaseUnitBN(removeCollateralAmt, collateral.decimals).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nCollateralManagement.propTypes = {\n  isOwner: PropTypes.bool.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  collateral: MyPTypes.token.isRequired,\n  collateralAssetBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  owner: PropTypes.string.isRequired,\n  strikeValue: PropTypes.instanceOf(BigNumber).isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  setNewRatio: PropTypes.func.isRequired,\n};\n\nexport default CollateralManagement;\n","import React, { useState } from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport { burnOToken, issueOToken } from '../../utils/web3';\nimport { BalanceBlock, MaxButton, WarningText } from '../common';\nimport { toBaseUnitBN, toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio } from '../../utils/calculation';\nimport * as MyPTypes from '../types';\n/**\n *\n * @param {{\n * strikeValue: BigNumber,\n * tokenBalance: BigNumber,\n * strikePrice: Number,\n * decimals: Number\n * }} param0\n */\nfunction IssuedTokenManagement({\n  isOwner,\n  vault,\n  tokenBalance,\n  token,\n  strikeValue,\n  strikePrice,\n  minRatio,\n  decimals,\n  symbol,\n  setNewRatio,\n  strikePriceInUSD,\n  collateralSymbol,\n}) {\n  const [issueAmt, setIssueAmt] = useState(new BigNumber(0));\n  const [burnAmt, setBurnAmt] = useState(new BigNumber(0));\n\n  /**\n   *\n   * @param {BigNumber} newAmt in raw amt\n   */\n  const updateNewRatio = (newAmt) => {\n    if (newAmt.lte(new BigNumber(0))) return;\n    const newRatio = calculateRatio(vault.collateral, newAmt, strikePrice, strikeValue);\n    setNewRatio(newRatio);\n  };\n\n  const onChangeIssueAmt = (intputAmt) => {\n    if (!intputAmt) {\n      setIssueAmt(new BigNumber(0));\n      return;\n    }\n    const amountBN = new BigNumber(intputAmt);\n    setIssueAmt(amountBN);\n    updateNewRatio(new BigNumber(vault.oTokensIssued).plus(toBaseUnitBN(amountBN, decimals)));\n  };\n\n  const onClickIssueToken = () => {\n    issueOToken(\n      token,\n      toBaseUnitBN(issueAmt, decimals).toString(),\n    );\n  };\n\n  const onChangeBurnAmt = (intputAmt) => {\n    if (!intputAmt) {\n      setBurnAmt(new BigNumber(0));\n      return;\n    }\n    const amountBN = new BigNumber(intputAmt);\n    updateNewRatio(new BigNumber(vault.oTokensIssued).minus(toBaseUnitBN(amountBN, decimals)));\n    setBurnAmt(amountBN);\n  };\n\n  const onClickBurnToken = () => {\n    burnOToken(\n      token,\n      toBaseUnitBN(burnAmt, decimals).toString(),\n    );\n  };\n\n  return (\n    <Box heading=\"Total Issued\">\n      <div style={{ display: 'flex' }}>\n        {/* total Issued */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock\n            asset={`Owner ${symbol} Balance `}\n            balance={tokenBalance.toString()}\n          />\n        </div>\n        {/* Issue More Token */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={issueAmt}\n                  onChange={(event) => onChangeIssueAmt(event.target.value)}\n                />\n                <MaxButton\n                  onClick={() => {\n                    if (strikePrice <= 0) return;\n                    const maxTotal = new BigNumber(vault.collateral).div(\n                      new BigNumber(minRatio).times(new BigNumber(strikePrice)).times(strikeValue),\n                    );\n                    const maxToIssueRaw = maxTotal.minus(new BigNumber(vault.oTokensIssued));\n                    const maxToIssue = toTokenUnitsBN(maxToIssueRaw, decimals);\n                    setIssueAmt(maxToIssue);\n                    setNewRatio(minRatio);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Issue\"\n                onClick={onClickIssueToken}\n              />\n            </div>\n          </div>\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={burnAmt}\n                  onChange={(event) => onChangeBurnAmt(event.target.value)}\n                />\n                <MaxButton\n                  onClick={() => {\n                    const issued = toTokenUnitsBN(vault.oTokensIssued, decimals);\n                    const maxToBurn = tokenBalance.lt(issued) ? tokenBalance : issued; // min (issued, tokenBalance)\n                    setBurnAmt(maxToBurn);\n                    updateNewRatio(issued.minus(maxToBurn));\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                disabled={!isOwner}\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Burn\"\n                onClick={onClickBurnToken}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n      { symbol.toLowerCase().includes('call')\n        ? <WarningText text={`1 ${collateralSymbol} can create ${strikePriceInUSD} ${symbol}`} />\n        : <></>}\n    </Box>\n  );\n}\n\nIssuedTokenManagement.propTypes = {\n  isOwner: PropTypes.bool.isRequired,\n  vault: MyPTypes.vault.isRequired,\n  tokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  strikeValue: PropTypes.instanceOf(BigNumber).isRequired,\n  strikePrice: PropTypes.number.isRequired,\n  minRatio: PropTypes.number.isRequired,\n  decimals: PropTypes.number.isRequired,\n  symbol: PropTypes.string.isRequired,\n  setNewRatio: PropTypes.func.isRequired,\n  //\n  strikePriceInUSD: PropTypes.number.isRequired,\n  collateralSymbol: PropTypes.string.isRequired,\n};\n\nexport default IssuedTokenManagement;\n","import React, { useState, useMemo, useEffect } from 'react';\n\nimport {\n  Box, DataView, IdentityBadge, TransactionBadge, TextInput, Button,\n} from '@aragon/ui';\n\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\n\nimport { BalanceBlock, MaxButton } from '../common';\nimport { liquidate } from '../../utils/web3';\nimport { getMaxLiquidatable } from '../../utils/infura';\nimport { getLiquidationHistory } from '../../utils/graph';\nimport {\n  formatDigits, fromWei, toTokenUnitsBN, timeSince, toBaseUnitBN,\n} from '../../utils/number';\n\n/**\n *\n * @param {{userTokenBalance: BigNumber}} param0\n */\nfunction LiquidationHistory({\n  owner, token, isOwner, tokenDecimals, userTokenBalance,\n}) {\n  const [maxLiquidatable, setMaxLiquidatable] = useState(0);\n  const [isLoading, setIsLoading] = useState(true);\n  const [entries, setEntries] = useState([]);\n\n  const [amountToLiquidate, setAmtToLiquidate] = useState(0);\n\n  useEffect(() => {\n    async function updateLiquidatable() {\n      const maxToLiquidate = await getMaxLiquidatable(token, owner);\n      setMaxLiquidatable(toTokenUnitsBN(maxToLiquidate, tokenDecimals).toNumber());\n    }\n    updateLiquidatable();\n  }, [owner, token, tokenDecimals]);\n\n  useMemo(async () => {\n    async function updateList() {\n      const actions = await getLiquidationHistory(owner);\n      const actionsForThisVault = actions.filter(\n        (entry) => entry.vault.optionsContract.address === token,\n      ).sort((actionA, actionB) => {\n        if (actionA.timestamp > actionB.timestamp) return -1;\n        return 1;\n      });\n      setEntries(actionsForThisVault);\n      setIsLoading(false);\n    }\n    updateList();\n  }, [owner, token]);\n\n  return (\n    <>\n      {isOwner ? (\n        <></>\n      ) : (\n        <Box heading=\"Liquidate\">\n          <>\n            <div style={{ display: 'flex' }}>\n              {/* balance */}\n              <div style={{ width: '30%' }}>\n                <BalanceBlock asset=\"Max To Liquidate\" balance={maxLiquidatable} />\n              </div>\n              <div style={{ width: '70%', paddingTop: '2%' }}>\n                <div style={{ display: 'flex' }}>\n                  <div style={{ width: '60%' }}>\n                    <>\n                      <TextInput\n                        type=\"number\"\n                        wide\n                        value={amountToLiquidate}\n                        onChange={(event) => {\n                          setAmtToLiquidate(event.target.value);\n                        }}\n                      />\n                      <MaxButton\n                        onClick={() => {\n                          const maximum = Math.min(userTokenBalance.toNumber(), maxLiquidatable);\n                          setAmtToLiquidate(maximum);\n                        }}\n                      />\n                    </>\n                  </div>\n                  <div style={{ width: '40%' }}>\n                    <Button\n                      disabled={maxLiquidatable <= 0}\n                      label=\"Liquidate\"\n                      onClick={() => {\n                        const amtToLiquidate = toBaseUnitBN(\n                          amountToLiquidate,\n                          tokenDecimals,\n                        ).toString();\n                        liquidate(token, owner, amtToLiquidate);\n                      }}\n                    />\n                  </div>\n                </div>\n              </div>\n            </div>\n          </>\n        </Box>\n      )}\n\n      {/* History Section */}\n      <Box heading=\"History\">\n        <DataView\n          status={isLoading ? 'loading' : 'default'}\n          fields={['Tx', 'Amount', 'Liquidator', 'Date']}\n          entries={entries}\n          entriesPerPage={4}\n          renderEntry={({\n            collateralToPay, liquidator, timestamp, transactionHash,\n          }) => [\n            <TransactionBadge transaction={transactionHash} />,\n            formatDigits(fromWei(collateralToPay), 5),\n            <IdentityBadge entity={liquidator} />,\n            timeSince(parseInt(timestamp, 10) * 1000),\n          ]}\n        />\n      </Box>\n    </>\n  );\n}\n\nLiquidationHistory.propTypes = {\n  owner: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  isOwner: PropTypes.bool.isRequired,\n  tokenDecimals: PropTypes.number.isRequired,\n  userTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n};\nexport default LiquidationHistory;\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, DataView, IdentityBadge, TransactionBadge,\n} from '@aragon/ui';\n\n\nimport { getExerciseHistory } from '../../utils/graph';\nimport { formatDigits, toTokenUnitsBN, timeSince } from '../../utils/number';\n\nfunction ExerciseHistory({\n  owner, token, collateralDecimals, tokenDecimals,\n}) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [entries, setEntries] = useState([]);\n\n  useMemo(async () => {\n    const actions = await getExerciseHistory(owner, token);\n    setEntries(actions);\n    setIsLoading(false);\n  }, [owner, token]);\n\n  return (\n    <>\n      {/* History Section */}\n      <Box heading=\"History\">\n        <DataView\n          status={isLoading ? 'loading' : 'default'}\n          fields={['Tx', 'Collateral', 'oToken', 'Exerciser', 'Time']}\n          entries={entries}\n          entriesPerPage={4}\n          renderEntry={({\n            amtCollateralToPay, oTokensToExercise, exerciser, timestamp, transactionHash,\n          }) => [\n            <TransactionBadge transaction={transactionHash} />,\n            formatDigits(\n              toTokenUnitsBN(amtCollateralToPay, collateralDecimals).toNumber(),\n              5,\n            ),\n            formatDigits(\n              toTokenUnitsBN(oTokensToExercise, tokenDecimals).toNumber(),\n              5,\n            ),\n            <IdentityBadge entity={exerciser} />,\n            timeSince(parseInt(timestamp * 1000, 10)),\n          ]}\n        />\n      </Box>\n    </>\n  );\n}\n\nExerciseHistory.propTypes = {\n  owner: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  collateralDecimals: PropTypes.number.isRequired,\n  tokenDecimals: PropTypes.number.isRequired,\n};\n\nexport default ExerciseHistory;\n","import React, { useState, useMemo } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, DataView, Button, TransactionBadge,\n} from '@aragon/ui';\nimport { BalanceBlock } from '../common';\nimport { removeUnderlying } from '../../utils/web3';\nimport { getRemoveUnderlyingHistory } from '../../utils/graph';\nimport { formatDigits, toTokenUnitsBN, timeSince } from '../../utils/number';\n\nfunction RemoveUnderlying({\n  owner, token, underlyingDecimals, underlyingAmount,\n}) {\n  const [isLoading, setIsLoading] = useState(true);\n  const [entries, setEntries] = useState([]);\n\n  useMemo(async () => {\n    const actions = await getRemoveUnderlyingHistory(owner, token);\n    setEntries(actions);\n    setIsLoading(false);\n  }, [owner, token]);\n\n  return (\n    <>\n\n      <Box heading=\"Underlying\">\n        <div style={{ display: 'flex' }}>\n          {/* balance */}\n          <div style={{ width: '30%' }}>\n            {BalanceBlock({\n              asset: 'Redeemable',\n              balance: formatDigits(toTokenUnitsBN(underlyingAmount, underlyingDecimals), 6),\n            })}\n          </div>\n          <div style={{ width: '70%', padding: '2%' }}>\n            <Button\n              label=\"Redeem Underlying\"\n              onClick={() => { removeUnderlying(token); }}\n            />\n          </div>\n        </div>\n        <br />\n        <DataView\n          status={isLoading ? 'loading' : 'default'}\n          fields={['Tx', 'Amount', 'Timestamp']}\n          entries={entries}\n          entriesPerPage={4}\n          renderEntry={({\n            transactionHash, amount, timestamp,\n          }) => [\n            <TransactionBadge shorten={false} transaction={transactionHash} />,\n            formatDigits(\n              toTokenUnitsBN(amount, underlyingDecimals).toNumber(),\n              5,\n            ),\n            timeSince(parseInt(timestamp * 1000, 10)),\n          ]}\n        />\n      </Box>\n    </>\n  );\n}\n\nRemoveUnderlying.propTypes = {\n  owner: PropTypes.string.isRequired,\n  token: PropTypes.string.isRequired,\n  underlyingDecimals: PropTypes.number.isRequired,\n  underlyingAmount: PropTypes.string.isRequired,\n};\n\nexport default RemoveUnderlying;\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport {\n  Header, Tabs, Box, Timer, Button,\n} from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport HeaderDashboard from './HeaderDashboard';\nimport CollateralManagement from './CollateralManagement';\nimport IssuedTokenManagement from './IssuedTokenManagement';\nimport LiquidationHistory from './Liquidation';\nimport ExerciseHistory from './Exercise';\nimport UnderlyingManagement from './UnderlyingManagement';\n\nimport { Comment } from '../common';\n\nimport { toTokenUnitsBN } from '../../utils/number';\nimport { calculateRatio, calculateStrikeValueInCollateral } from '../../utils/calculation';\nimport { getTokenBalance, getBalance } from '../../utils/infura';\nimport { getVault } from '../../utils/graph';\nimport { redeem } from '../../utils/web3';\n\nimport { ETH_ADDRESS } from '../../constants/contracts';\nimport { allOptions } from '../../constants/options';\nimport tracker from '../../utils/tracker';\n\nfunction ManageVault({ user }) {\n  const { token, owner } = useParams();\n  useEffect(() => {\n    tracker.pageview(`/manage/${token}`);\n  }, [token]);\n\n  const option = allOptions.find((o) => o.addr === token);\n  const {\n    decimals, symbol, oracle, strike, strikePrice, minRatio,\n    collateral, expiry, underlying,\n  } = option;\n\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Tab Navigation\n  const [tabSelected, setTabSelected] = useState(0);\n\n  const [vault, setVault] = useState({});\n  const [strikeValueInCollateral, setStrikeValue] = useState(new BigNumber(0));\n  const [ratio, setRatio] = useState(0);\n\n  const [ownerTokenBalance, setOwnerTokenBalance] = useState(new BigNumber(0));\n  const [userTokenBalance, setUserTokenBalance] = useState(new BigNumber(0));\n  const [userCollateralAssetBalance, setUserCollateralAssetBalance] = useState(new BigNumber(0));\n\n  // status\n  const [noVault, setNoVault] = useState(true);\n  const [newRatio, setNewRatio] = useState(ratio);\n\n  const collateralIsETH = collateral.addr === ETH_ADDRESS;\n  const vaultUsesCollateral = collateral.addr !== strike.addr;\n\n  useMemo(() => {\n    let isCancelled = false;\n    async function updateInfo() {\n      const vaultToManage = await getVault(owner, token);\n      if (vaultToManage === null) {\n        setIsLoading(false);\n        return;\n      }\n\n      setNoVault(false);\n      const [_ownerTokenBalance, _userTokenBalance] = await Promise.all([\n        getTokenBalance(token, owner),\n        getTokenBalance(token, user),\n      ]);\n\n      // SetUserCollateralAmount\n      let collateralBalance = new BigNumber(0);\n      // let colltDecimals = 18;\n\n      if (collateralIsETH) {\n        collateralBalance = new BigNumber(await getBalance(user));\n      } else {\n        const userColltBalance = await getTokenBalance(collateral.addr, user);\n        collateralBalance = toTokenUnitsBN(userColltBalance, collateral.decimals);\n      }\n\n      const ownerTokenBalanceBN = toTokenUnitsBN(_ownerTokenBalance, decimals);\n      const userTokenBalanceBN = toTokenUnitsBN(_userTokenBalance, decimals);\n\n      const strikeValInCollt = await calculateStrikeValueInCollateral(\n        collateral.addr,\n        strike.addr,\n        oracle,\n        collateral.decimals,\n      );\n      const currentRatio = calculateRatio(\n        vaultToManage.collateral,\n        vaultToManage.oTokensIssued,\n        strikePrice,\n        strikeValInCollt,\n      );\n\n      if (!isCancelled) {\n        setStrikeValue(strikeValInCollt);\n        setVault(vaultToManage);\n        setOwnerTokenBalance(ownerTokenBalanceBN);\n        setUserTokenBalance(userTokenBalanceBN);\n        setRatio(currentRatio);\n        setUserCollateralAssetBalance(collateralBalance);\n        setIsLoading(false);\n      }\n    }\n    updateInfo();\n    const id = setInterval(updateInfo, 60000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [\n    collateral,\n    collateralIsETH,\n    decimals,\n    oracle,\n    owner,\n    strike,\n    strikePrice,\n    token,\n    user,\n  ]);\n\n  const isOwner = user === owner;\n\n  return noVault\n    ? isLoading ? (\n      <Comment text=\"Loading...\" />\n    )\n      : (\n        <Comment text=\"No Vault Found for this user under this contract\" />\n      ) : (\n        <>\n          <Header\n            primary={isOwner ? 'Manage My Vault' : 'Vault Detail'}\n            secondary={\n          expiry * 1000 > Date.now() ? (\n            <Timer end={new Date(expiry * 1000)} />\n          ) : (\n            <Button onClick={() => redeem(token)} label=\"Redeem\" />\n          )\n        }\n          />\n\n          <HeaderDashboard\n            owner={owner}\n            user={user}\n            ratio={ratio}\n            minRatio={minRatio}\n            vault={vault}\n            decimals={decimals}\n            symbol={symbol}\n            newRatio={newRatio}\n            useCollateral={vaultUsesCollateral}\n            collateralIsETH={collateralIsETH}\n            collateralDecimals={collateral.decimals}\n          />\n\n          <Tabs\n            items={['Collateral Management', 'Token Issuance', 'Liquidation', 'Exercise', 'Underlying Redemption']}\n            selected={tabSelected}\n            onChange={setTabSelected}\n          />\n\n          {tabSelected === 0 ? (\n            <CollateralManagement\n              isOwner={isOwner}\n              vault={vault}\n              collateralAssetBalance={userCollateralAssetBalance}\n              collateral={collateral}\n              token={token}\n              owner={owner}\n              strikeValue={strikeValueInCollateral}\n              strikePrice={strikePrice}\n              minRatio={minRatio}\n              setNewRatio={setNewRatio}\n            />\n          ) : (\n            <></>\n          )}\n\n          {tabSelected === 1 ? (\n            <IssuedTokenManagement\n              isOwner={isOwner}\n              vault={vault}\n              tokenBalance={ownerTokenBalance}\n              token={token}\n              strikeValue={strikeValueInCollateral}\n              strikePrice={strikePrice}\n              minRatio={minRatio}\n              decimals={decimals}\n              symbol={symbol}\n              setNewRatio={setNewRatio}\n              // for call heler text\n              strikePriceInUSD={option.strikePriceInUSD}\n              collateralSymbol={option.collateral.symbol}\n            />\n          ) : (\n            <></>\n          )}\n\n          {tabSelected === 2 ? (\n            vaultUsesCollateral ? (\n              <LiquidationHistory\n                userTokenBalance={userTokenBalance}\n                isOwner={isOwner}\n                owner={owner}\n                token={token}\n                tokenDecimals={decimals}\n              />\n            ) : (\n              <Box> This vault cannot be liquidated </Box>\n            )\n          ) : (\n            <></>\n          )}\n\n          {tabSelected === 3 ? (\n            <ExerciseHistory\n              owner={owner}\n              token={token}\n              tokenDecimals={decimals}\n              collateralDecimals={collateral.decimals}\n            />\n          ) : (\n            <></>\n          )}\n\n          {tabSelected === 4 ? (\n            <UnderlyingManagement\n              owner={owner}\n              token={token}\n              underlyingDecimals={underlying.decimals}\n              underlyingAmount={vault.underlying}\n            />\n          ) : <> </>}\n        </>\n    );\n}\n\nManageVault.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default ManageVault;\n","import React from 'react';\nimport BigNumber from 'bignumber.js';\nimport PropTypes from 'prop-types';\n\nimport { BalanceBlock, AddressBlock } from '../common';\n\n/**\n *\n * @param {{ poolTokenBalance: BigNumber, poolETHBalance: BigNumber }}\n */\nconst TradePageHeader = ({\n  symbol, poolETHBalance, poolTokenBalance, uniswapExchange,\n}) => (\n  <div style={{ padding: '2%', display: 'flex', alignItems: 'center' }}>\n    <div style={{ width: '30%' }}>\n      <BalanceBlock asset=\"Total ETH Liquidity\" balance={poolETHBalance} />\n    </div>\n    <div style={{ width: '30%' }}>\n      <BalanceBlock asset={`${symbol} Liquidity`} balance={poolTokenBalance} />\n    </div>\n    <div style={{ width: '40%' }}>\n      <>\n        <AddressBlock label=\"Uniswap Contract\" address={uniswapExchange} />\n      </>\n    </div>\n  </div>\n);\n\nTradePageHeader.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n};\n\nexport default TradePageHeader;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconCircleMinus,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport {\n  WarningText, BalanceBlock, MaxButton, PriceSection,\n} from '../common';\nimport { buyOTokensFromExchange, sellOTokensFromExchange } from '../../utils/web3';\n\nimport { getPremiumToPay, getPremiumReceived } from '../../utils/infura';\n\n\nimport { toBaseUnitBN, fromWei } from '../../utils/number';\n\n/**\n *\n * @param {{\n *  decimals: number\n *  tokenBalance: BigNumber\n * }} param0\n */\nfunction OptionExchange({\n  symbol, tokenBalance, token, exchange, decimals, strikePriceInUSD,\n}) {\n  const [buyAmt, setBuyAmt] = useState(new BigNumber(0));\n  const [sellAmt, setSellAmt] = useState(new BigNumber(0));\n  const [premiumToPay, setPremiumToPay] = useState(new BigNumber(0));\n  const [premiumReceived, setPremiumReceived] = useState(new BigNumber(0));\n\n  const updatePremiumToPay = async (amt) => {\n    const butAmountBN = new BigNumber(amt);\n    if (butAmountBN.lte(new BigNumber(0))) {\n      setPremiumToPay(new BigNumber(0));\n      return;\n    }\n    const amount = toBaseUnitBN(butAmountBN, decimals).toString();\n    const premium = await getPremiumToPay(exchange, token, amount);\n    setPremiumToPay(new BigNumber(fromWei(premium)));\n  };\n\n  const updatePremiumReceived = async (amt) => {\n    const sellAmountBN = new BigNumber(amt);\n    if (sellAmountBN.lte(new BigNumber(0))) {\n      setPremiumReceived(new BigNumber(0));\n      return;\n    }\n    const amount = toBaseUnitBN(sellAmountBN, decimals).toString();\n    const premium = await getPremiumReceived(exchange, token, amount);\n    setPremiumReceived(new BigNumber(premium));\n  };\n\n  return (\n    <Box heading=\"Exchange\">\n      <div style={{ display: 'flex' }}>\n        {/* total Issued */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset={`${symbol} Balance`} balance={tokenBalance} />\n        </div>\n        {/* Buy Token from Uniswap */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={buyAmt}\n                  onChange={(event) => {\n                    if (event.target.value) {\n                      setBuyAmt(event.target.value);\n                      updatePremiumToPay(event.target.value);\n                    } else {\n                      setBuyAmt(new BigNumber(0));\n                      updatePremiumToPay(new BigNumber(0));\n                    }\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Buy\"\n                onClick={() => {\n                  buyOTokensFromExchange(\n                    token,\n                    exchange,\n                    toBaseUnitBN(buyAmt, decimals).toString(),\n                    toBaseUnitBN(premiumToPay, 18).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <PriceSection label=\"Cost:\" amt={premiumToPay} symbol=\"\" />\n        </div>\n        <div style={{ width: '6%' }} />\n        {/* Remove collateral */}\n        <div style={{ width: '32%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '60%' }}>\n              <>\n                <TextInput\n                  type=\"number\"\n                  wide\n                  value={sellAmt}\n                  onChange={(event) => {\n                    if (event.target.value) {\n                      setSellAmt(event.target.value);\n                      updatePremiumReceived(event.target.value);\n                    } else {\n                      setSellAmt(new BigNumber(0));\n                      updatePremiumReceived(new BigNumber(0));\n                    }\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    setSellAmt(tokenBalance);\n                    updatePremiumReceived(tokenBalance);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '40%' }}>\n              <Button\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Sell\"\n                onClick={() => {\n                  sellOTokensFromExchange(\n                    token,\n                    exchange,\n                    toBaseUnitBN(sellAmt, decimals).toString(),\n                  );\n                }}\n              />\n            </div>\n          </div>\n          <PriceSection label=\"Premium\" amt={premiumReceived} />\n        </div>\n      </div>\n      { symbol.toLowerCase().includes('call')\n        ? <WarningText text={`Buy ${strikePriceInUSD} ${symbol} to hedge 1 ETH`} />\n        : <></> }\n    </Box>\n  );\n}\n\nOptionExchange.propTypes = {\n  symbol: PropTypes.string.isRequired,\n  strikePriceInUSD: PropTypes.number,\n  tokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  token: PropTypes.string.isRequired,\n  exchange: PropTypes.string.isRequired,\n  decimals: PropTypes.number.isRequired,\n};\n\nOptionExchange.defaultProps = {\n  strikePriceInUSD: 0,\n};\n\nexport default OptionExchange;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport BigNumber from 'bignumber.js';\nimport {\n  Box, TextInput, Button, IconCirclePlus, IconEthereum,\n} from '@aragon/ui';\nimport { addLiquidity } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton, PriceSection } from '../common';\nimport { toBaseUnitBN } from '../../utils/number';\n\n/**\n *\n * @param {{\n * poolTokenBalance: BigNumber,\n * poolETHBalance:BigNumber,\n * liquidityTokenSupply: BigNumber,\n * userTokenBalance: BigNumber,\n * userETHBalance:BigNumber\n * uniswapExchange: string\n * }} param0\n */\nfunction AddLiquidity({\n  otoken,\n  otokenSymbol,\n  otokenDecimals,\n  userTokenBalance,\n  userETHBalance,\n  uniswapExchange,\n  poolTokenBalance,\n  poolETHBalance,\n  liquidityTokenDecimals,\n  liquidityTokenSupply,\n}) {\n  const SLIPPAGE_RATE = 2;\n\n\n  const [amtETHToAdd, setAmtETHToAdd] = useState(new BigNumber(0));\n  const [amtTokenToAdd, setAmtTokenToAdd] = useState(new BigNumber(0));\n\n  const liquidityMinted = (liquidityTokenSupply.times(amtETHToAdd)).div(poolETHBalance);\n  const liquidityMintedMin = (liquidityMinted.times(new BigNumber(100 - SLIPPAGE_RATE))).div(new BigNumber(100));\n  const ethToTokenRatio = poolETHBalance.div(poolTokenBalance);\n  const tokenToEthRatio = poolTokenBalance.div(poolETHBalance);\n\n  const onChangeETHAmtToSend = (ethAmt) => {\n    if (!ethAmt) {\n      setAmtTokenToAdd(new BigNumber(0));\n      setAmtETHToAdd(new BigNumber(0));\n      return;\n    }\n\n    const newTokenAmt = (new BigNumber(ethAmt).times(tokenToEthRatio));\n    setAmtETHToAdd(new BigNumber(ethAmt));\n    setAmtTokenToAdd(newTokenAmt);\n  };\n\n  const onChangeTokenAmtToSend = (tokenAmt) => {\n    if (!tokenAmt) {\n      setAmtTokenToAdd(new BigNumber(0));\n      setAmtETHToAdd(new BigNumber(0));\n      return;\n    }\n\n    const newEthAmt = new BigNumber(tokenAmt).times(ethToTokenRatio);\n    setAmtETHToAdd(newEthAmt);\n    setAmtTokenToAdd(new BigNumber(tokenAmt));\n  };\n\n  return (\n    <Box heading=\"Add Liquidity\">\n      <div style={{ display: 'flex' }}>\n        {/* Pool Status */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset=\"ETH Balance\" balance={userETHBalance} />\n        </div>\n        {/* Add Liquidity too pool */}\n        <div style={{ width: '70%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <>\n                <TextInput\n                  adornmentPosition=\"end\"\n                  adornment={otokenSymbol}\n                  type=\"number\"\n                  wide\n                  value={amtTokenToAdd.toNumber()}\n                  onChange={(event) => {\n                    onChangeTokenAmtToSend(event.target.value);\n                  }}\n                />\n                <MaxButton\n                  onClick={() => {\n                    onChangeTokenAmtToSend(userTokenBalance);\n                  }}\n                />\n              </>\n            </div>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <TextInput\n                adornmentPosition=\"end\"\n                adornment={<IconEthereum />}\n                type=\"number\"\n                wide\n                value={amtETHToAdd.toNumber()}\n                onChange={(event) => {\n                  onChangeETHAmtToSend(event.target.value);\n                }}\n              />\n              <PriceSection label=\"Mint\" amt={liquidityMinted} symbol=\"Pool Tokens\" />\n            </div>\n            <div style={{ width: '30%' }}>\n              <Button\n                wide\n                icon={<IconCirclePlus />}\n                label=\"Add Liquidity\"\n                onClick={() => {\n                  const maxToken = toBaseUnitBN(amtTokenToAdd, otokenDecimals).toString();\n                  const minLiquidity = toBaseUnitBN(liquidityMintedMin, liquidityTokenDecimals).toString();\n                  const ethWei = toBaseUnitBN(amtETHToAdd, 18).toString();\n                  addLiquidity(\n                    otoken,\n                    uniswapExchange,\n                    maxToken,\n                    minLiquidity,\n                    ethWei,\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nAddLiquidity.propTypes = {\n  otoken: PropTypes.string.isRequired,\n  otokenSymbol: PropTypes.string.isRequired,\n  otokenDecimals: PropTypes.number.isRequired,\n  userTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  userETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  liquidityTokenDecimals: PropTypes.number.isRequired,\n  liquidityTokenSupply: PropTypes.instanceOf(BigNumber).isRequired,\n};\n\nexport default AddLiquidity;\n","import React, { useState } from 'react';\nimport PropTypes from 'prop-types';\nimport {\n  Box, TextInput, Button, IconCircleMinus, IconFundraising,\n} from '@aragon/ui';\nimport BigNumber from 'bignumber.js';\nimport { removeLiquidity } from '../../utils/web3';\n\nimport { BalanceBlock, MaxButton, PriceSection } from '../common';\nimport { toBaseUnitBN } from '../../utils/number';\n\n/**\n *\n * @param {{\n *  otokenDecimals: number,\n *  liquidityTokenDecimals: number,\n *  otokenSymbol: string,\n *  uniswapExchange: string\n *  userliquidityTokenBalance: BigNumber\n *  poolTokenBalance: BigNumber\n *  poolETHBalance: BigNumber\n *  liquidityTokenDecimals: BigNumber\n *  liquidityTokenSupply: BigNumber\n *\n * }} param0\n */\nfunction RemoveLiquidity({\n  otokenSymbol,\n  otokenDecimals,\n  userliquidityTokenBalance,\n  uniswapExchange,\n  poolTokenBalance,\n  poolETHBalance,\n  liquidityTokenDecimals,\n  liquidityTokenSupply,\n}) {\n  const SLIPPAGE_RATE = 2;\n\n  const [amtLiquidityTokenToSell, setAmtLiquidityTokenToSell] = useState(new BigNumber(0));\n\n  const poolPortion = amtLiquidityTokenToSell.div(liquidityTokenSupply);\n  const estETHRecieved = poolETHBalance.times(poolPortion);\n  const estOTokenReceived = poolTokenBalance.times(poolPortion);\n\n  const minETHReceived = estETHRecieved.times(new BigNumber(100 - SLIPPAGE_RATE)).div(new BigNumber(100));\n  const minTokenReceived = estOTokenReceived.times(new BigNumber(100 - SLIPPAGE_RATE)).div(new BigNumber(100));\n  const onChangeTokenAmtToSend = (tokenAmt) => {\n    if (!tokenAmt) {\n      setAmtLiquidityTokenToSell(new BigNumber(0));\n      return;\n    }\n    const tokenAmtBN = new BigNumber(tokenAmt);\n    setAmtLiquidityTokenToSell(tokenAmtBN);\n  };\n\n  return (\n    <Box heading=\"Remove Liquidity\">\n      <div style={{ display: 'flex' }}>\n        {/* Pool Token in Hold */}\n        <div style={{ width: '30%' }}>\n          <BalanceBlock asset=\"Pool Token Balance\" balance={userliquidityTokenBalance} />\n        </div>\n        {/* Remove */}\n        <div style={{ width: '70%', paddingTop: '2%' }}>\n          <div style={{ display: 'flex' }}>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <TextInput\n                adornmentPosition=\"end\"\n                adornment={<IconFundraising />}\n                type=\"number\"\n                wide\n                value={amtLiquidityTokenToSell.toNumber()}\n                onChange={(event) => {\n                  onChangeTokenAmtToSend(event.target.value);\n                }}\n              />\n              <MaxButton\n                onClick={() => setAmtLiquidityTokenToSell(userliquidityTokenBalance)}\n              />\n            </div>\n            <div style={{ width: '35%', marginRight: '5%' }}>\n              <>\n                <PriceSection label=\"You get\" amt={estETHRecieved} symbol=\"ETH\" />\n                <PriceSection label=\"+\" amt={estOTokenReceived} symbol={otokenSymbol} />\n              </>\n            </div>\n            <div style={{ width: '30%' }}>\n              <Button\n                wide\n                icon={<IconCircleMinus />}\n                label=\"Remove Liquidity\"\n                onClick={() => {\n                  const amt = toBaseUnitBN(amtLiquidityTokenToSell, liquidityTokenDecimals).toString();\n                  const min_eth = toBaseUnitBN(minETHReceived, 18).toString();\n                  const min_token = toBaseUnitBN(minTokenReceived, otokenDecimals).toString();\n\n                  removeLiquidity(\n                    uniswapExchange,\n                    amt,\n                    min_eth,\n                    min_token,\n                  );\n                }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n    </Box>\n  );\n}\n\nRemoveLiquidity.propTypes = {\n  otokenSymbol: PropTypes.string.isRequired,\n  otokenDecimals: PropTypes.number.isRequired,\n  userliquidityTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  uniswapExchange: PropTypes.string.isRequired,\n  poolTokenBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  poolETHBalance: PropTypes.instanceOf(BigNumber).isRequired,\n  liquidityTokenDecimals: PropTypes.number.isRequired,\n  liquidityTokenSupply: PropTypes.instanceOf(BigNumber).isRequired,\n};\n\nexport default RemoveLiquidity;\n","import React, { useState, useEffect } from 'react';\nimport PropTypes from 'prop-types';\nimport { useParams } from 'react-router-dom';\nimport { Header } from '@aragon/ui';\n\nimport BigNumber from 'bignumber.js';\nimport {\n  getTokenBalance, getBalance, getTotalSupply,\n} from '../../utils/infura';\nimport { toTokenUnitsBN } from '../../utils/number';\n\nimport { allOptions } from '../../constants/options';\n\nimport TradePageHeader from './Header';\nimport OptionExchange from './OptionExchange';\nimport AddLiquidity from './AddLiquidity';\nimport RemoveLiquidity from './RemoveLiquidity';\n\nimport tracker from '../../utils/tracker';\n\nfunction UniswapPool({ user }) {\n  const liquidityTokenDecimals = 18;\n  const { token } = useParams();\n\n  useEffect(() => {\n    tracker.pageview(`/uniswap/${token}`);\n  }, [token]);\n\n  const option = allOptions.find((o) => o.addr === token);\n  const {\n    uniswapExchange, decimals, symbol, exchange, strikePriceInUSD,\n  } = option;\n\n  const [poolTokenBalance, setPoolTokenBalance] = useState(new BigNumber(0));\n  const [userTokenBalance, setUserTokenBalance] = useState(new BigNumber(0));\n  const [poolETHBalance, setPoolETHBalance] = useState(new BigNumber(0));\n  const [userETHBalance, setUserETHBalance] = useState(new BigNumber(0));\n\n  const [userliquidityTokenBalance, setUserLiquidityTokenBalance] = useState(new BigNumber(0));\n  const [liquidityTokenSupply, setLiquidityTokenSupply] = useState(new BigNumber(0));\n\n  // Update Uniswap Pool Info\n  useEffect(() => {\n    let isCancelled = false;\n\n    async function updatePoolInfo() {\n      const [exTokenBalance, exchagneETHBalance, liqTokenTotalSupply] = await Promise.all([\n        getTokenBalance(token, uniswapExchange),\n        getBalance(uniswapExchange),\n        getTotalSupply(uniswapExchange),\n      ]);\n      // const { decimals: liqTokenDecimal, totalSupply: liqTokenTotalSupply } = liquidityTokenInfo;\n      const exchangeTokenBalance = toTokenUnitsBN(exTokenBalance, decimals);\n      if (!isCancelled) {\n        setLiquidityTokenSupply(toTokenUnitsBN(liqTokenTotalSupply, liquidityTokenDecimals));\n        setPoolETHBalance(new BigNumber(exchagneETHBalance));\n        setPoolTokenBalance(exchangeTokenBalance);\n      }\n    }\n    updatePoolInfo();\n    const id = setInterval(updatePoolInfo, 15000);\n\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [decimals, token, uniswapExchange]);\n\n  // Update User balances\n  useEffect(() => {\n    if (user === '') return;\n    let isCancelled = false;\n\n    async function updateUserInfo() {\n      const [tokenBalance, userEthBalance, liqTokenBalance] = await Promise.all([\n        getTokenBalance(token, user),\n        getBalance(user),\n        getTokenBalance(uniswapExchange, user),\n      ]);\n\n      const userOTknBalanceBN = toTokenUnitsBN(tokenBalance, decimals);\n      const userLiqTknBalanceBN = toTokenUnitsBN(liqTokenBalance, liquidityTokenDecimals);\n      if (!isCancelled) {\n        setUserLiquidityTokenBalance(userLiqTknBalanceBN);\n        setUserETHBalance(new BigNumber(userEthBalance));\n        setUserTokenBalance(userOTknBalanceBN);\n      }\n    }\n    updateUserInfo();\n    const id = setInterval(updateUserInfo, 15000);\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      isCancelled = true;\n      clearInterval(id);\n    };\n  }, [decimals, liquidityTokenDecimals, token, uniswapExchange, user]);\n\n  return (\n    <>\n      <Header primary=\"Exchange\" />\n\n      <TradePageHeader\n        user={user}\n        symbol={symbol}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        uniswapExchange={uniswapExchange}\n      />\n\n      <OptionExchange\n        strikePriceInUSD={strikePriceInUSD}\n        symbol={symbol}\n        tokenBalance={userTokenBalance}\n        token={token}\n        exchange={exchange}\n        decimals={decimals}\n      />\n\n      <Header primary=\"Provide Liquidity\" />\n\n      <AddLiquidity\n        user={user}\n        otoken={token}\n        otokenDecimals={decimals}\n        otokenSymbol={symbol}\n        userTokenBalance={userTokenBalance}\n        userliquidityTokenBalance={userliquidityTokenBalance}\n        userETHBalance={userETHBalance}\n        uniswapExchange={uniswapExchange}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        liquidityTokenDecimals={liquidityTokenDecimals}\n        liquidityTokenSupply={liquidityTokenSupply} // in base unit\n      />\n\n      <RemoveLiquidity\n        otokenDecimals={decimals}\n        otokenSymbol={symbol}\n        userliquidityTokenBalance={userliquidityTokenBalance}\n        userETHBalance={userETHBalance}\n        uniswapExchange={uniswapExchange}\n        poolETHBalance={poolETHBalance}\n        poolTokenBalance={poolTokenBalance}\n        liquidityTokenDecimals={liquidityTokenDecimals}\n        liquidityTokenSupply={liquidityTokenSupply} // in base unit\n      />\n    </>\n  );\n}\n\nUniswapPool.propTypes = {\n  user: PropTypes.string.isRequired,\n};\n\nexport default UniswapPool;\n","import React from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { Link } from '@aragon/ui';\nimport PropTypes from 'prop-types';\n\nfunction Footer({ theme }) {\n  const history = useHistory();\n\n  const style = {\n    backgroundColor: theme === 'light' ? '#F8F8F8' : '#35425e',\n    textAlign: 'center',\n    padding: '17px',\n    position: 'fixed',\n    left: '0',\n    bottom: '0',\n    height: '50px',\n    width: '100%',\n    fontSize: '14px',\n  };\n\n  return (\n    history.location.pathname.includes('/trade/')\n      ? <></>\n      : (\n        <div style={style}>\n          Powered By\n          {' '}\n          <Link external href=\"https://opyn.co/#/\">\n            Opyn\n          </Link>\n          {', '}\n          <Link external href=\"https://ui.aragon.org/\">\n            Aragon UI\n          </Link>\n          {', '}\n          <Link external href=\"https://www.blocknative.com/\">\n            Blocknative\n          </Link>\n          {'. '}\n          <Link external href=\"https://www.kollateral.co/\">\n            Kollateral\n          </Link>\n          {'. '}\n          Hosted on\n          {' '}\n          {' '}\n          <Link external href=\"https://github.com/antoncoding/opyn-liquidator\">\n            GitHub\n          </Link>\n          {/* </div> */}\n        </div>\n      )\n  );\n}\n\nFooter.propTypes = {\n  theme: PropTypes.string.isRequired,\n};\n\nexport default Footer;\n","import React, { useState } from 'react';\n\nimport { HashRouter as Router, Switch, Route } from 'react-router-dom';\nimport { Main } from '@aragon/ui';\nimport { updateModalMode } from './utils/web3';\nimport { storePreference, getPreference } from './utils/storage';\nimport NavBar from './components/NavBar';\nimport HomePage from './components/HomePage';\nimport AllOptoins from './components/AllContracts';\nimport Trade from './components/Trade';\nimport OptionTrading from './components/OptionTrading';\nimport MyVaults from './components/MyVaults';\nimport OptionPage from './components/OptionPage';\nimport ManageVault from './components/ManageVault';\nimport Uniswap from './components/UniswapTrade';\nimport Footer from './components/Footer';\n\n// testing\n// import ZEROXTest from './components/OptionTrading/test';\n\nfunction App() {\n  const storedTheme = getPreference('theme', 'light');\n\n  const [user, setUser] = useState(''); // the current connected user\n  const [theme, setTheme] = useState(storedTheme);\n\n  const updateTheme = (newTheme) => {\n    setTheme(newTheme);\n    updateModalMode(newTheme);\n    storePreference('theme', newTheme);\n  };\n\n  return (\n    <Router>\n      <Main assetsUrl={`${process.env.PUBLIC_URL}/aragon-ui/`} theme={theme}>\n        <NavBar user={user} setUser={setUser} theme={theme} updateTheme={updateTheme} />\n\n        <Switch>\n          {/* All Options */}\n          <Route path=\"/option/:token\">\n            <OptionPage user={user} />\n          </Route>\n          <Route path=\"/options/\">\n            <AllOptoins />\n          </Route>\n          {/* My Vaults */}\n          <Route path=\"/myvaults\">\n            <MyVaults user={user} />\n          </Route>\n          <Route path=\"/manage/:token/:owner\">\n            <ManageVault user={user} />\n          </Route>\n          {/* Trading */}\n          <Route path=\"/trade/oeth-usdc/\">\n            <OptionTrading\n              user={user}\n              theme={theme}\n            />\n          </Route>\n          {/* <Route path=\"/trades/test/\"><ZEROXTest /></Route> */}\n          <Route path=\"/uniswap/:token/\"><Uniswap user={user} /></Route>\n          <Route path=\"/uniswap/\">\n            <Trade />\n          </Route>\n          {/* HomePage */}\n          <Route path=\"/\"><HomePage /></Route>\n        </Switch>\n        <Footer theme={theme} />\n      </Main>\n    </Router>\n  );\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}